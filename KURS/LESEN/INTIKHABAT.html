<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INTIKHABAT - TELC B2 Training</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2196F3;
            --primary-dark: #1976D2;
            --secondary: #42A5F5;
            --secondary-dark: #1E88E5;
            --success: #4CAF50;
            --danger: #f44336;
            --warning: #FFC107;
            --light: #E3F2FD;
            --dark: #0D47A1;
            --text: #333;
            --text-light: #546E7A;
            --white: #ffffff;
            --shadow: 0 10px 30px rgba(33, 150, 243, 0.2);
            --shadow-hover: 0 20px 40px rgba(33, 150, 243, 0.3);
            --radius: 25px;
            --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, var(--light) 0%, #BBDEFB 100%);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            transition: var(--transition);
        }

        body.dark-mode {
            background: linear-gradient(135deg, var(--dark) 0%, var(--primary-dark) 100%);
            color: var(--light);
        }

        /* Header Controls - التعديل هنا */
        .header-controls {
            position: fixed;
            top: 20px;
            left: 20px;
            right: 20px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            z-index: 1000;
            gap: 15px;
        }

        .left-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: flex-start;
        }

        .right-controls {
            display: flex;
            gap: 15px;
            align-items: flex-start;
        }

        .control-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            cursor: pointer;
            box-shadow: var(--shadow);
            border: none;
            background: var(--primary);
            color: var(--white);
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }

        .control-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .control-btn:hover::before {
            width: 100%;
            height: 100%;
        }

        .control-btn:hover {
            transform: scale(1.15) rotate(5deg);
            box-shadow: 0 8px 25px rgba(33, 150, 243, 0.4);
        }

        /* شارة المشترك الذهبية - تم التعديل */
        .premium-badge-header {
            position: fixed;
            top: 20px;
            right: 90px; /* بجانب الأزرار */
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #000;
            padding: 0.5rem;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.3rem;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3); }
            to { box-shadow: 0 4px 20px rgba(255, 215, 0, 0.6); }
        }

        .home-btn {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid var(--primary);
            border-radius: 50px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-weight: 600;
            color: var(--primary-dark);
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
            font-size: 0.9rem;
            border: none;
            width: auto;
            height: auto;
        }

        .dark-mode .home-btn {
            background: rgba(13, 71, 161, 0.95);
            color: var(--light);
            border: 2px solid var(--secondary);
        }

        .home-btn:hover {
            background: var(--primary);
            color: var(--white);
            transform: translateY(-3px);
        }

        /* Language Selector */
        .language-selector {
            display: flex;
            position: relative;
        }

        .lang-btn {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid var(--primary);
            border-radius: var(--radius);
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-weight: 600;
            color: var(--primary-dark);
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
            border: none;
            width: auto;
            height: auto;
        }

        .dark-mode .lang-btn {
            background: rgba(13, 71, 161, 0.95);
            color: var(--light);
            border: 2px solid var(--secondary);
        }

        .lang-btn:hover {
            background: var(--primary);
            color: var(--white);
            transform: translateY(-3px);
        }

        .lang-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            margin-top: 0.5rem;
            background: var(--white);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            display: none;
            overflow: hidden;
            min-width: 120px;
            animation: dropdownSlide 0.3s ease;
            z-index: 1001;
        }

        .dark-mode .lang-dropdown {
            background: #1a237e;
            color: var(--light);
        }

        @keyframes dropdownSlide {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .lang-dropdown.show {
            display: block;
        }

        .lang-option {
            padding: 0.8rem 1rem;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
            color: var(--text);
        }

        .dark-mode .lang-option {
            color: var(--light);
            border-bottom: 1px solid #37474F;
        }

        .lang-option:hover {
            background: #f5f5f5;
            transform: translateX(5px);
        }

        .dark-mode .lang-option:hover {
            background: #283593;
        }

        .lang-option:last-child {
            border-bottom: none;
        }

        /* المحتوى الرئيسي */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--radius);
            padding: 3rem;
            box-shadow: var(--shadow);
            border: 1px solid rgba(33, 150, 243, 0.2);
            backdrop-filter: blur(15px);
            margin-top: 6rem;
            transition: var(--transition);
        }

        .dark-mode .container {
            background: rgba(13, 71, 161, 0.95);
            border: 1px solid rgba(227, 242, 253, 0.2);
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            animation: contentSlideUp 0.8s ease;
        }

        @keyframes contentSlideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header h1 {
            font-size: 2.8rem;
            color: var(--primary-dark);
            margin-bottom: 1rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .dark-mode .header h1 {
            color: #90CAF9;
        }

        .page-subtitle {
            font-size: 1.2rem;
            color: var(--text-light);
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .dark-mode .page-subtitle {
            color: #B0BEC5;
        }

        /* أزرار التحكم */
        .answer-controls {
            position: sticky;
            top: 80px; /* أعلى قليلاً لتجنب التداخل مع الشارة */
            background: rgba(255, 255, 255, 0.95);
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            z-index: 100;
            display: flex;
            gap: 1rem;
            justify-content: center;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(33, 150, 243, 0.2);
        }

        .dark-mode .answer-controls {
            background: rgba(13, 71, 161, 0.95);
            border: 1px solid rgba(227, 242, 253, 0.2);
        }

        .answer-btn {
            padding: 1rem 2rem;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            position: relative;
            overflow: hidden;
            border: none;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            transition: var(--transition);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .answer-btn::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: right 0.6s;
        }

        .answer-btn:hover::before {
            right: 100%;
        }

        .answer-btn:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }

        .show-answers {
            background: linear-gradient(135deg, var(--success) 0%, #45a049 100%);
            color: var(--white);
        }

        .hide-answers {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--secondary-dark) 100%);
            color: var(--white);
        }

        /* التصميم الخاص بالأسئلة */
        .section {
            margin: 2rem 0;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(33, 150, 243, 0.2);
            backdrop-filter: blur(10px);
            transition: var(--transition);
        }

        .dark-mode .section {
            background: rgba(13, 71, 161, 0.9);
            border: 1px solid rgba(227, 242, 253, 0.2);
        }

        .section-title {
            color: var(--primary-dark);
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.8rem;
            border-bottom: 2px solid var(--primary);
            font-weight: 600;
        }

        .dark-mode .section-title {
            color: #90CAF9;
        }

        .question {
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: rgba(33, 150, 243, 0.05);
            border-radius: 15px;
            border-right: 4px solid var(--primary);
            transition: var(--transition);
        }

        .dark-mode .question {
            background: rgba(33, 150, 243, 0.1);
        }

        .options {
            margin: 1rem 0;
        }

        .option {
            margin: 0.8rem 0;
            padding: 1rem;
            background: var(--white);
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .dark-mode .option {
            background: #1a237e;
            border-color: #37474F;
        }

        .option:hover {
            border-color: var(--primary);
            background: rgba(33, 150, 243, 0.05);
            transform: translateX(-5px);
        }

        .correct {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.1);
        }

        .incorrect {
            border-color: #f44336;
            background: rgba(244, 67, 54, 0.1);
        }

        .answer {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 10px;
            font-weight: 600;
            animation: slideInUp 0.5s ease;
        }

        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* التصحيح - تم التعديل للوضع الليلي */
        .correct-answer {
            background: rgba(76, 175, 80, 0.2);
            color: #2E7D32;
            border: 2px solid #4CAF50;
            font-weight: bold;
        }

        .dark-mode .correct-answer {
            background: rgba(76, 175, 80, 0.3);
            color: #A5D6A7;
            border: 2px solid #81C784;
        }

        /* النصوص والعناوين */
        .text-content {
            line-height: 1.7;
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: var(--white);
            border-radius: 15px;
            border: 1px solid #e0e0e0;
            font-size: 1.1rem;
            transition: var(--transition);
        }

        .dark-mode .text-content {
            background: #1a237e;
            border-color: #37474F;
        }

        .headings-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .heading-item {
            padding: 1.2rem;
            background: var(--white);
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            text-align: center;
            font-weight: 500;
            transition: var(--transition);
        }

        .dark-mode .heading-item {
            background: #1a237e;
            border-color: #37474F;
        }

        .matched {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.1);
            transform: scale(1.02);
        }

        /* الإعلانات والوضعيات */
        .ads-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .ad-item {
            padding: 1.5rem;
            background: var(--white);
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            min-height: 150px;
            transition: var(--transition);
        }

        .dark-mode .ad-item {
            background: #1a237e;
            border-color: #37474F;
        }

        .ad-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }

        .situations-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.2rem;
        }

        .situation-item {
            padding: 1.2rem;
            background: var(--white);
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            transition: var(--transition);
        }

        .dark-mode .situation-item {
            background: #1a237e;
            border-color: #37474F;
        }

        .situation-item:hover {
            border-color: var(--primary);
            background: rgba(33, 150, 243, 0.05);
        }

        /* Sprachbausteine */
        .fill-blanks {
            margin: 1.5rem 0;
        }

        .blank-text {
            line-height: 2;
            margin: 1.5rem 0;
            font-size: 1.2rem;
            padding: 1.5rem;
            background: var(--white);
            border-radius: 15px;
            border: 1px solid #e0e0e0;
        }

        .dark-mode .blank-text {
            background: #1a237e;
            border-color: #37474F;
        }

        .blank {
            display: inline-block;
            min-width: 120px;
            margin: 0 8px;
            padding: 0.5rem 1rem;
            border-bottom: 3px solid var(--primary);
            text-align: center;
            font-weight: 600;
            background: var(--white);
            border-radius: 8px;
            transition: var(--transition);
        }

        .dark-mode .blank {
            background: #1a237e;
        }

        .blank-answer {
            background: rgba(76, 175, 80, 0.2);
            color: #2E7D32;
            border-color: #4CAF50;
            font-weight: bold;
        }

        .dark-mode .blank-answer {
            background: rgba(76, 175, 80, 0.3);
            color: #A5D6A7;
            border-color: #81C784;
        }

        .hidden {
            display: none;
        }

        /* Floating Elements مثل الصفحة الرئيسية */
        .floating-elements {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .floating-element {
            position: absolute;
            font-size: 3.5rem;
            opacity: 0.15;
            animation: float 8s ease-in-out infinite;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
        }

        .floating-book { top: 15%; left: 8%; animation-delay: 0s; }
        .floating-pen { top: 75%; right: 12%; animation-delay: 1s; }
        .floating-globe { bottom: 20%; left: 15%; font-size: 4.5rem; animation-delay: 2s; }
        .floating-clock { top: 25%; right: 8%; animation-delay: 3s; }
        .floating-graduate { top: 65%; left: 5%; animation-delay: 4s; }
        .floating-notebook { bottom: 15%; right: 10%; animation-delay: 5s; }
        .floating-pencil { top: 45%; left: 12%; font-size: 2.8rem; animation-delay: 6s; }
        .floating-calculator { top: 35%; right: 15%; animation-delay: 7s; }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg) scale(1); }
            33% { transform: translateY(-30px) rotate(5deg) scale(1.1); }
            66% { transform: translateY(-15px) rotate(-3deg) scale(0.95); }
        }

        /* منطقة الكلمات للـ Sprachbausteine */
        .words-container {
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: var(--white);
            border-radius: 15px;
            border: 2px dashed var(--primary);
        }

        .dark-mode .words-container {
            background: #1a237e;
            border-color: var(--secondary);
        }

        .words-title {
            color: var(--primary-dark);
            font-size: 1.4rem;
            margin-bottom: 1rem;
            font-weight: 600;
            text-align: center;
        }

        .dark-mode .words-title {
            color: #90CAF9;
        }

        .words-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
        }

        .word-item {
            padding: 0.8rem;
            background: rgba(33, 150, 243, 0.1);
            border-radius: 8px;
            text-align: center;
            font-weight: 500;
            border: 1px solid rgba(33, 150, 243, 0.3);
        }

        .dark-mode .word-item {
            background: rgba(33, 150, 243, 0.2);
            border-color: rgba(33, 150, 243, 0.5);
        }

        @media (max-width: 768px) {
            .header-controls {
                top: 15px;
                left: 15px;
                right: 15px;
                gap: 10px;
            }

            .premium-badge-header {
                top: 15px;
                right: 70px;
                width: 45px;
                height: 45px;
                font-size: 1.1rem;
            }

            .home-btn {
                font-size: 0.8rem;
                padding: 0.4rem 0.8rem;
            }

            .container {
                padding: 2rem;
                margin: 1rem;
                margin-top: 5rem;
            }

            .header h1 {
                font-size: 2rem;
            }

            .headings-grid {
                grid-template-columns: 1fr;
            }

            .ads-grid {
                grid-template-columns: 1fr;
            }

            .right-controls {
                gap: 10px;
            }

            .answer-controls {
                top: 70px;
            }
        }

        @media (max-width: 480px) {
            .header-controls {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }

            .left-controls, .right-controls {
                flex-direction: row;
                justify-content: center;
            }

            .premium-badge-header {
                position: relative;
                top: auto;
                right: auto;
                transform: none;
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Floating Elements مثل الصفحة الرئيسية -->
    <div class="floating-elements">
        <div class="floating-element floating-book">📚</div>
        <div class="floating-element floating-pen">✏️</div>
        <div class="floating-element floating-globe">🌍</div>
        <div class="floating-element floating-clock">⏰</div>
        <div class="floating-element floating-graduate">🎓</div>
        <div class="floating-element floating-notebook">📓</div>
        <div class="floating-element floating-pencil">✏️</div>
        <div class="floating-element floating-calculator">🧮</div>
    </div>

    <!-- شارة المشترك الذهبية - تم التعديل -->
    <div class="premium-badge-header" id="premiumBadge">
        <i class="fas fa-crown"></i>
    </div>

    <!-- Header Controls -->
    <div class="header-controls">
        <div class="left-controls">
            <button class="home-btn" id="homeBtn">
                <i class="fas fa-home"></i>
                <span id="homeText">الرئيسية</span>
            </button>
            <div class="language-selector">
                <button class="lang-btn" id="langBtn">
                    <span id="langBtnText">العربية</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="lang-dropdown" id="langDropdown">
                    <div class="lang-option" data-lang="ar">
                        <span>🇸🇦</span>
                        <span>العربية</span>
                    </div>
                    <div class="lang-option" data-lang="de">
                        <span>🇩🇪</span>
                        <span>Deutsch</span>
                    </div>
                    <div class="lang-option" data-lang="en">
                        <span>🇬🇧</span>
                        <span>English</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="right-controls">
            <button class="control-btn" id="userBtn">
                <i class="fas fa-user"></i>
            </button>
            <button class="control-btn" id="themeToggle">
                <i class="fas fa-moon"></i>
            </button>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1 id="pageTitle">INTIKHABAT - TELC B2 Training</h1>
            <p class="page-subtitle" id="pageSubtitle">تمرين القراءة والفهم - الجزء الأول والثاني والثالث</p>
        </div>

        <!-- أزرار التحكم -->
        <div class="answer-controls">
            <button class="answer-btn show-answers" id="showAnswers">
                <i class="fas fa-check-circle"></i>
                <span id="showAnswersText">إظهار التصحيح</span>
            </button>
            <button class="answer-btn hide-answers" id="hideAnswers">
                <i class="fas fa-eye-slash"></i>
                <span id="hideAnswersText">إخفاء التصحيح</span>
            </button>
        </div>

        <!-- Lesen Teil 1 -->
        <div class="section">
            <h2 class="section-title" id="teil1Title">Lesen Teil 1</h2>
            <p id="teil1Description">Lesen Sie zuerst die zehn Überschriften. Lesen Sie dann die fünf Texte und entscheiden Sie, welche Überschrift (a-j) am besten zu welchem Text (1–5) passt.</p>
            
            <div class="headings-grid" id="headingsList">
                <!-- العناوين سيتم إضافتها بالجافاسكريبت -->
            </div>

            <div id="textsList">
                <!-- النصوص سيتم إضافتها بالجافاسكريبت -->
            </div>
        </div>

        <!-- Lesen Teil 2 -->
        <div class="section">
            <h2 class="section-title" id="teil2Title">Lesen Teil 2</h2>
            <div class="text-content" id="longText">
                <!-- النص الطويل سيتم إضافته بالجافاسكريبت -->
            </div>

            <div id="questionsList">
                <!-- الأسئلة سيتم إضافتها بالجافاسكريبت -->
            </div>
        </div>

        <!-- Lesen Teil 3 -->
        <div class="section">
            <h2 class="section-title" id="teil3Title">Lesen Teil 3</h2>
            <p id="teil3Description">Lesen Sie zuerst die zehn Situationen (11–20) und dann die zwölف Info-Texte (a–l). Welcher Info-Text passt zu welcher Situation?</p>
            
            <div class="situations-grid" id="situationsList">
                <!-- الوضعيات سيتم إضافتها بالجافاسكريبت -->
            </div>

            <div class="ads-grid" id="adsList">
                <!-- الإعلانات سيتم إضافتها بالجافاسكريبت -->
            </div>
        </div>

        <!-- Sprachbausteine Teil 1 -->
        <div class="section">
            <h2 class="section-title" id="sprach1Title">Sprachbausteine Teil 1</h2>
            <div class="fill-blanks">
                <div class="blank-text" id="blankText1">
                    <!-- النص بالفراغات سيتم إضافته بالجافاسكريبت -->
                </div>
            </div>
            <!-- منطقة الكلمات للـ Sprachbausteine Teil 1 -->
            <div class="words-container" id="wordsContainer1">
                <h3 class="words-title" id="wordsTitle1">الكلمات المتاحة لـ Sprachbausteine Teil 1</h3>
                <div class="words-grid" id="wordsGrid1">
                    <!-- الكلمات سيتم إضافتها بالجافاسكريبت -->
                </div>
            </div>
        </div>

        <!-- Sprachbausteine Teil 2 -->
        <div class="section">
            <h2 class="section-title" id="sprach2Title">Sprachbausteine Teil 2</h2>
            <div class="fill-blanks">
                <div class="blank-text" id="blankText2">
                    <!-- النص بالفراغات سيتم إضافته بالجافاسكريبت -->
                </div>
            </div>
            <!-- منطقة الكلمات للـ Sprachbausteine Teil 2 -->
            <div class="words-container" id="wordsContainer2">
                <h3 class="words-title" id="wordsTitle2">الكلمات المتاحة لـ Sprachbausteine Teil 2</h3>
                <div class="words-grid" id="wordsGrid2">
                    <!-- الكلمات سيتم إضافتها بالجافاسكريبت -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // الترجمات
        const translations = {
            ar: {
                homeText: "الرئيسية",
                themeText: "الوضع الليلي",
                langText: "العربية", 
                userText: "زائر",
                pageTitle: "INTIKHABAT - TELC B2 Training",
                pageSubtitle: "تمرين القراءة والفهم - الجزء الأول والثاني والثالث",
                showAnswersText: "إظهار التصحيح",
                hideAnswersText: "إخفاء التصحيح",
                teil1Title: "Lesen Teil 1",
                teil1Description: "Lesen Sie zuerst die zehn Überschriften. Lesen Sie dann die fünf Texte und entscheiden Sie, welche Überschrift (a-j) am besten zu welchem Text (1–5) passt.",
                teil2Title: "Lesen Teil 2", 
                teil3Title: "Lesen Teil 3",
                teil3Description: "Lesen Sie zuerst die zehn Situationen (11–20) und dann die zwölف Info-Texte (a–l). Welcher Info-Text passt zu welcher Situation?",
                sprach1Title: "Sprachbausteine Teil 1",
                sprach2Title: "Sprachbausteine Teil 2",
                wordsTitle1: "الكلمات المتاحة لـ Sprachbausteine Teil 1",
                wordsTitle2: "الكلمات المتاحة لـ Sprachbausteine Teil 2"
            },
            de: {
                homeText: "Startseite",
                themeText: "Nachtmodus", 
                langText: "Deutsch",
                userText: "Besucher",
                pageTitle: "INTIKHABAT - TELC B2 Training",
                pageSubtitle: "Leseverstehen - Teil 1, 2 und 3",
                showAnswersText: "Korrektur anzeigen",
                hideAnswersText: "Korrektur ausblenden",
                teil1Title: "Lesen Teil 1",
                teil1Description: "Lesen Sie zuerst die zehn Überschriften. Lesen Sie dann die fünf Texte und entscheiden Sie, welche Überschrift (a-j) am besten zu welchem Text (1–5) passt.",
                teil2Title: "Lesen Teil 2",
                teil3Title: "Lesen Teil 3", 
                teil3Description: "Lesen Sie zuerst die zehn Situationen (11–20) und dann die zwölf Info-Texte (a–l). Welcher Info-Text passt zu welcher Situation?",
                sprach1Title: "Sprachbausteine Teil 1",
                sprach2Title: "Sprachbausteine Teil 2",
                wordsTitle1: "Verfügbare Wörter für Sprachbausteine Teil 1",
                wordsTitle2: "Verfügbare Wörter für Sprachbausteine Teil 2"
            },
            en: {
                homeText: "Home",
                themeText: "Dark Mode",
                langText: "English",
                userText: "Visitor", 
                pageTitle: "INTIKHABAT - TELC B2 Training",
                pageSubtitle: "Reading Comprehension - Part 1, 2 and 3",
                showAnswersText: "Show Correction",
                hideAnswersText: "Hide Correction",
                teil1Title: "Reading Part 1",
                teil1Description: "First read the ten headings. Then read the five texts and decide which heading (a-j) best matches which text (1-5).",
                teil2Title: "Reading Part 2",
                teil3Title: "Reading Part 3",
                teil3Description: "First read the ten situations (11-20) and then the twelve info texts (a-l). Which info text matches which situation?",
                sprach1Title: "Language Elements Part 1", 
                sprach2Title: "Language Elements Part 2",
                wordsTitle1: "Available Words for Language Elements Part 1",
                wordsTitle2: "Available Words for Language Elements Part 2"
            }
        };

        // بيانات الأسئلة والإجابات من ملف PDF
        const examData = {
            // Lesen Teil 1
            headings: [
                "Ein neues Leben in der Fremde",
                "Die Wahl des richtigen Studienfachs", 
                "Berufliche Weiterbildung im Ausland",
                "Ein Auslandsjahr mit Hindernissen",
                "Sprachkenntnisse verbessern",
                "Kulturelle Unterschiede meistern",
                "Finanzierung eines Auslandsaufenthalts",
                "Vorbereitung auf das Studium im Ausland",
                "Herausforderungen im Gastland",
                "Persönliche Entwicklung durch Auslandserfahrung"
            ],
            
            texts: [
                {
                    content: `Viele junge Menschen träumen davon, nach der Schule ins Ausland zu gehen. Doch bevor es losgeht, müssen viele Hürden überwunden werden. Die Finanzierung ist oft das größte Problem. Neben Stipendien gibt es auch die Möglichkeit, einen Bildungskredit aufzunehmen. Man sollte sich frühzeitig über die verschiedenen Optionen informieren und einen detaillierten Finanzplan erstellen.`,
                    correctAnswer: "Finanzierung eines Auslandsaufenthalts"
                },
                {
                    content: `Die Entscheidung für ein Studienfach fällt vielen Abiturienten schwer. Soll man seinen Interessen folgen oder eher auf die Jobchancen achten? Eine Studienberatung kann hier helfen. Auch Praktika geben Einblick in verschiedene Berufsfelder. Wichtig ist, dass man sich für ein Fach entscheidet, das einen wirklich interessiert und motiviert.`,
                    correctAnswer: "Die Wahl des richtigen Studienfachs"
                },
                {
                    content: `Ein Auslandsaufenthalt verändert die Persönlichkeit. Man wird selbstständiger, offener für Neues und lernt, mit schwierigen Situationen umzugehen. Viele Rückkehrer berichten, dass sie durch die Erfahrung im Ausland mehr Selbstvertrauen gewonnen haben und besser wissen, was sie im Leben wollen. Diese persönliche Entwicklung ist oft wertvoller als die fachlichen Kenntnisse.`,
                    correctAnswer: "Persönliche Entwicklung durch Auslandserfahrung"
                },
                {
                    content: `Die ersten Wochen in einem fremden Land sind nicht immer einfach. Neben der Sprachbarriere gibt es auch kulturelle Unterschiede zu bewältigen. Was in Deutschland als höflich gilt, kann in anderen Ländern unangemessen sein. Es ist wichtig, sich vorher über die Gepflogenheiten des Gastlandes zu informieren und offen für neue Erfahrungen zu sein.`,
                    correctAnswer: "Kulturelle Unterschiede meistern"
                },
                {
                    content: `Wer im Ausland studieren oder arbeiten möchte, sollte über gute Sprachkenntnisse verfügen. Es gibt verschiedene Möglichkeiten, die Sprachfähigkeiten zu verbessern: Sprachkurse an Volkshochschulen, Online-Lernplattformen oder Tandem-Partnerschaften mit Muttersprachlern. Regelmäßiges Üben ist der Schlüssel zum Erfolg.`,
                    correctAnswer: "Sprachkenntnisse verbessern"
                }
            ],

            // Lesen Teil 2 - النص الكامل
            longText: {
                content: `Die Entscheidung für ein Studium im Ausland will gut überlegt sein. Viele Studierende zieht es in ferne Länder, doch nicht immer läuft alles nach Plan. Eine gründliche Vorbereitung ist daher unerlässlich.
Zunächst sollte man sich über die Studienmöglichkeiten im Wunschland informieren. Welche Universitäten bieten den gewünschten Studiengang an? Welche Zulassungsvoraussetzungen gibt es? Einige Länder verlangen spezielle Sprachtests, andere verlangen bestimmte Schulabschlüsse.
Die Finanzierung ist ein weiterer wichtiger Punkt. Ein Auslandsstudium kann teuer werden: Studiengebühren, Lebenshaltungskosten, Krankenversicherung und Flugtickets summieren sich schnell. Es lohnt sich, frühzeitig nach Stipendien zu suchen oder über einen Bildungskredit nachzudenken.
Auch die Unterkunft sollte frühzeitig geklärt werden. Viele Universitäten bieten Wohnheime für internationale Studierende an. Alternativ kann man eine WG oder eine eigene Wohnung suchen. Wichtig ist, dass man sich wohlfühlt und die Unterkunft nicht zu weit vom Campus entfernt ist.
Die kulturellen Unterschiede sollten nicht unterschätzt werden. Was in Deutschland normal ist, kann in anderen Ländern befremdlich wirken. Es hilft, sich vorab über die Gepflogenheiten des Gastlandes zu informieren. Auch kleine Dinge wie Begrüßungsrituale oder Essgewohnheiten können zunächst ungewohnt sein.
Trotz aller Vorbereitung kann es zu Problemen kommen. In diesem Fall ist es gut, Ansprechpartner an der Gasthochschule zu kennen. Die meisten Universitäten haben ein International Office, das bei Fragen und Problemen weiterhilft. Auch der Kontakt zu anderen internationalen Studierenden kann unterstützend wirken.
Ein Auslandsstudium ist eine bereichernde Erfahrung, die nicht nur fachliche Kenntnisse vermittelt, sondern auch die persönliche Entwicklung fördert. Man lernt, selbstständiger zu werden, sich in einer fremden Umgebung zurechtzufinden und mit Menschen aus verschiedenen Kulturen zusammenzuarbeiten.
Die Rückkehr nach Deutschland kann ebenfalls eine Herausforderung sein. Viele Studierende berichten von einem "Kulturschock" bei der Rückkehr. Die gewohnte Umgebung erscheint plötzlich fremd. Es dauert einige Zeit, bis man sich wieder eingelebt hat.
Trotz aller Herausforderungen bereuen die wenigsten ihren Auslandsaufenthalt. Die gesammelten Erfahrungen sind ein wertvoller Schatz für das weitere Leben. Sie bereichern nicht nur den Lebenslauf, sondern auch die persönliche Entwicklung.`,
                questions: [
                    {
                        question: "Was ist vor einem Auslandsstudium besonders wichtig?",
                        options: [
                            "Sofortige Buchung des Flugtickets",
                            "Eine gründliche Vorbereitung",
                            "Der Kauf teurer Kleidung"
                        ],
                        correctAnswer: "Eine gründliche Vorbereitung"
                    },
                    {
                        question: "Welche finanziellen Aspekte sollten bedacht werden?",
                        options: [
                            "Nur die Studiengebühren",
                            "Studiengebühren, Lebenshaltungskosten und Versicherungen",
                            "Ausschließlich die Kosten für Freizeitaktivitäten"
                        ],
                        correctAnswer: "Studiengebühren, Lebenshaltungskosten und Versicherungen"
                    },
                    {
                        question: "Was kann bei kulturellen Unterschieden helfen?", 
                        options: [
                            "Sich vorab über die Gepflogenheiten zu informieren",
                            "Die eigenen Gewohnheiten beizubehalten",
                            "Kontakt mit anderen zu vermeiden"
                        ],
                        correctAnswer: "Sich vorab über die Gepflogenheiten zu informieren"
                    },
                    {
                        question: "Welche Unterstützung bieten Universitäten?",
                        options: [
                            "Keine besondere Unterstützung",
                            "Ein International Office für internationale Studierende",
                            "Finanzielle Zuschüsse für alle"
                        ],
                        correctAnswer: "Ein International Office für internationale Studierende"
                    },
                    {
                        question: "Was berichten viele Studierende nach der Rückkehr?",
                        options: [
                            "Sie bereuen den Auslandsaufenthalt",
                            "Sie erleben einen Kulturschock bei der Rückkehr",
                            "Sie finden sofort wieder in den Alltag"
                        ],
                        correctAnswer: "Sie erleben einen Kulturschock bei der Rückkehr"
                    }
                ]
            },

            // Lesen Teil 3
            situations: [
                "Sie möchten nach dem Abitur ein Jahr im Ausland verbringen und suchen nach Finanzierungsmöglichkeiten.",
                "Sie interessieren sich für ein Studium in den USA und möchten wissen, welche Sprachtests erforderlich sind.",
                "Sie haben Schwierigkeiten, sich in Ihrem Gastland einzuleben und suchen Unterstützung.",
                "Sie möchten Ihre Sprachkenntnisse vor dem Auslandsaufenthalt verbessern.",
                "Sie überlegen, welches Studienfach am besten zu Ihren Interessen passt.",
                "Sie sind unsicher, wie Sie sich in Ihrem Gastland verhalten sollen.", 
                "Sie suchen nach einer Unterkunft in der Nähe Ihrer Gasthochschule.",
                "Sie möchten wissen, wie ein Auslandsaufenthalt Ihre persönliche Entwicklung beeinflussen kann.",
                "Sie planen nach Ihrem Auslandsaufenthalt die Rückkehr nach Deutschland.",
                "Sie möchten beruflich weiterkommen und überlegen, eine Weiterbildung im Ausland zu machen."
            ],

            ads: [
                {
                    id: "a",
                    title: "Sprachkurse für Auslandsvorbereitung",
                    content: "Verbessern Sie Ihre Sprachkenntnisse für den anstehenden Auslandsaufenthalt! Wir bieten Intensivkurse in Englisch, Spanisch, Französisch und vielen anderen Sprachen. Kleine Gruppen, qualifizierte Lehrkräfte und flexible Kurszeiten. Jetzt anmelden und von Rabatten für Frühbucher profitieren!"
                },
                {
                    id: "b", 
                    title: "Studienberatung International",
                    content: "Unentschlossen bei der Studienwahl? Wir helfen Ihnen, das passende Studienfach und die richtige Universität im Ausland zu finden. Kostenlose Beratungstermine nach Vereinbarung. Wir unterstützen Sie bei der Bewerbung und bei allen Formalitäten."
                },
                {
                    id: "c",
                    title: "Finanzierungshilfen für Auslandsaufenthalte", 
                    content: "Stipendien, Bildungskredite, Auslands-BAföG - wir zeigen Ihnen alle Finanzierungsmöglichkeiten für Ihren Auslandsaufenthalt auf. In unserem Workshop lernen Sie, wie Sie erfolgreich Stipendienanträge stellen und Ihren Auslandsaufenthalt finanzieren können."
                },
                {
                    id: "d",
                    title: "Unterkunftsvermittlung für Studierende",
                    content: "Suchen Sie eine Wohnung oder ein Zimmer in der Nähe Ihrer Gasthochschule? Wir vermitteln preiswerte Unterkünfte für internationale Studierende in über 30 Ländern. Persönliche Beratung und Unterstützung bei der Vertragsunterzeichnung."
                },
                {
                    id: "e",
                    title: "Interkulturelles Training",
                    content: "Bereiten Sie sich auf kulturelle Unterschiede vor! In unseren Seminaren lernen Sie, wie Sie sich in Ihrem Gastland angemessen verhalten und Missverständnisse vermeiden. Praktische Übungen und Erfahrungsberichte von Rückkehrern."
                },
                {
                    id: "f",
                    title: "Betreuung für internationale Studierende",
                    content: "Schwierigkeiten bei der Eingewöhnung? Unser Team unterstützt Sie bei allen Problemen während Ihres Auslandsaufenthalts. Von der Behördenkommunikation bis zur Studienorganisation - wir sind für Sie da!"
                },
                {
                    id: "g",
                    title: "Testvorbereitung TOEFL/IELTS",
                    content: "Optimale Vorbereitung auf englische Sprachtests. Erfahrene Dozenten, originalgetreue Übungstests und individuelle Lernpläne. In vier Wochen fit für den Test! Garantierte Ergebnisverbesserung oder Geld zurück."
                },
                {
                    id: "h", 
                    title: "Berufliche Weiterbildung weltweit",
                    content: "Machen Sie den nächsten Schritt in Ihrer Karriere mit einer internationalen Weiterbildung! Wir vermitteln Plätze in renommierten Bildungseinrichtungen weltweit. Von Management-Kursen bis zu technischen Spezialisierungen."
                },
                {
                    id: "i",
                    title: "Persönlichkeitsentwicklung durch Auslandserfahrung",
                    content: "Wie verändert ein Auslandsaufenthalt Ihre Persönlichkeit? In unserem Workshop reflektieren Sie Ihre Erfahrungen und lernen, wie Sie die gewonnenen Fähigkeiten im Berufsleben nutzen können. Kostenlose Infoveranstaltung jeden ersten Donnerstag im Monat."
                },
                {
                    id: "j",
                    title: "Welcome Back - Rückkehrermanagement", 
                    content: "Die Rückkehr nach Deutschland kann herausfordernd sein. Wir helfen Ihnen beim Wiedereinstieg in das deutsche Leben und bei der beruflichen Orientierung. Netzwerktreffen mit anderen Rückkehrern und Karriereberatung inklusive."
                },
                {
                    id: "k",
                    title: "Praktika im Ausland",
                    content: "Sammeln Sie internationale Berufserfahrung! Wir vermitteln Praktika in Unternehmen weltweit. Alle Branchen, verschiedene Dauer, betreute Programme. Perfekt für Studierende und Berufseinsteiger."
                },
                {
                    id: "l",
                    title: "Sprachtandem online",
                    content: "Verbessern Sie Ihre Sprachkenntnisse im Austausch mit Muttersprachlern! Kostenlose Vermittlung von Tandem-Partnern weltweit. Flexible Zeiten, verschiedene Sprachen, von zu Hause aus lernen."
                }
            ],

            // الإجابات الصحيحة لـ Lesen Teil 3
            teil3Answers: {
                11: "Finanzierungshilfen für Auslandsaufenthalte",
                12: "Testvorbereitung TOEFL/IELTS", 
                13: "Betreuung für internationale Studierende",
                14: "Sprachkurse für Auslandsvorbereitung",
                15: "Studienberatung International",
                16: "Interkulturelles Training",
                17: "Unterkunftsvermittlung für Studierende",
                18: "Persönlichkeitsentwicklung durch Auslandserfahrung",
                19: "Welcome Back - Rückkehrermanagement", 
                20: "Berufliche Weiterbildung weltweit"
            },

            // Sprachbausteine Teil 1
            blankText1: {
                content: `Liebe Julia,
vielen Dank für deinen Brief __(21)__ Madrid! Ich kann gar nicht glauben, dass du schon seit sechs Monaten in Spanien lebst – die Zeit __(22)__ so schnell vergangen.
In den letzten Wochen __(23)__ ich leider keine Zeit gehabt, dir zu schreiben, __(24)__ ich so viel für die Uni zu tun hatte. Aber jetzt kann ich dir endlich __(25)__, was hier alles passiert ist.
An der Universität __(26)__ wir momentan viel Stress, weil mehrere Professoren gleichzeitig wichtige Abgaben verlangen. Ich __(27)__ wirklich nicht, wie ich alles schaffen soll. Manchmal __(28)__ ich am liebsten alles hinschmeißen, aber das __(29)__ ja auch keine Lösung.
Nächstes Semester möchte ich __(30)__ ein Auslandssemester in Frankreich machen. Dafür __(31)__ ich aber noch meinen Französischkurs abschließen. Wenn das klappt, __(32)__ ich im September nach Lyon gehen.
Letzte Woche __(33)__ ich zufällig Thomas getroffen. Weißt du noch? Er __(34)__ damals in unserer Spanischgruppe. Er __(35)__ jetzt Medizin und __(36)__ vor, später in Entwicklungsländern zu arbeiten.
So, das __(37)__ erstmal alles von mir. Ich __(38)__ mich schon auf deine Antwort! 
Viele liebe Grüße
Deine Anna`,
                answers: ["aus", "ist", "habe", "weil", "erzählen", "haben", "weiß", "würde", "wäre", "gerne", "muss", "kann", "habe", "war", "studiert", "plant", "war", "freue"]
            },

            // Sprachbausteine Teil 2
            blankText2: {
                content: `Die Digitalisierung __(39)__ in den letzten Jahren viele Bereiche unseres Lebens verändert. Besonders im Bildungswesen __(40)__ sich neue Möglichkeiten ergeben. 
__(41)__ man früher in die Bibliothek gehen __(42)__, um für ein Referat zu recherchieren, __(43)__ man heute bequem von zu Hause __(44)__ Internet auf eine Fülle von Informationen zugreifen.
Auch das Lernen selbst hat sich gewandelt. __(45)__ traditionellen Unterrichtsformen __(46)__ heute viele digitale Lernplattformen, __(47)__ das Lernen flexibler gestalten. Schüler und Studenten __(48)__ nun ortsunabhängig lernen und __(49)__ sich ihre Zeit selbst einteilen.
Allerdings __(50)__ die Digitalisierung auch Herausforderungen. Nicht jeder __(51)__ über die notwendige technische Ausstattung __(52)__. Zudem __(53)__ es wichtig, dass Lernende __(54)__ den Umgang mit digitalen Medien vertraut sind.
Insgesamt __(55)__ die Digitalisierung das Bildungswesen jedoch eher bereichert. Sie __(56)__ neue Wege des Lernens und Lehrens und __(57)__ Bildung für mehr Menschen zugänglich. In Zukunft __(58)__ dieser Trend sich sicherlich noch verstärken.`,
                answers: ["hat", "haben", "Während", "musste", "kann", "aus", "Neben", "bieten", "die", "können", "können", "bringt", "verfügt", "verfügt", "ist", "sind", "hat", "eröffnet", "macht", "wird"]
            }
        };

        // تهيئة الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
            setupEventListeners();
        });

        let currentLang = 'ar';
        let isDarkMode = false;

        function initializePage() {
            // تحميل الإعدادات المحفوظة
            const savedLang = localStorage.getItem('language') || 'ar';
            const savedDarkMode = localStorage.getItem('darkMode') === 'true';
            const username = localStorage.getItem('username') || 'زائر';
            const access = localStorage.getItem('access');
            
            changeLanguage(savedLang);
            if (savedDarkMode) {
                toggleDarkMode();
            }
            
            // التحقق من حالة المستخدم
            if (access === 'paid' && username) {
                document.getElementById('premiumBadge').style.display = 'flex';
            }
            
            // تهيئة الأجزاء
            initializeTeil1();
            initializeTeil2();  
            initializeTeil3();
            initializeSprachbausteine();
        }

        function initializeTeil1() {
            const headingsList = document.getElementById('headingsList');
            const textsList = document.getElementById('textsList');

            headingsList.innerHTML = '';
            textsList.innerHTML = '';

            // إضافة العناوين
            examData.headings.forEach((heading, index) => {
                const headingItem = document.createElement('div');
                headingItem.className = 'heading-item';
                headingItem.innerHTML = `
                    <strong>${String.fromCharCode(97 + index)})</strong> ${heading}
                `;
                headingItem.dataset.letter = String.fromCharCode(97 + index);
                headingsList.appendChild(headingItem);
            });

            // إضافة النصوص
            examData.texts.forEach((text, index) => {
                const textItem = document.createElement('div');
                textItem.className = 'question';
                textItem.innerHTML = `
                    <h3>Text ${index + 1}</h3>
                    <div class="text-content">${text.content}</div>
                    <div class="answer hidden correct-answer">
                        ${currentLang === 'ar' ? 'الإجابة الصحيحة:' : currentLang === 'de' ? 'Richtige Antwort:' : 'Correct answer:'} ${text.correctAnswer}
                    </div>
                `;
                textsList.appendChild(textItem);
            });
        }

        function initializeTeil2() {
            const longText = document.getElementById('longText');
            const questionsList = document.getElementById('questionsList');

            longText.innerHTML = `<div class="text-content">${examData.longText.content}</div>`;

            questionsList.innerHTML = '';
            examData.longText.questions.forEach((question, index) => {
                const questionItem = document.createElement('div');
                questionItem.className = 'question';
                questionItem.innerHTML = `
                    <h3>Frage ${index + 6}</h3>
                    <p><strong>${question.question}</strong></p>
                    <div class="options">
                        ${question.options.map((option, optIndex) => `
                            <div class="option" data-index="${optIndex}">
                                ${String.fromCharCode(97 + optIndex)}) ${option}
                            </div>
                        `).join('')}
                    </div>
                    <div class="answer hidden correct-answer">
                        ${currentLang === 'ar' ? 'الإجابة الصحيحة:' : currentLang === 'de' ? 'Richtige Antwort:' : 'Correct answer:'} ${question.correctAnswer}
                    </div>
                `;
                questionsList.appendChild(questionItem);
            });
        }

        function initializeTeil3() {
            const situationsList = document.getElementById('situationsList');
            const adsList = document.getElementById('adsList');

            situationsList.innerHTML = '';
            examData.situations.forEach((situation, index) => {
                const situationItem = document.createElement('div');
                situationItem.className = 'situation-item';
                situationItem.innerHTML = `
                    <strong>${index + 11})</strong> ${situation}
                    <div class="answer hidden correct-answer">
                        ${currentLang === 'ar' ? 'الإجابة الصحيحة:' : currentLang === 'de' ? 'Richtige Antwort:' : 'Correct answer:'} ${examData.teil3Answers[index + 11]}
                    </div>
                `;
                situationsList.appendChild(situationItem);
            });

            adsList.innerHTML = '';
            examData.ads.forEach(ad => {
                const adItem = document.createElement('div');
                adItem.className = 'ad-item';
                adItem.innerHTML = `
                    <strong>${ad.id.toUpperCase()}) ${ad.title}</strong>
                    <p>${ad.content}</p>
                `;
                adsList.appendChild(adItem);
            });
        }

        function initializeSprachbausteine() {
            // Teil 1
            const blankText1 = document.getElementById('blankText1');
            const textWithBlanks1 = examData.blankText1.content.replace(/__\(\d+\)__/g, match => {
                const blankNumber = parseInt(match.match(/\d+/)[0]);
                return `<span class="blank">______<span class="blank-answer hidden">${examData.blankText1.answers[blankNumber - 21]}</span></span>`;
            });
            blankText1.innerHTML = textWithBlanks1;

            // إضافة الكلمات لـ Teil 1
            const wordsGrid1 = document.getElementById('wordsGrid1');
            wordsGrid1.innerHTML = '';
            examData.blankText1.answers.forEach((word, index) => {
                const wordItem = document.createElement('div');
                wordItem.className = 'word-item';
                wordItem.textContent = word;
                wordsGrid1.appendChild(wordItem);
            });

            // Teil 2
            const blankText2 = document.getElementById('blankText2');
            const textWithBlanks2 = examData.blankText2.content.replace(/__\(\d+\)__/g, match => {
                const blankNumber = parseInt(match.match(/\d+/)[0]);
                return `<span class="blank">______<span class="blank-answer hidden">${examData.blankText2.answers[blankNumber - 39]}</span></span>`;
            });
            blankText2.innerHTML = textWithBlanks2;

            // إضافة الكلمات لـ Teil 2
            const wordsGrid2 = document.getElementById('wordsGrid2');
            wordsGrid2.innerHTML = '';
            examData.blankText2.answers.forEach((word, index) => {
                const wordItem = document.createElement('div');
                wordItem.className = 'word-item';
                wordItem.textContent = word;
                wordsGrid2.appendChild(wordItem);
            });
        }

        function setupEventListeners() {
            // أزرار التحكم
            document.getElementById('showAnswers').addEventListener('click', showAllAnswers);
            document.getElementById('hideAnswers').addEventListener('click', hideAllAnswers);
            
            // زر الرئيسية
            document.getElementById('homeBtn').addEventListener('click', () => {
                window.location.href = 'tahada.html';
            });
            
            // زر الوضع الليلي
            document.getElementById('themeToggle').addEventListener('click', toggleDarkMode);
            
            // زر المستخدم
            document.getElementById('userBtn').addEventListener('click', () => {
                window.location.href = 'tahada.html#profile';
            });
            
            // زر اللغة
            document.getElementById('langBtn').addEventListener('click', toggleLangDropdown);
            document.querySelectorAll('.lang-option').forEach(option => {
                option.addEventListener('click', () => {
                    const lang = option.getAttribute('data-lang');
                    changeLanguage(lang);
                    document.getElementById('langDropdown').classList.remove('show');
                });
            });
            
            // إغلاق القوائم المنسدلة بالنقر خارجها
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.language-selector')) {
                    document.getElementById('langDropdown').classList.remove('show');
                }
            });
        }

        function showAllAnswers() {
            document.querySelectorAll('.answer').forEach(answer => {
                answer.classList.remove('hidden');
            });
            document.querySelectorAll('.blank-answer').forEach(answer => {
                answer.classList.remove('hidden');
            });
            document.querySelectorAll('.heading-item').forEach((heading, index) => {
                const letter = heading.dataset.letter;
                examData.texts.forEach(text => {
                    if (text.correctAnswer === examData.headings[letter.charCodeAt(0) - 97]) {
                        heading.classList.add('matched');
                    }
                });
            });
        }

        function hideAllAnswers() {
            document.querySelectorAll('.answer').forEach(answer => {
                answer.classList.add('hidden');
            });
            document.querySelectorAll('.blank-answer').forEach(answer => {
                answer.classList.add('hidden');
            });
            document.querySelectorAll('.heading-item').forEach(heading => {
                heading.classList.remove('matched');
            });
        }

        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark-mode', isDarkMode);
            localStorage.setItem('darkMode', isDarkMode);
            
            const themeIcon = document.querySelector('#themeToggle i');
            if (isDarkMode) {
                themeIcon.className = 'fas fa-sun';
            } else {
                themeIcon.className = 'fas fa-moon';
            }
        }

        function toggleLangDropdown() {
            document.getElementById('langDropdown').classList.toggle('show');
        }

        function changeLanguage(lang) {
            currentLang = lang;
            const t = translations[lang];
            
            // تحديث جميع النصوص
            Object.keys(t).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    element.textContent = t[key];
                }
            });
            
            localStorage.setItem('language', lang);
            
            // إعادة تهيئة المحتوى لترجمة الإجابات
            initializeTeil1();
            initializeTeil2();
        }
    </script>
</body>
</html>