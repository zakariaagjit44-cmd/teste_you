<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALPEN - TELC B2 Training</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2196F3;
            --primary-dark: #1976D2;
            --secondary: #42A5F5;
            --secondary-dark: #1E88E5;
            --success: #4CAF50;
            --danger: #f44336;
            --warning: #FFC107;
            --light: #E3F2FD;
            --dark: #0D47A1;
            --text: #333;
            --text-light: #546E7A;
            --white: #ffffff;
            --shadow: 0 10px 30px rgba(33, 150, 243, 0.2);
            --shadow-hover: 0 20px 40px rgba(33, 150, 243, 0.3);
            --radius: 25px;
            --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, var(--light) 0%, #BBDEFB 100%);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            transition: var(--transition);
        }

        body.dark-mode {
            background: linear-gradient(135deg, var(--dark) 0%, var(--primary-dark) 100%);
            color: var(--light);
        }

        /* Header Controls - التعديل هنا */
        .header-controls {
            position: fixed;
            top: 20px;
            left: 20px;
            right: 20px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            z-index: 1000;
            gap: 15px;
        }

        .left-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: flex-start;
        }

        .right-controls {
            display: flex;
            gap: 15px;
            align-items: flex-start;
        }

        .control-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            cursor: pointer;
            box-shadow: var(--shadow);
            border: none;
            background: var(--primary);
            color: var(--white);
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }

        .control-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .control-btn:hover::before {
            width: 100%;
            height: 100%;
        }

        .control-btn:hover {
            transform: scale(1.15) rotate(5deg);
            box-shadow: 0 8px 25px rgba(33, 150, 243, 0.4);
        }

        /* شارة المشترك الذهبية - تم التعديل */
        .premium-badge-header {
            position: fixed;
            top: 20px;
            right: 90px; /* بجانب الأزرار */
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #000;
            padding: 0.5rem;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.3rem;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3); }
            to { box-shadow: 0 4px 20px rgba(255, 215, 0, 0.6); }
        }

        .home-btn {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid var(--primary);
            border-radius: 50px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-weight: 600;
            color: var(--primary-dark);
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
            font-size: 0.9rem;
            border: none;
            width: auto;
            height: auto;
        }

        .dark-mode .home-btn {
            background: rgba(13, 71, 161, 0.95);
            color: var(--light);
            border: 2px solid var(--secondary);
        }

        .home-btn:hover {
            background: var(--primary);
            color: var(--white);
            transform: translateY(-3px);
        }

        /* Language Selector */
        .language-selector {
            display: flex;
            position: relative;
        }

        .lang-btn {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid var(--primary);
            border-radius: var(--radius);
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-weight: 600;
            color: var(--primary-dark);
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
            border: none;
            width: auto;
            height: auto;
        }

        .dark-mode .lang-btn {
            background: rgba(13, 71, 161, 0.95);
            color: var(--light);
            border: 2px solid var(--secondary);
        }

        .lang-btn:hover {
            background: var(--primary);
            color: var(--white);
            transform: translateY(-3px);
        }

        .lang-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            margin-top: 0.5rem;
            background: var(--white);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            display: none;
            overflow: hidden;
            min-width: 120px;
            animation: dropdownSlide 0.3s ease;
            z-index: 1001;
        }

        .dark-mode .lang-dropdown {
            background: #1a237e;
            color: var(--light);
        }

        @keyframes dropdownSlide {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .lang-dropdown.show {
            display: block;
        }

        .lang-option {
            padding: 0.8rem 1rem;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
            color: var(--text);
        }

        .dark-mode .lang-option {
            color: var(--light);
            border-bottom: 1px solid #37474F;
        }

        .lang-option:hover {
            background: #f5f5f5;
            transform: translateX(5px);
        }

        .dark-mode .lang-option:hover {
            background: #283593;
        }

        .lang-option:last-child {
            border-bottom: none;
        }

        /* زر الاشتراك */
        .subscribe-btn {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid var(--primary);
            border-radius: 50px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-weight: 600;
            color: var(--primary-dark);
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
            font-size: 0.9rem;
            border: none;
            width: auto;
            height: auto;
        }

        .dark-mode .subscribe-btn {
            background: rgba(13, 71, 161, 0.95);
            color: var(--light);
            border: 2px solid var(--secondary);
        }

        .subscribe-btn:hover {
            background: var(--primary);
            color: var(--white);
            transform: translateY(-3px);
        }

        /* المحتوى الرئيسي */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--radius);
            padding: 3rem;
            box-shadow: var(--shadow);
            border: 1px solid rgba(33, 150, 243, 0.2);
            backdrop-filter: blur(15px);
            margin-top: 6rem;
            transition: var(--transition);
        }

        .dark-mode .container {
            background: rgba(13, 71, 161, 0.95);
            border: 1px solid rgba(227, 242, 253, 0.2);
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            animation: contentSlideUp 0.8s ease;
        }

        @keyframes contentSlideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header h1 {
            font-size: 2.8rem;
            color: var(--primary-dark);
            margin-bottom: 1rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .dark-mode .header h1 {
            color: #90CAF9;
        }

        .page-subtitle {
            font-size: 1.2rem;
            color: var(--text-light);
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .dark-mode .page-subtitle {
            color: #B0BEC5;
        }

        /* أزرار التحكم */
        .answer-controls {
            position: sticky;
            top: 80px; /* أعلى قليلاً لتجنب التداخل مع الشارة */
            background: rgba(255, 255, 255, 0.95);
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            z-index: 100;
            display: flex;
            gap: 1rem;
            justify-content: center;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(33, 150, 243, 0.2);
        }

        .dark-mode .answer-controls {
            background: rgba(13, 71, 161, 0.95);
            border: 1px solid rgba(227, 242, 253, 0.2);
        }

        .answer-btn {
            padding: 1rem 2rem;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            position: relative;
            overflow: hidden;
            border: none;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            transition: var(--transition);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .answer-btn::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: right 0.6s;
        }

        .answer-btn:hover::before {
            right: 100%;
        }

        .answer-btn:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }

        .show-answers {
            background: linear-gradient(135deg, var(--success) 0%, #45a049 100%);
            color: var(--white);
        }

        .hide-answers {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--secondary-dark) 100%);
            color: var(--white);
        }

        /* التصميم الخاص بالأسئلة */
        .section {
            margin: 2rem 0;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(33, 150, 243, 0.2);
            backdrop-filter: blur(10px);
            transition: var(--transition);
        }

        .dark-mode .section {
            background: rgba(13, 71, 161, 0.9);
            border: 1px solid rgba(227, 242, 253, 0.2);
        }

        .section-title {
            color: var(--primary-dark);
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.8rem;
            border-bottom: 2px solid var(--primary);
            font-weight: 600;
        }

        .dark-mode .section-title {
            color: #90CAF9;
        }

        .question {
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: rgba(33, 150, 243, 0.05);
            border-radius: 15px;
            border-right: 4px solid var(--primary);
            transition: var(--transition);
        }

        .dark-mode .question {
            background: rgba(33, 150, 243, 0.1);
        }

        .options {
            margin: 1rem 0;
        }

        .option {
            margin: 0.8rem 0;
            padding: 1rem;
            background: var(--white);
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .dark-mode .option {
            background: #1a237e;
            border-color: #37474F;
        }

        .option:hover {
            border-color: var(--primary);
            background: rgba(33, 150, 243, 0.05);
            transform: translateX(-5px);
        }

        .correct {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.1);
        }

        .incorrect {
            border-color: #f44336;
            background: rgba(244, 67, 54, 0.1);
        }

        .answer {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 10px;
            font-weight: 600;
            animation: slideInUp 0.5s ease;
        }

        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* التصحيح - تم التعديل للوضع الليلي */
        .correct-answer {
            background: rgba(76, 175, 80, 0.2);
            color: #2E7D32;
            border: 2px solid #4CAF50;
            font-weight: bold;
        }

        .dark-mode .correct-answer {
            background: rgba(76, 175, 80, 0.3);
            color: #A5D6A7;
            border: 2px solid #81C784;
        }

        /* النصوص والعناوين */
        .text-content {
            line-height: 1.7;
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: var(--white);
            border-radius: 15px;
            border: 1px solid #e0e0e0;
            font-size: 1.1rem;
            transition: var(--transition);
        }

        .dark-mode .text-content {
            background: #1a237e;
            border-color: #37474F;
        }

        .headings-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .heading-item {
            padding: 1.2rem;
            background: var(--white);
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            text-align: center;
            font-weight: 500;
            transition: var(--transition);
        }

        .dark-mode .heading-item {
            background: #1a237e;
            border-color: #37474F;
        }

        .matched {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.1);
            transform: scale(1.02);
        }

        /* الإعلانات والوضعيات */
        .ads-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .ad-item {
            padding: 1.5rem;
            background: var(--white);
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            min-height: 150px;
            transition: var(--transition);
        }

        .dark-mode .ad-item {
            background: #1a237e;
            border-color: #37474F;
        }

        .ad-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }

        .situations-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.2rem;
        }

        .situation-item {
            padding: 1.2rem;
            background: var(--white);
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            transition: var(--transition);
        }

        .dark-mode .situation-item {
            background: #1a237e;
            border-color: #37474F;
        }

        .situation-item:hover {
            border-color: var(--primary);
            background: rgba(33, 150, 243, 0.05);
        }

        /* Sprachbausteine */
        .fill-blanks {
            margin: 1.5rem 0;
        }

        .blank-text {
            line-height: 2;
            margin: 1.5rem 0;
            font-size: 1.2rem;
            padding: 1.5rem;
            background: var(--white);
            border-radius: 15px;
            border: 1px solid #e0e0e0;
        }

        .dark-mode .blank-text {
            background: #1a237e;
            border-color: #37474F;
        }

        .blank {
            display: inline-block;
            min-width: 120px;
            margin: 0 8px;
            padding: 0.5rem 1rem;
            border-bottom: 3px solid var(--primary);
            text-align: center;
            font-weight: 600;
            background: var(--white);
            border-radius: 8px;
            transition: var(--transition);
        }

        .dark-mode .blank {
            background: #1a237e;
        }

        .blank-answer {
            background: rgba(76, 175, 80, 0.2);
            color: #2E7D32;
            border-color: #4CAF50;
            font-weight: bold;
        }

        .dark-mode .blank-answer {
            background: rgba(76, 175, 80, 0.3);
            color: #A5D6A7;
            border-color: #81C784;
        }

        .hidden {
            display: none;
        }

        /* Floating Elements مثل الصفحة الرئيسية */
        .floating-elements {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .floating-element {
            position: absolute;
            font-size: 3.5rem;
            opacity: 0.15;
            animation: float 8s ease-in-out infinite;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
        }

        .floating-book { top: 15%; left: 8%; animation-delay: 0s; }
        .floating-pen { top: 75%; right: 12%; animation-delay: 1s; }
        .floating-globe { bottom: 20%; left: 15%; font-size: 4.5rem; animation-delay: 2s; }
        .floating-clock { top: 25%; right: 8%; animation-delay: 3s; }
        .floating-graduate { top: 65%; left: 5%; animation-delay: 4s; }
        .floating-notebook { bottom: 15%; right: 10%; animation-delay: 5s; }
        .floating-pencil { top: 45%; left: 12%; font-size: 2.8rem; animation-delay: 6s; }
        .floating-calculator { top: 35%; right: 15%; animation-delay: 7s; }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg) scale(1); }
            33% { transform: translateY(-30px) rotate(5deg) scale(1.1); }
            66% { transform: translateY(-15px) rotate(-3deg) scale(0.95); }
        }

        @media (max-width: 768px) {
            .header-controls {
                top: 15px;
                left: 15px;
                right: 15px;
                gap: 10px;
            }

            .premium-badge-header {
                top: 15px;
                right: 70px;
                width: 45px;
                height: 45px;
                font-size: 1.1rem;
            }

            .home-btn {
                font-size: 0.8rem;
                padding: 0.4rem 0.8rem;
            }

            .container {
                padding: 2rem;
                margin: 1rem;
                margin-top: 5rem;
            }

            .header h1 {
                font-size: 2rem;
            }

            .headings-grid {
                grid-template-columns: 1fr;
            }

            .ads-grid {
                grid-template-columns: 1fr;
            }

            .right-controls {
                gap: 10px;
            }

            .answer-controls {
                top: 70px;
            }
        }

        @media (max-width: 480px) {
            .header-controls {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }

            .left-controls, .right-controls {
                flex-direction: row;
                justify-content: center;
            }

            .premium-badge-header {
                position: relative;
                top: auto;
                right: auto;
                transform: none;
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Floating Elements مثل الصفحة الرئيسية -->
    <div class="floating-elements">
        <div class="floating-element floating-book">📚</div>
        <div class="floating-element floating-pen">✏️</div>
        <div class="floating-element floating-globe">🌍</div>
        <div class="floating-element floating-clock">⏰</div>
        <div class="floating-element floating-graduate">🎓</div>
        <div class="floating-element floating-notebook">📓</div>
        <div class="floating-element floating-pencil">✏️</div>
        <div class="floating-element floating-calculator">🧮</div>
    </div>

    <!-- شارة المشترك الذهبية - تم التعديل -->
    <div class="premium-badge-header" id="premiumBadge">
        <i class="fas fa-crown"></i>
    </div>

    <!-- Header Controls -->
    <div class="header-controls">
        <div class="left-controls">
            <button class="home-btn" id="homeBtn">
                <i class="fas fa-home"></i>
                <span id="homeText">الرئيسية</span>
            </button>
            <div class="language-selector">
                <button class="lang-btn" id="langBtn">
                    <span id="langBtnText">العربية</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="lang-dropdown" id="langDropdown">
                    <div class="lang-option" data-lang="ar">
                        <span>🇸🇦</span>
                        <span>العربية</span>
                    </div>
                    <div class="lang-option" data-lang="de">
                        <span>🇩🇪</span>
                        <span>Deutsch</span>
                    </div>
                    <div class="lang-option" data-lang="en">
                        <span>🇬🇧</span>
                        <span>English</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="right-controls">
            <!-- زر الاشتراك تم نقله هنا -->
            <button class="subscribe-btn" id="subscribeBtn">
                <i class="fas fa-star"></i>
                <span id="subscribeText">اشتراك</span>
            </button>
            <button class="control-btn" id="themeToggle">
                <i class="fas fa-moon"></i>
            </button>
            <button class="control-btn" id="userBtn">
                <i class="fas fa-user"></i>
            </button>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1 id="pageTitle">ALPEN - TELC B2 Training</h1>
            <p class="page-subtitle" id="pageSubtitle">تمرين القراءة والفهم - الجزء الأول والثاني والثالث</p>
        </div>

        <!-- أزرار التحكم -->
        <div class="answer-controls">
            <button class="answer-btn show-answers" id="showAnswers">
                <i class="fas fa-check-circle"></i>
                <span id="showAnswersText">إظهار التصحيح</span>
            </button>
            <button class="answer-btn hide-answers" id="hideAnswers">
                <i class="fas fa-eye-slash"></i>
                <span id="hideAnswersText">إخفاء التصحيح</span>
            </button>
        </div>

        <!-- Lesen Teil 1 -->
        <div class="section">
            <h2 class="section-title" id="teil1Title">Lesen Teil 1</h2>
            <p id="teil1Description">Lesen Sie zuerst die zehn Überschriften. Lesen Sie dann die fünf Texte und entscheiden Sie, welche Überschrift (a-j) am besten zu welchem Text (1–5) passt.</p>
            
            <div class="headings-grid" id="headingsList">
                <!-- العناوين سيتم إضافتها بالجافاسكريبت -->
            </div>

            <div id="textsList">
                <!-- النصوص سيتم إضافتها بالجافاسكريبت -->
            </div>
        </div>

        <!-- Lesen Teil 2 -->
        <div class="section">
            <h2 class="section-title" id="teil2Title">Lesen Teil 2</h2>
            <div class="text-content" id="longText">
                <!-- النص الطويل سيتم إضافته بالجافاسكريبت -->
            </div>

            <div id="questionsList">
                <!-- الأسئلة سيتم إضافتها بالجافاسكريبت -->
            </div>
        </div>

        <!-- Lesen Teil 3 -->
        <div class="section">
            <h2 class="section-title" id="teil3Title">Lesen Teil 3</h2>
            <p id="teil3Description">Lesen Sie zuerst die zehn Situationen (11–20) und dann die zwölف Info-Texte (a–l). Welcher Info-Text passt zu welcher Situation?</p>
            
            <div class="situations-grid" id="situationsList">
                <!-- الوضعيات سيتم إضافتها بالجافاسكريبت -->
            </div>

            <div class="ads-grid" id="adsList">
                <!-- الإعلانات سيتم إضافتها بالجافاسكريبت -->
            </div>
        </div>

        <!-- Sprachbausteine Teil 1 -->
        <div class="section">
            <h2 class="section-title" id="sprach1Title">Sprachbausteine Teil 1</h2>
            <div class="fill-blanks">
                <div class="blank-text" id="blankText1">
                    <!-- النص بالفراغات سيتم إضافته بالجافاسكريبت -->
                </div>
            </div>
        </div>

        <!-- Sprachbausteine Teil 2 -->
        <div class="section">
            <h2 class="section-title" id="sprach2Title">Sprachbausteine Teil 2</h2>
            <div class="fill-blanks">
                <div class="blank-text" id="blankText2">
                    <!-- النص بالفراغات سيتم إضافته بالجافاسكريبت -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // الترجمات
        const translations = {
            ar: {
                homeText: "الرئيسية",
                themeText: "الوضع الليلي",
                langText: "العربية", 
                userText: "زائر",
                subscribeText: "اشتراك",
                pageTitle: "ALPEN - TELC B2 Training",
                pageSubtitle: "تمرين القراءة والفهم - الجزء الأول والثاني والثالث",
                showAnswersText: "إظهار التصحيح",
                hideAnswersText: "إخفاء التصحيح",
                teil1Title: "Lesen Teil 1",
                teil1Description: "Lesen Sie zuerst die zehn Überschriften. Lesen Sie dann die fünf Texte und entscheiden Sie, welche Überschrift (a-j) am besten zu welchem Text (1–5) passt.",
                teil2Title: "Lesen Teil 2", 
                teil3Title: "Lesen Teil 3",
                teil3Description: "Lesen Sie zuerst die zehn Situationen (11–20) und dann die zwölف Info-Texte (a–l). Welcher Info-Text passt zu welcher Situation?",
                sprach1Title: "Sprachbausteine Teil 1",
                sprach2Title: "Sprachbausteine Teil 2"
            },
            de: {
                homeText: "Startseite",
                themeText: "Nachtmodus", 
                langText: "Deutsch",
                userText: "Besucher",
                subscribeText: "Abonnieren",
                pageTitle: "ALPEN - TELC B2 Training",
                pageSubtitle: "Leseverstehen - Teil 1, 2 und 3",
                showAnswersText: "Korrektur anzeigen",
                hideAnswersText: "Korrektur ausblenden",
                teil1Title: "Lesen Teil 1",
                teil1Description: "Lesen Sie zuerst die zehn Überschriften. Lesen Sie dann die fünf Texte und entscheiden Sie, welche Überschrift (a-j) am besten zu welchem Text (1–5) passt.",
                teil2Title: "Lesen Teil 2",
                teil3Title: "Lesen Teil 3", 
                teil3Description: "Lesen Sie zuerst die zehn Situationen (11–20) und dann die zwölf Info-Texte (a–l). Welcher Info-Text passt zu welcher Situation?",
                sprach1Title: "Sprachbausteine Teil 1",
                sprach2Title: "Sprachbausteine Teil 2"
            },
            en: {
                homeText: "Home",
                themeText: "Dark Mode",
                langText: "English",
                userText: "Visitor", 
                subscribeText: "Subscribe",
                pageTitle: "ALPEN - TELC B2 Training",
                pageSubtitle: "Reading Comprehension - Part 1, 2 and 3",
                showAnswersText: "Show Correction",
                hideAnswersText: "Hide Correction",
                teil1Title: "Reading Part 1",
                teil1Description: "First read the ten headings. Then read the five texts and decide which heading (a-j) best matches which text (1-5).",
                teil2Title: "Reading Part 2",
                teil3Title: "Reading Part 3",
                teil3Description: "First read the ten situations (11-20) and then the twelve info texts (a-l). Which info text matches which situation?",
                sprach1Title: "Language Elements Part 1", 
                sprach2Title: "Language Elements Part 2"
            }
        };

        // بيانات الأسئلة والإجابات من ملف PDF
        const examData = {
            // Lesen Teil 1
            headings: [
                "Freizeitsport in den Alpen",
                "Mädchen geben mehr Geld für Zigaretten aus als Jungen",
                "Hochgebirge als Skiparadies",
                "Höhenluft - gut fürs Herz",
                "Junge Sportler - hohes Risiko",
                "Kinder rauchen weniger",
                "Neue Trendsportart in den Alpen",
                "Rauchen - ein teures Vergnügen",
                "Schneebrettgefahr in den Alpen",
                "Wandern in den Alpen - ein Erlebnis für die ganze Familie"
            ],
            
            texts: [
                {
                    content: `Die Alpen sind das höchste Gebirge Europas und ziehen sich über acht Länder. Sie sind nicht nur ein beliebtes Reiseziel für Touristen, sondern auch ein wichtiger Lebensraum für viele Tier- und Pflanzenarten. In den letzten Jahren hat sich das Freizeitverhalten in den Alpen stark verändert. Neben dem traditionellen Skifahren und Wandern sind neue Sportarten wie Mountainbiking, Paragliding und Klettern immer beliebter geworden. Diese Entwicklung bringt sowohl Chancen als auch Herausforderungen für die Region mit sich.`,
                    correctAnswer: "Freizeitsport in den Alpen"
                },
                {
                    content: `Eine aktuelle Studie des Gesundheitsministeriums zeigt, dass Mädchen im Alter zwischen 14 und 17 Jahren durchschnittlich 15 Prozent mehr für Zigaretten ausgeben als Jungen derselben Altersgruppe. Die Forscher führen dies darauf zurück, dass Mädchen eher zu teuren Markenzigaretten greifen, während Jungen häufiger günstigere Alternativen wählen. Die Studie untersuchte das Rauchverhalten von über 5.000 Jugendlichen in ganz Deutschland.`,
                    correctAnswer: "Mädchen geben mehr Geld für Zigaretten aus als Jungen"
                },
                {
                    content: `Die Alpen bieten mit ihren hohen Gipfeln und weitläufigen Gletschergebieten ideale Bedingungen für den Skisport. Besonders die Regionen oberhalb von 2.000 Metern gelten als schneesicher und locken jedes Jahr Millionen von Skifahrern aus aller Welt an. Moderne Liftanlagen und gut präparierte Pisten machen das Skifahren in den Alpen zu einem unvergesslichen Erlebnis. Allerdings warnen Experten vor den Folgen des Klimawandels für den Wintersport.`,
                    correctAnswer: "Hochgebirge als Skiparadies"
                },
                {
                    content: `Medizinische Studien belegen, dass ein Aufenthalt in höheren Lagen positive Auswirkungen auf das Herz-Kreislauf-System haben kann. Die dünnere Luft in den Bergen zwingt den Körper, effizienter mit Sauerstoff umzugehen, was langfristig die Ausdauer verbessert und das Herz stärkt. Ärzte empfehlen daher insbesondere Patienten mit leichten Herzproblemen, Urlaub in mittleren Höhenlagen zwischen 1.500 und 2.500 Metern zu verbringen.`,
                    correctAnswer: "Höhenluft - gut fürs Herz"
                },
                {
                    content: `Sportmediziner warnen vor den besonderen Risiken für junge Leistungssportler in den Alpen. Durch das intensive Training in großen Höhen können bei Heranwachsenden langfristige Gesundheitsschäden entstehen. Besonders betroffen sind Skirennläufer und Bergsteiger unter 18 Jahren, deren Körper sich noch in der Entwicklung befindet. Experten fordern deshalb strengere Altersgrenzen und bessere medizinische Betreuung für junge Athleten im Hochleistungssport.`,
                    correctAnswer: "Junge Sportler - hohes Risiko"
                }
            ],

            // Lesen Teil 2 - النص الكامل
            longText: {
                content: `Die Alpen - ein bedrohtes Paradies

Die Alpen erstrecken sich über eine Länge von etwa 1.200 Kilometern und bedecken eine Fläche von rund 200.000 Quadratkilometern. Sie sind nicht nur ein beliebtes Tourismusziel, sondern auch ein einzigartiger Lebensraum mit einer reichen Artenvielfalt. Allerdings steht dieses sensible Ökosystem vor großen Herausforderungen.

Der Tourismus ist für viele Alpenregionen die wichtigste Einnahmequelle. Jährlich besuchen etwa 100 Millionen Touristen die Alpen, die meisten davon im Winter. Die wirtschaftliche Abhängigkeit vom Tourismus bringt jedoch Probleme mit sich. In den letzten Jahren machen sich die Auswirkungen des Klimawandels immer stärker bemerkbar. Die Durchschnittstemperatur in den Alpen ist seit Beginn des 20. Jahrhunderts um etwa zwei Grad Celsius gestiegen - doppelt so viel wie im globalen Durchschnitt.

Die Gletscher schmelzen in alarmierendem Tempo. Seit 1850 haben die Alpengletscher etwa zwei Drittel ihrer Fläche verloren. Wissenschaftler prognostizieren, dass bis zum Ende des 21. Jahrhunderts fast alle Gletscher in den Alpen verschwunden sein werden, wenn die derzeitige Entwicklung anhält. Dies hat nicht nur Auswirkungen auf das Landschaftsbild, sondern auch auf die Wasserversorgung großer Flüsse wie Rhein, Rhone und Po, die in den Alpen entspringen.

Auch die Permafrostböden, die bisher ganze Berghänge stabilisiert haben, tauen auf. Dies führt zu einer Zunahme von Felsstürzen und Murenabgängen, die Siedlungen und Verkehrswege gefährden. Im Sommer 2017 musste beispielsweise die berühmte Matterhorn-Grat-Route wegen erhöhter Steinschlaggefahr zeitweise gesperrt werden.

Der Wintersport steht vor großen Veränderungen. Viele Skigebiete in niedrigeren Lagen kämpfen mit Schneemangel. Künstliche Beschneiung ist teuer und umstritten, da sie viel Energie und Wasser verbraucht. Einige Gemeinden überlegen bereits, sich vom Skitourismus zu verabschieden und auf alternative Angebote wie Wellness oder Kulturtourismus zu setzen.

Trotz aller Probleme gibt es auch positive Entwicklungen. Immer mehr Menschen erkennen die Einmaligkeit der Alpen und setzen sich für ihren Schutz ein. Nationalparks und Naturschutzgebiete wurden erweitert, nachhaltige Tourismuskonzepte entwickelt. Die Alpenkonvention, ein internationales Abkommen zum Schutz der Alpen, wurde von allen acht Alpenstaaten unterzeichnet.

Die Zukunft der Alpen hängt davon ab, wie es gelingt, wirtschaftliche Interessen mit ökologischer Verantwortung in Einklang zu bringen. Nur durch gemeinsame Anstrengungen aller beteiligten Länder kann dieses einzigartige Gebirge auch für kommende Generationen erhalten bleiben.`,
                questions: [
                    {
                        question: "Wie viele Touristen besuchen jährlich die Alpen?",
                        options: [
                            "Etwa 50 Millionen",
                            "Etwa 100 Millionen", 
                            "Etwa 200 Millionen"
                        ],
                        correctAnswer: "Etwa 100 Millionen"
                    },
                    {
                        question: "Wie stark ist die Durchschnittstemperatur in den Alpen seit 1900 gestiegen?",
                        options: [
                            "Um etwa 1 Grad Celsius",
                            "Um etwa 2 Grad Celsius",
                            "Um etwa 3 Grad Celsius"
                        ],
                        correctAnswer: "Um etwa 2 Grad Celsius"
                    },
                    {
                        question: "Welchen Anteil ihrer Fläche haben die Alpengletscher seit 1850 verloren?", 
                        options: [
                            "Etwa ein Drittel",
                            "Etwa die Hälfte",
                            "Etwa zwei Drittel"
                        ],
                        correctAnswer: "Etwa zwei Drittel"
                    },
                    {
                        question: "Warum wurde die Matterhorn-Grat-Route 2017 zeitweise gesperrt?",
                        options: [
                            "Wegen Lawinengefahr",
                            "Wegen Steinschlaggefahr",
                            "Wegen starken Windes"
                        ],
                        correctAnswer: "Wegen Steinschlaggefahr"
                    },
                    {
                        question: "Was ist die Alpenkonvention?",
                        options: [
                            "Ein Skiwettbewerb",
                            "Ein internationales Schutzabkommen",
                            "Eine Tourismusorganisation"
                        ],
                        correctAnswer: "Ein internationales Schutzabkommen"
                    }
                ]
            },

            // Lesen Teil 3
            situations: [
                "Sie planen einen Familienurlaub in den Alpen und suchen nach kinderfreundlichen Aktivitäten.",
                "Sie interessieren sich für die gesundheitlichen Vorteile eines Aufenthalts in den Bergen.",
                "Sie möchten wissen, wie sich das Rauchverhalten von Jugendlichen entwickelt hat.",
                "Sie überlegen, ob Sie mit dem Rauchen aufhören sollen und suchen nach Motivation.",
                "Sie sind begeisterter Skifahrer und suchen nach den besten Pisten.",
                "Sie machen sich Sorgen um die Sicherheit beim Bergsport.", 
                "Sie suchen nach einer neuen Sportart, die Sie in den Alpen ausprobieren können.",
                "Sie wollen mehr über die Bedrohungen für die Alpen erfahren.",
                "Sie interessieren sich für die wirtschaftliche Bedeutung des Tourismus in den Alpen.",
                "Sie möchten wissen, welche Auswirkungen der Klimawandel auf die Alpen hat."
            ],

            ads: [
                {
                    id: "a",
                    title: "Familienwanderungen in den Bayerischen Alpen",
                    content: "Entdecken Sie mit Ihrer Familie die Schönheit der Bayerischen Alpen! Unsere speziell für Familien konzipierten Wanderungen führen Sie zu den schönsten Aussichtspunkten und Badeseen. Kinder ab 6 Jahren können an unseren Naturerkundungstouren teilnehmen, bei denen sie spielerisch die Tier- und Pflanzenwelt der Alpen kennenlernen. Alle Wanderungen werden von erfahrenen Bergführern begleitet. Familienermäßigung verfügbar. Buchung unter www.alpen-familientouren.de"
                },
                {
                    id: "b", 
                    title: "Höhentraining für Ihre Gesundheit",
                    content: "Medizinisch betreutes Höhentraining in den Ötztaler Alpen. Unser Programm wurde von Sportmedizinern entwickelt und verbessert nachweislich die Herz-Kreislauf-Funktion. Unter ärztlicher Aufsicht lernen Sie, wie Sie die Höhenluft optimal für Ihre Gesundheit nutzen können. Das Programm umfasst auch Ernährungsberatung und Entspannungstechniken. Ideal für Menschen mit leichten Herzproblemen oder zur allgemeinen Gesundheitsvorsorge. Informationen: 08321/456789"
                },
                {
                    id: "c",
                    title: "Studie: Rauchverhalten bei Jugendlichen", 
                    content: "Das Bundesgesundheitsministerium veröffentlichte gestern die Ergebnisse einer großangelegten Studie zum Rauchverhalten bei Jugendlichen. Die Untersuchung zeigt einen Rückgang des Rauchens in der Altersgruppe 12-17 Jahre um 15% im Vergleich zum Vorjahr. Allerdings geben Mädchen durchschnittlich mehr Geld für Zigaretten aus als Jungen. Die vollständige Studie kann unter www.bundesgesundheitsministerium.de/studien heruntergeladen werden."
                },
                {
                    id: "d",
                    title: "Rauchen aufhören - Ihr Weg in ein gesünderes Leben",
                    content: "Mit dem Rauchen aufzuhören lohnt sich immer! Bereits nach 24 Stunden sinkt das Herzinfarktrisiko. Nach einem Jahr hat sich das Risiko für koronare Herzkrankheiten halbiert. Unsere Raucherentwöhnungsprogramme in den Alpen kombinieren Nikotinersatztherapie mit Bewegung an der frischen Luft und psychologischer Betreuung. Erfolgsquote: 65% nach einem Jahr. Kostenlose Beratung unter 0800/RAUCHEN"
                },
                {
                    id: "e",
                    title: "Top-Skigebiete in den Alpen",
                    content: "Entdecken Sie die besten Skigebiete der Alpen! Von den französischen Trois Vallées über das österreichische Arlberggebiet bis zu den italienischen Dolomiten - wir bieten Skiurlaube in allen großen Skiregionen. Unsere Experten beraten Sie gerne bei der Auswahl des passenden Gebiets für Ihr Können und Ihre Vorlieben. Frühbucherrabatte bis zu 25%. Katalog anfordern unter www.top-skigebiete-alpen.de"
                },
                {
                    id: "f",
                    title: "Sicherheit beim Bergsport",
                    content: "Bergsport ist ein wunderbares Erlebnis, birgt aber auch Risiken. In unserem Sicherheitskurs lernen Sie, wie Sie Gefahren richtig einschätzen und vermeiden können. Themen: Lawinenkunde, Wetterbeobachtung, richtige Ausrüstung und Erste Hilfe im Gebirge. Der Kurs wird von erfahrenen Bergrettern geleitet und umfasst sowohl Theorie als auch Praxis. Nächster Termin: 15. November. Anmeldung unter www.bergsport-sicherheit.ch"
                },
                {
                    id: "g",
                    title: "Neue Trends: Paragliding in den Alpen",
                    content: "Erleben Sie die Alpen aus einer völlig neuen Perspektive! Paragliding wird immer beliebter und bietet ein unvergessliches Naturerlebnis. Unsere Tandemflüge mit erfahrenen Piloten sind auch für Anfänger geeignet. Startplätze in verschiedenen Höhenlagen, von 800 bis 2.200 Metern. Videoaufnahme Ihres Flugs inklusive. Buchung und Informationen: www.alpen-paragliding.com"
                },
                {
                    id: "h", 
                    title: "Bedrohte Alpen - Eine Dokumentation",
                    content: "Die neue ARD-Dokumentation 'Bedrohte Alpen' zeigt die dramatischen Auswirkungen von Klimawandel und Massentourismus auf das sensible Ökosystem der Alpen. Zu sehen sind einzigartige Aufnahmen schmelzender Gletscher, interviews mit betroffenen Bergbauern und Wissenschaftlern sowie Lösungsansätze für einen nachhaltigen Tourismus. Ausstrahlung: Sonntag, 20.15 Uhr, ARD. Wiederholung in der Mediathek verfügbar."
                },
                {
                    id: "i",
                    title: "Wirtschaftsfaktor Tourismus in den Alpen",
                    content: "Eine Studie der Universität Innsbruck untersucht die wirtschaftliche Bedeutung des Tourismus für die Alpenregionen. Demnach generiert der Tourismus jährlich etwa 50 Milliarden Euro Umsatz und sichert über 500.000 Arbeitsplätze. Allerdings zeigt die Studie auch die Abhängigkeit vieler Gemeinden vom Wintertourismus und die Notwendigkeit der Diversifizierung. Die Studie kann unter www.uibk.ac.at/tourismusstudie bezogen werden."
                },
                {
                    id: "j",
                    title: "Klimawandel in den Alpen - Fakten und Folgen", 
                    content: "Das Umweltbundesamt hat einen umfassenden Bericht zu den Auswirkungen des Klimawandels auf die Alpen veröffentlicht. Der Bericht dokumentiert den Rückgang der Gletscher, die Zunahme von Naturgefahren und die Veränderungen der alpinen Flora und Fauna. Besonders alarmierend: Die Temperaturen in den Alpen steigen doppelt so schnell wie im globalen Durchschnitt. Download unter www.umweltbundesamt.de/alpenbericht"
                },
                {
                    id: "k",
                    title: "Lawinenwarndienst für die Alpen",
                    content: "Aktuelle Lawinenwarnungen für alle Alpenregionen auf einen Blick! Unser Service bietet tagesaktuelle Einschätzungen der Lawinengefahr, Wetterprognosen speziell für Bergregionen und praktische Tipps für Tourenplanung. Die App ist kostenlos erhältlich für iOS und Android. Regionale Warnungen per Push-Nachricht. Jetzt downloaden unter www.lawinen-warndienst.de"
                },
                {
                    id: "l",
                    title: "Nachhaltiger Tourismus in den Alpen",
                    content: "Immer mehr Urlaubsregionen in den Alpen setzen auf nachhaltigen Tourismus. Unser Reiseführer stellt 50 besonders engagierte Gemeinden vor, die Umweltschutz und Tourismus vorbildlich verbinden. Von autofreien Orten über Bio-Hotels bis zu sanften Mobilitätskonzepten. Der Reiseführer ist ab sofort im Buchhandel erhältlich oder kann unter www.nachhaltig-alpen.de bestellt werden."
                }
            ],

            // الإجابات الصحيحة لـ Lesen Teil 3
            teil3Answers: {
                11: "Familienwanderungen in den Bayerischen Alpen",
                12: "Höhentraining für Ihre Gesundheit", 
                13: "Studie: Rauchverhalten bei Jugendlichen",
                14: "Rauchen aufhören - Ihr Weg in ein gesünderes Leben",
                15: "Top-Skigebiete in den Alpen",
                16: "Sicherheit beim Bergsport",
                17: "Neue Trends: Paragliding in den Alpen",
                18: "Bedrohte Alpen - Eine Dokumentation",
                19: "Wirtschaftsfaktor Tourismus in den Alpen", 
                20: "Klimawandel in den Alpen - Fakten und Folgen"
            },

            // Sprachbausteine Teil 1
            blankText1: {
                content: `Lieber Thomas,
vielen Dank für deine E-Mail __(21)__ deiner Reise in die Alpen! Das klingt ja nach einem fantastischen Urlaub.
Ich war noch nie in den Alpen, __(22)__ ich immer davon geträumt habe, einmal dort Ski zu fahren. Leider hatte ich in den letzten Jahren nie die Gelegenheit, __(23)__ ich immer zur gleichen Zeit Prüfungen hatte.
Nächstes Jahr will ich es aber auf jeden Fall schaffen. __(24)__ ich deine Beschreibungen lese, bekomme ich richtig Lust auf einen Winterurlaub. Die Fotos, __(25)__ du mir geschickt hast, sind wunderschön.
Besonders beeindruckt hat mich das Bild vom Matterhorn. __(26)__ ich es sehe, denke ich an meine Kindheit zurück, __(27)__ ich immer Puzzle mit Bergmotiven gemacht habe.
Hast du eigentlich auch andere Sportarten __(28)__ Skifahren ausprobiert? Ich habe gehört, __(29)__ man in den Alpen jetzt auch viele andere Aktivitäten anbietet.
Ich würde mich freuen, __(30)__ du mir noch mehr erzählst. Vielleicht können wir uns ja nächste Woche treffen __(31)__ über deine Reise zu sprechen.

Viele Grüße
Dein Markus`,
                answers: ["über", "obwohl", "weil", "Wenn", "die", "Wenn", "als", "außer", "dass", "wenn", "um"]
            },

            // Sprachbausteine Teil 2
            blankText2: {
                content: `Die Alpen __(31)__ nicht nur ein beliebtes Urlaubsziel, sondern auch ein wichtiger Lebensraum für viele Tier- und Pflanzenarten. Allerdings __(32)__ dieses sensible Ökosystem durch den Klimawandel und den Massentourismus bedroht.
In den letzten Jahren __(33)__ die Temperaturen in den Alpen doppelt so schnell __(34)__ wie im globalen Durchschnitt. Die Gletscher __(35)__ in alarmierendem Tempo. Wissenschaftler __(36)__, dass bis zum Ende des Jahrhunderts fast alle Gletscher verschwunden sein __(37)__.
Auch der Tourismus __(38)__ seine Spuren hinterlassen. Immer mehr Menschen __(39)__ die Alpen, was zu Verkehrsproblemen und Umweltverschmutzung __(40)__.`,
                answers: ["sind", "wird", "sind", "gestiegen", "schmelzen", "prognostizieren", "werden", "hat", "besuchen", "führt"]
            }
        };

        // تهيئة الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
            setupEventListeners();
        });

        let currentLang = 'ar';
        let isDarkMode = false;

        function initializePage() {
            // تحميل الإعدادات المحفوظة
            const savedLang = localStorage.getItem('language') || 'ar';
            const savedDarkMode = localStorage.getItem('darkMode') === 'true';
            const username = localStorage.getItem('username') || 'زائر';
            const access = localStorage.getItem('access');
            
            changeLanguage(savedLang);
            if (savedDarkMode) {
                toggleDarkMode();
            }
            
            // التحقق من حالة المستخدم
            if (access === 'paid' && username) {
                document.getElementById('premiumBadge').style.display = 'flex';
            }
            
            // تهيئة الأجزاء
            initializeTeil1();
            initializeTeil2();  
            initializeTeil3();
            initializeSprachbausteine();
        }

        function initializeTeil1() {
            const headingsList = document.getElementById('headingsList');
            const textsList = document.getElementById('textsList');

            headingsList.innerHTML = '';
            textsList.innerHTML = '';

            // إضافة العناوين
            examData.headings.forEach((heading, index) => {
                const headingItem = document.createElement('div');
                headingItem.className = 'heading-item';
                headingItem.innerHTML = `
                    <strong>${String.fromCharCode(97 + index)})</strong> ${heading}
                `;
                headingItem.dataset.letter = String.fromCharCode(97 + index);
                headingsList.appendChild(headingItem);
            });

            // إضافة النصوص
            examData.texts.forEach((text, index) => {
                const textItem = document.createElement('div');
                textItem.className = 'question';
                textItem.innerHTML = `
                    <h3>Text ${index + 1}</h3>
                    <div class="text-content">${text.content}</div>
                    <div class="answer hidden correct-answer">
                        ${currentLang === 'ar' ? 'الإجابة الصحيحة:' : currentLang === 'de' ? 'Richtige Antwort:' : 'Correct answer:'} ${text.correctAnswer}
                    </div>
                `;
                textsList.appendChild(textItem);
            });
        }

        function initializeTeil2() {
            const longText = document.getElementById('longText');
            const questionsList = document.getElementById('questionsList');

            longText.innerHTML = `<div class="text-content">${examData.longText.content}</div>`;

            questionsList.innerHTML = '';
            examData.longText.questions.forEach((question, index) => {
                const questionItem = document.createElement('div');
                questionItem.className = 'question';
                questionItem.innerHTML = `
                    <h3>Frage ${index + 6}</h3>
                    <p><strong>${question.question}</strong></p>
                    <div class="options">
                        ${question.options.map((option, optIndex) => `
                            <div class="option" data-index="${optIndex}">
                                ${String.fromCharCode(97 + optIndex)}) ${option}
                            </div>
                        `).join('')}
                    </div>
                    <div class="answer hidden correct-answer">
                        ${currentLang === 'ar' ? 'الإجابة الصحيحة:' : currentLang === 'de' ? 'Richtige Antwort:' : 'Correct answer:'} ${question.correctAnswer}
                    </div>
                `;
                questionsList.appendChild(questionItem);
            });
        }

        function initializeTeil3() {
            const situationsList = document.getElementById('situationsList');
            const adsList = document.getElementById('adsList');

            situationsList.innerHTML = '';
            examData.situations.forEach((situation, index) => {
                const situationItem = document.createElement('div');
                situationItem.className = 'situation-item';
                situationItem.innerHTML = `
                    <strong>${index + 11})</strong> ${situation}
                    <div class="answer hidden correct-answer">
                        ${currentLang === 'ar' ? 'الإجابة الصحيحة:' : currentLang === 'de' ? 'Richtige Antwort:' : 'Correct answer:'} ${examData.teil3Answers[index + 11]}
                    </div>
                `;
                situationsList.appendChild(situationItem);
            });

            adsList.innerHTML = '';
            examData.ads.forEach(ad => {
                const adItem = document.createElement('div');
                adItem.className = 'ad-item';
                adItem.innerHTML = `
                    <strong>${ad.id.toUpperCase()}) ${ad.title}</strong>
                    <p>${ad.content}</p>
                `;
                adsList.appendChild(adItem);
            });
        }

        function initializeSprachbausteine() {
            // Teil 1
            const blankText1 = document.getElementById('blankText1');
            const textWithBlanks1 = examData.blankText1.content.replace(/__\(\d+\)__/g, match => {
                const blankNumber = parseInt(match.match(/\d+/)[0]);
                return `<span class="blank">______<span class="blank-answer hidden">${examData.blankText1.answers[blankNumber - 21]}</span></span>`;
            });
            blankText1.innerHTML = textWithBlanks1;

            // Teil 2
            const blankText2 = document.getElementById('blankText2');
            const textWithBlanks2 = examData.blankText2.content.replace(/__\(\d+\)__/g, match => {
                const blankNumber = parseInt(match.match(/\d+/)[0]);
                return `<span class="blank">______<span class="blank-answer hidden">${examData.blankText2.answers[blankNumber - 31]}</span></span>`;
            });
            blankText2.innerHTML = textWithBlanks2;
        }

        function setupEventListeners() {
            // أزرار التحكم
            document.getElementById('showAnswers').addEventListener('click', showAllAnswers);
            document.getElementById('hideAnswers').addEventListener('click', hideAllAnswers);
            
            // زر الرئيسية
            document.getElementById('homeBtn').addEventListener('click', () => {
                window.location.href = 'tahada.html';
            });
            
            // زر الاشتراك
            document.getElementById('subscribeBtn').addEventListener('click', () => {
                window.location.href = 'tahada.html#subscribe';
            });
            
            // زر الوضع الليلي
            document.getElementById('themeToggle').addEventListener('click', toggleDarkMode);
            
            // زر المستخدم
            document.getElementById('userBtn').addEventListener('click', () => {
                window.location.href = 'tahada.html#profile';
            });
            
            // زر اللغة
            document.getElementById('langBtn').addEventListener('click', toggleLangDropdown);
            document.querySelectorAll('.lang-option').forEach(option => {
                option.addEventListener('click', () => {
                    const lang = option.getAttribute('data-lang');
                    changeLanguage(lang);
                    document.getElementById('langDropdown').classList.remove('show');
                });
            });
            
            // إغلاق القوائم المنسدلة بالنقر خارجها
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.language-selector')) {
                    document.getElementById('langDropdown').classList.remove('show');
                }
            });
        }

        function showAllAnswers() {
            document.querySelectorAll('.answer').forEach(answer => {
                answer.classList.remove('hidden');
            });
            document.querySelectorAll('.blank-answer').forEach(answer => {
                answer.classList.remove('hidden');
            });
            document.querySelectorAll('.heading-item').forEach((heading, index) => {
                const letter = heading.dataset.letter;
                examData.texts.forEach(text => {
                    if (text.correctAnswer === examData.headings[letter.charCodeAt(0) - 97]) {
                        heading.classList.add('matched');
                    }
                });
            });
        }

        function hideAllAnswers() {
            document.querySelectorAll('.answer').forEach(answer => {
                answer.classList.add('hidden');
            });
            document.querySelectorAll('.blank-answer').forEach(answer => {
                answer.classList.add('hidden');
            });
            document.querySelectorAll('.heading-item').forEach(heading => {
                heading.classList.remove('matched');
            });
        }

        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark-mode', isDarkMode);
            localStorage.setItem('darkMode', isDarkMode);
            
            const themeIcon = document.querySelector('#themeToggle i');
            if (isDarkMode) {
                themeIcon.className = 'fas fa-sun';
            } else {
                themeIcon.className = 'fas fa-moon';
            }
        }

        function toggleLangDropdown() {
            document.getElementById('langDropdown').classList.toggle('show');
        }

        function changeLanguage(lang) {
            currentLang = lang;
            const t = translations[lang];
            
            // تحديث جميع النصوص
            Object.keys(t).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    element.textContent = t[key];
                }
            });
            
            localStorage.setItem('language', lang);
            
            // إعادة تهيئة المحتوى لترجمة الإجابات
            initializeTeil1();
            initializeTeil2();
        }
    </script>
</body>
</html>