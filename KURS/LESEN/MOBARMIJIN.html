<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOBARMIJIN - TELC B2 Training</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2196F3;
            --primary-dark: #1976D2;
            --secondary: #42A5F5;
            --secondary-dark: #1E88E5;
            --success: #4CAF50;
            --danger: #f44336;
            --warning: #FFC107;
            --light: #E3F2FD;
            --dark: #0D47A1;
            --text: #333;
            --text-light: #546E7A;
            --white: #ffffff;
            --shadow: 0 10px 30px rgba(33, 150, 243, 0.2);
            --shadow-hover: 0 20px 40px rgba(33, 150, 243, 0.3);
            --radius: 25px;
            --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, var(--light) 0%, #BBDEFB 100%);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            transition: var(--transition);
        }

        body.dark-mode {
            background: linear-gradient(135deg, var(--dark) 0%, var(--primary-dark) 100%);
            color: var(--light);
        }

        /* Header Controls - التعديل هنا */
        .header-controls {
            position: fixed;
            top: 20px;
            left: 20px;
            right: 20px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            z-index: 1000;
            gap: 15px;
        }

        .left-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: flex-start;
        }

        .right-controls {
            display: flex;
            gap: 15px;
            align-items: flex-start;
        }

        .control-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            cursor: pointer;
            box-shadow: var(--shadow);
            border: none;
            background: var(--primary);
            color: var(--white);
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }

        .control-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .control-btn:hover::before {
            width: 100%;
            height: 100%;
        }

        .control-btn:hover {
            transform: scale(1.15) rotate(5deg);
            box-shadow: 0 8px 25px rgba(33, 150, 243, 0.4);
        }

        /* شارة المشترك الذهبية - تم التعديل */
        .premium-badge-header {
            position: fixed;
            top: 20px;
            left: 90px; /* تغيير الموقع إلى اليسار */
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #000;
            padding: 0.5rem;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.3rem;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3); }
            to { box-shadow: 0 4px 20px rgba(255, 215, 0, 0.6); }
        }

        .home-btn {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid var(--primary);
            border-radius: 50px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-weight: 600;
            color: var(--primary-dark);
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
            font-size: 0.9rem;
            border: none;
            width: auto;
            height: auto;
        }

        .dark-mode .home-btn {
            background: rgba(13, 71, 161, 0.95);
            color: var(--light);
            border: 2px solid var(--secondary);
        }

        .home-btn:hover {
            background: var(--primary);
            color: var(--white);
            transform: translateY(-3px);
        }

        /* Language Selector */
        .language-selector {
            display: flex;
            position: relative;
        }

        .lang-btn {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid var(--primary);
            border-radius: var(--radius);
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-weight: 600;
            color: var(--primary-dark);
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
            border: none;
            width: auto;
            height: auto;
        }

        .dark-mode .lang-btn {
            background: rgba(13, 71, 161, 0.95);
            color: var(--light);
            border: 2px solid var(--secondary);
        }

        .lang-btn:hover {
            background: var(--primary);
            color: var(--white);
            transform: translateY(-3px);
        }

        .lang-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            margin-top: 0.5rem;
            background: var(--white);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            display: none;
            overflow: hidden;
            min-width: 120px;
            animation: dropdownSlide 0.3s ease;
            z-index: 1001;
        }

        .dark-mode .lang-dropdown {
            background: #1a237e;
            color: var(--light);
        }

        @keyframes dropdownSlide {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .lang-dropdown.show {
            display: block;
        }

        .lang-option {
            padding: 0.8rem 1rem;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
            color: var(--text);
        }

        .dark-mode .lang-option {
            color: var(--light);
            border-bottom: 1px solid #37474F;
        }

        .lang-option:hover {
            background: #f5f5f5;
            transform: translateX(5px);
        }

        .dark-mode .lang-option:hover {
            background: #283593;
        }

        .lang-option:last-child {
            border-bottom: none;
        }

        /* المحتوى الرئيسي */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--radius);
            padding: 3rem;
            box-shadow: var(--shadow);
            border: 1px solid rgba(33, 150, 243, 0.2);
            backdrop-filter: blur(15px);
            margin-top: 6rem;
            transition: var(--transition);
        }

        .dark-mode .container {
            background: rgba(13, 71, 161, 0.95);
            border: 1px solid rgba(227, 242, 253, 0.2);
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            animation: contentSlideUp 0.8s ease;
        }

        @keyframes contentSlideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header h1 {
            font-size: 2.8rem;
            color: var(--primary-dark);
            margin-bottom: 1rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .dark-mode .header h1 {
            color: #90CAF9;
        }

        .page-subtitle {
            font-size: 1.2rem;
            color: var(--text-light);
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .dark-mode .page-subtitle {
            color: #B0BEC5;
        }

        /* أزرار التحكم */
        .answer-controls {
            position: sticky;
            top: 80px; /* أعلى قليلاً لتجنب التداخل مع الشارة */
            background: rgba(255, 255, 255, 0.95);
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            z-index: 100;
            display: flex;
            gap: 1rem;
            justify-content: center;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(33, 150, 243, 0.2);
        }

        .dark-mode .answer-controls {
            background: rgba(13, 71, 161, 0.95);
            border: 1px solid rgba(227, 242, 253, 0.2);
        }

        .answer-btn {
            padding: 1rem 2rem;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            position: relative;
            overflow: hidden;
            border: none;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            transition: var(--transition);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .answer-btn::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: right 0.6s;
        }

        .answer-btn:hover::before {
            right: 100%;
        }

        .answer-btn:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }

        .show-answers {
            background: linear-gradient(135deg, var(--success) 0%, #45a049 100%);
            color: var(--white);
        }

        .hide-answers {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--secondary-dark) 100%);
            color: var(--white);
        }

        /* التصميم الخاص بالأسئلة */
        .section {
            margin: 2rem 0;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(33, 150, 243, 0.2);
            backdrop-filter: blur(10px);
            transition: var(--transition);
        }

        .dark-mode .section {
            background: rgba(13, 71, 161, 0.9);
            border: 1px solid rgba(227, 242, 253, 0.2);
        }

        .section-title {
            color: var(--primary-dark);
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.8rem;
            border-bottom: 2px solid var(--primary);
            font-weight: 600;
        }

        .dark-mode .section-title {
            color: #90CAF9;
        }

        .question {
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: rgba(33, 150, 243, 0.05);
            border-radius: 15px;
            border-right: 4px solid var(--primary);
            transition: var(--transition);
        }

        .dark-mode .question {
            background: rgba(33, 150, 243, 0.1);
        }

        .options {
            margin: 1rem 0;
        }

        .option {
            margin: 0.8rem 0;
            padding: 1rem;
            background: var(--white);
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .dark-mode .option {
            background: #1a237e;
            border-color: #37474F;
        }

        .option:hover {
            border-color: var(--primary);
            background: rgba(33, 150, 243, 0.05);
            transform: translateX(-5px);
        }

        .correct {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.1);
        }

        .incorrect {
            border-color: #f44336;
            background: rgba(244, 67, 54, 0.1);
        }

        .answer {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 10px;
            font-weight: 600;
            animation: slideInUp 0.5s ease;
        }

        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* التصحيح - تم التعديل للوضع الليلي */
        .correct-answer {
            background: rgba(76, 175, 80, 0.2);
            color: #2E7D32;
            border: 2px solid #4CAF50;
            font-weight: bold;
        }

        .dark-mode .correct-answer {
            background: rgba(76, 175, 80, 0.3);
            color: #A5D6A7;
            border: 2px solid #81C784;
        }

        /* النصوص والعناوين */
        .text-content {
            line-height: 1.7;
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: var(--white);
            border-radius: 15px;
            border: 1px solid #e0e0e0;
            font-size: 1.1rem;
            transition: var(--transition);
        }

        .dark-mode .text-content {
            background: #1a237e;
            border-color: #37474F;
        }

        .headings-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .heading-item {
            padding: 1.2rem;
            background: var(--white);
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            text-align: center;
            font-weight: 500;
            transition: var(--transition);
        }

        .dark-mode .heading-item {
            background: #1a237e;
            border-color: #37474F;
        }

        .matched {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.1);
            transform: scale(1.02);
        }

        /* الإعلانات والوضعيات */
        .ads-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .ad-item {
            padding: 1.5rem;
            background: var(--white);
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            min-height: 150px;
            transition: var(--transition);
        }

        .dark-mode .ad-item {
            background: #1a237e;
            border-color: #37474F;
        }

        .ad-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }

        .situations-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.2rem;
        }

        .situation-item {
            padding: 1.2rem;
            background: var(--white);
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            transition: var(--transition);
        }

        .dark-mode .situation-item {
            background: #1a237e;
            border-color: #37474F;
        }

        .situation-item:hover {
            border-color: var(--primary);
            background: rgba(33, 150, 243, 0.05);
        }

        /* Sprachbausteine */
        .fill-blanks {
            margin: 1.5rem 0;
        }

        .blank-text {
            line-height: 2;
            margin: 1.5rem 0;
            font-size: 1.2rem;
            padding: 1.5rem;
            background: var(--white);
            border-radius: 15px;
            border: 1px solid #e0e0e0;
        }

        .dark-mode .blank-text {
            background: #1a237e;
            border-color: #37474F;
        }

        .blank {
            display: inline-block;
            min-width: 120px;
            margin: 0 8px;
            padding: 0.5rem 1rem;
            border-bottom: 3px solid var(--primary);
            text-align: center;
            font-weight: 600;
            background: var(--white);
            border-radius: 8px;
            transition: var(--transition);
        }

        .dark-mode .blank {
            background: #1a237e;
        }

        .blank-answer {
            background: rgba(76, 175, 80, 0.2);
            color: #2E7D32;
            border-color: #4CAF50;
            font-weight: bold;
        }

        .dark-mode .blank-answer {
            background: rgba(76, 175, 80, 0.3);
            color: #A5D6A7;
            border-color: #81C784;
        }

        .hidden {
            display: none;
        }

        /* Floating Elements مثل الصفحة الرئيسية */
        .floating-elements {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .floating-element {
            position: absolute;
            font-size: 3.5rem;
            opacity: 0.15;
            animation: float 8s ease-in-out infinite;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
        }

        .floating-book { top: 15%; left: 8%; animation-delay: 0s; }
        .floating-pen { top: 75%; right: 12%; animation-delay: 1s; }
        .floating-globe { bottom: 20%; left: 15%; font-size: 4.5rem; animation-delay: 2s; }
        .floating-clock { top: 25%; right: 8%; animation-delay: 3s; }
        .floating-graduate { top: 65%; left: 5%; animation-delay: 4s; }
        .floating-notebook { bottom: 15%; right: 10%; animation-delay: 5s; }
        .floating-pencil { top: 45%; left: 12%; font-size: 2.8rem; animation-delay: 6s; }
        .floating-calculator { top: 35%; right: 15%; animation-delay: 7s; }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg) scale(1); }
            33% { transform: translateY(-30px) rotate(5deg) scale(1.1); }
            66% { transform: translateY(-15px) rotate(-3deg) scale(0.95); }
        }

        @media (max-width: 768px) {
            .header-controls {
                top: 15px;
                left: 15px;
                right: 15px;
                gap: 10px;
            }

            .premium-badge-header {
                top: 15px;
                left: 70px;
                width: 45px;
                height: 45px;
                font-size: 1.1rem;
            }

            .home-btn {
                font-size: 0.8rem;
                padding: 0.4rem 0.8rem;
            }

            .container {
                padding: 2rem;
                margin: 1rem;
                margin-top: 5rem;
            }

            .header h1 {
                font-size: 2rem;
            }

            .headings-grid {
                grid-template-columns: 1fr;
            }

            .ads-grid {
                grid-template-columns: 1fr;
            }

            .right-controls {
                gap: 10px;
            }

            .answer-controls {
                top: 70px;
            }
        }

        @media (max-width: 480px) {
            .header-controls {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }

            .left-controls, .right-controls {
                flex-direction: row;
                justify-content: center;
            }

            .premium-badge-header {
                position: relative;
                top: auto;
                left: auto;
                transform: none;
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Floating Elements مثل الصفحة الرئيسية -->
    <div class="floating-elements">
        <div class="floating-element floating-book">📚</div>
        <div class="floating-element floating-pen">✏️</div>
        <div class="floating-element floating-globe">🌍</div>
        <div class="floating-element floating-clock">⏰</div>
        <div class="floating-element floating-graduate">🎓</div>
        <div class="floating-element floating-notebook">📓</div>
        <div class="floating-element floating-pencil">✏️</div>
        <div class="floating-element floating-calculator">🧮</div>
    </div>

    <!-- شارة المشترك الذهبية - تم التعديل -->
    <div class="premium-badge-header" id="premiumBadge">
        <i class="fas fa-crown"></i>
    </div>

    <!-- Header Controls -->
    <div class="header-controls">
        <div class="left-controls">
            <button class="home-btn" id="homeBtn">
                <i class="fas fa-home"></i>
                <span id="homeText">الرئيسية</span>
            </button>
            <div class="language-selector">
                <button class="lang-btn" id="langBtn">
                    <span id="langBtnText">العربية</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="lang-dropdown" id="langDropdown">
                    <div class="lang-option" data-lang="ar">
                        <span>🇸🇦</span>
                        <span>العربية</span>
                    </div>
                    <div class="lang-option" data-lang="de">
                        <span>🇩🇪</span>
                        <span>Deutsch</span>
                    </div>
                    <div class="lang-option" data-lang="en">
                        <span>🇬🇧</span>
                        <span>English</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="right-controls">
            <button class="control-btn" id="themeToggle">
                <i class="fas fa-moon"></i>
            </button>
            <button class="control-btn" id="userBtn">
                <i class="fas fa-user"></i>
            </button>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1 id="pageTitle">MOBARMIJIN - TELC B2 Training</h1>
            <p class="page-subtitle" id="pageSubtitle">تمرين القراءة والفهم - الجزء الأول والثاني والثالث</p>
        </div>

        <!-- أزرار التحكم -->
        <div class="answer-controls">
            <button class="answer-btn show-answers" id="showAnswers">
                <i class="fas fa-check-circle"></i>
                <span id="showAnswersText">إظهار التصحيح</span>
            </button>
            <button class="answer-btn hide-answers" id="hideAnswers">
                <i class="fas fa-eye-slash"></i>
                <span id="hideAnswersText">إخفاء التصحيح</span>
            </button>
        </div>

        <!-- Lesen Teil 1 -->
        <div class="section">
            <h2 class="section-title" id="teil1Title">Lesen Teil 1</h2>
            <p id="teil1Description">Lesen Sie zuerst die zehn Überschriften. Lesen Sie dann die fünf Texte und entscheiden Sie, welche Überschrift (a-j) am besten zu welchem Text (1–5) passt.</p>
            
            <div class="headings-grid" id="headingsList">
                <!-- العناوين سيتم إضافتها بالجافاسكريبت -->
            </div>

            <div id="textsList">
                <!-- النصوص سيتم إضافتها بالجافاسكريبت -->
            </div>
        </div>

        <!-- Lesen Teil 2 -->
        <div class="section">
            <h2 class="section-title" id="teil2Title">Lesen Teil 2</h2>
            <div class="text-content" id="longText">
                <!-- النص الطويل سيتم إضافته بالجافاسكريبت -->
            </div>

            <div id="questionsList">
                <!-- الأسئلة سيتم إضافتها بالجافاسكريبت -->
            </div>
        </div>

        <!-- Lesen Teil 3 -->
        <div class="section">
            <h2 class="section-title" id="teil3Title">Lesen Teil 3</h2>
            <p id="teil3Description">Lesen Sie zuerst die zehn Situationen (11–20) und dann die zwölف Info-Texte (a–l). Welcher Info-Text passt zu welcher Situation?</p>
            
            <div class="situations-grid" id="situationsList">
                <!-- الوضعيات سيتم إضافتها بالجافاسكريبت -->
            </div>

            <div class="ads-grid" id="adsList">
                <!-- الإعلانات سيتم إضافتها بالجافاسكريبت -->
            </div>
        </div>

        <!-- Sprachbausteine Teil 1 -->
        <div class="section">
            <h2 class="section-title" id="sprach1Title">Sprachbausteine Teil 1</h2>
            <div class="fill-blanks">
                <div class="blank-text" id="blankText1">
                    <!-- النص بالفراغات سيتم إضافته بالجافاسكريبت -->
                </div>
            </div>
        </div>

        <!-- Sprachbausteine Teil 2 -->
        <div class="section">
            <h2 class="section-title" id="sprach2Title">Sprachbausteine Teil 2</h2>
            <div class="fill-blanks">
                <div class="blank-text" id="blankText2">
                    <!-- النص بالفراغات سيتم إضافته بالجافاسكريبت -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // الترجمات
        const translations = {
            ar: {
                homeText: "الرئيسية",
                themeText: "الوضع الليلي",
                langText: "العربية", 
                userText: "زائر",
                pageTitle: "MOBARMIJIN - TELC B2 Training",
                pageSubtitle: "تمرين القراءة والفهم - الجزء الأول والثاني والثالث",
                showAnswersText: "إظهار التصحيح",
                hideAnswersText: "إخفاء التصحيح",
                teil1Title: "Lesen Teil 1",
                teil1Description: "Lesen Sie zuerst die zehn Überschriften. Lesen Sie dann die fünf Texte und entscheiden Sie, welche Überschrift (a-j) am besten zu welchem Text (1–5) passt.",
                teil2Title: "Lesen Teil 2", 
                teil3Title: "Lesen Teil 3",
                teil3Description: "Lesen Sie zuerst die zehn Situationen (11–20) und dann die zwölف Info-Texte (a–l). Welcher Info-Text passt zu welcher Situation?",
                sprach1Title: "Sprachbausteine Teil 1",
                sprach2Title: "Sprachbausteine Teil 2"
            },
            de: {
                homeText: "Startseite",
                themeText: "Nachtmodus", 
                langText: "Deutsch",
                userText: "Besucher",
                pageTitle: "MOBARMIJIN - TELC B2 Training",
                pageSubtitle: "Leseverstehen - Teil 1, 2 und 3",
                showAnswersText: "Korrektur anzeigen",
                hideAnswersText: "Korrektur ausblenden",
                teil1Title: "Lesen Teil 1",
                teil1Description: "Lesen Sie zuerst die zehn Überschriften. Lesen Sie dann die fünf Texte und entscheiden Sie, welche Überschrift (a-j) am besten zu welchem Text (1–5) passt.",
                teil2Title: "Lesen Teil 2",
                teil3Title: "Lesen Teil 3", 
                teil3Description: "Lesen Sie zuerst die zehn Situationen (11–20) und dann die zwölf Info-Texte (a–l). Welcher Info-Text passt zu welcher Situation?",
                sprach1Title: "Sprachbausteine Teil 1",
                sprach2Title: "Sprachbausteine Teil 2"
            },
            en: {
                homeText: "Home",
                themeText: "Dark Mode",
                langText: "English",
                userText: "Visitor", 
                pageTitle: "MOBARMIJIN - TELC B2 Training",
                pageSubtitle: "Reading Comprehension - Part 1, 2 and 3",
                showAnswersText: "Show Correction",
                hideAnswersText: "Hide Correction",
                teil1Title: "Reading Part 1",
                teil1Description: "First read the ten headings. Then read the five texts and decide which heading (a-j) best matches which text (1-5).",
                teil2Title: "Reading Part 2",
                teil3Title: "Reading Part 3",
                teil3Description: "First read the ten situations (11-20) and then the twelve info texts (a-l). Which info text matches which situation?",
                sprach1Title: "Language Elements Part 1", 
                sprach2Title: "Language Elements Part 2"
            }
        };

        // بيانات الأسئلة والإجابات من ملف PDF
        const examData = {
            // Lesen Teil 1
            headings: [
                "Immer mehr Jugendliche werden Programmierer",
                "Automobilindustrie schafft neue Arbeitsplätze", 
                "Diskussion über schulische Berufsorientierung",
                "Förderwochenende für junge Softwareentwickler",
                "Immer mehr Frauen ergreifen technische Berufe",
                "Mehr Bemühungen um weiblichen Nachwuchs gefordert",
                "Spannende Gewinne für wissenschaftliche Nachwuchstalente",
                "Berufswahl: Jugendliche werden stark von ihrem gesellschaftlichen Umfeld geprägt",
                "Studienabsolventen technischer Fächer sehen ihre Zukunft meist in der Automobilindustrie",
                "Verleihung des Jugendhobelpreises in Stockholm"
            ],
            
            texts: [
                {
                    content: `Marina Lux hat ein Hobby, mit dem sie im Kreis ihrer Freundinnen ziemlich allein steht: Sie programmiert in ihrer Freizeit. "Mich hat immer schon interessiert, wie Computerprogramme eigentlich funktionieren", sagt die 17-Jährige. Außerdem habe sie großen Spaß an logischem Denken. Ihr Informatiklehrer erzählte ihr von einem Workshop in Berlin: Bei "Jugend programmiert" traf Marina von letztem Freitag bis Sonntag mit gleichgesinnten Jungen und Mädchen zwischen zwölf und 18 Jahren zusammen, um gemeinsam Programme zu entwickeln. Dabei standen ihnen erfahrene Informatiker zur Seite. In 15 Gruppen entwickelten die jungen Nachwuchsprogrammierer ihre Projekte. Eine Jury verlieh Preise in vier Kategorien. Bewertet wurden die originellste Idee, die sauberste Umsetzung, die beste Präsentation und die größte Relevanz für die Gesellschaft. Marinas Gruppe gewann den Preis für die originellste Idee.`,
                    correctAnswer: "Förderwochenende für junge Softwareentwickler"
                },
                {
                    content: `Die Wahl des Berufs ist für Jugendliche eine der wichtigsten Entscheidungen im Leben. Dabei spielen viele Faktoren eine Rolle. Eine Studie des Bundesinstituts für Berufsbildung (BIBB) hat untersucht, welche Personen und Institutionen die Berufswahl von Jugendlichen beeinflussen. Das Ergebnis: Am wichtigsten sind die Eltern, gefolgt von Freunden und Bekannten. Auch Lehrer haben einen großen Einfluss. Weniger bedeutend sind hingegen Berufsberater der Arbeitsagenturen oder Berufsmessen. Die Studie zeigt auch, dass die Berufswahl stark vom sozialen Umfeld geprägt wird. So entscheiden sich Jugendliche aus Akademikerfamilien häufiger für ein Studium als Jugendliche aus Familien ohne akademischen Hintergrund.`,
                    correctAnswer: "Berufswahl: Jugendliche werden stark von ihrem gesellschaftlichen Umfeld geprägt"
                },
                {
                    content: `In Deutschland gibt es immer mehr Studentinnen in den sogenannten MINT-Fächern. MINT steht für Mathematik, Informatik, Naturwissenschaften und Technik. Im Studienjahr 2021/2022 lag der Frauenanteil in diesen Fächern bei 34,5 Prozent. Das ist ein neuer Rekord. Besonders stark gestiegen ist die Zahl der Studentinnen in der Informatik: Hier hat sich der Frauenanteil in den letzten zehn Jahren mehr als verdoppelt. Auch in den Ingenieurwissenschaften studieren immer mehr Frauen. Allerdings sind Frauen in diesen Fächern immer noch unterrepräsentiert. Die Bundesregierung fördert daher verschiedene Programme, um Mädchen und junge Frauen für MINT-Berufe zu begeistern.`,
                    correctAnswer: "Immer mehr Frauen ergreifen technische Berufe"
                },
                {
                    content: `Die schwedische Königin Silvia hat am Donnerstag in Stockholm den Jugendhobelpreis verliehen. Der mit 50.000 Euro dotierte Preis wird seit 1999 jährlich an junge Menschen vergeben, die sich in besonderer Weise für die Umwelt engagieren. In diesem Jahr ging der Preis an die 16-jährige Finnen Laura Ketonen für ihr Projekt "Saubere Meere". Laura hat eine App entwickelt, mit der Nutzer Müll an Stränden und in Gewässern melden können. Die App zeigt dann Reinigungsaktionen in der Nähe an. Bisher wurde die App bereits über 10.000 Mal heruntergeladen. "Ich bin überwältigt und freue mich sehr über diese Auszeichnung", sagte Laura bei der Preisverleihung. Das Preisgeld will sie nutzen, um ihre App weiterzuentwickeln.`,
                    correctAnswer: "Verleihung des Jugendhobelpreises in Stockholm"
                },
                {
                    content: `Die deutsche Automobilindustrie baut ihre Aktivitäten in der Informationstechnologie aus. Nach Angaben des Verbands der Automobilindustrie (VDA) wollen die Unternehmen in den nächsten fünf Jahren rund 10.000 neue IT-Spezialisten einstellen. Grund ist die zunehmende Digitalisierung der Fahrzeuge. "Moderne Autos sind rollende Computer", sagte VDA-Präsidentin Hildegard Müller. "Wir brauchen daher immer mehr Softwareentwickler, Data Scientists und IT-Sicherheitsexperten." Die Branche bietet attraktive Gehälter und gute Aufstiegschancen. Viele Unternehmen kooperieren mit Universitäten, um frühzeitig Kontakt zu talentierten Nachwuchskräften zu knüpfen.`,
                    correctAnswer: "Automobilindustrie schafft neue Arbeitsplätze"
                }
            ],

            // Lesen Teil 2 - النص الكامل
            longText: {
                content: `Die Digitalisierung verändert die Arbeitswelt grundlegend. Immer mehr Tätigkeiten werden von Computern und Robotern übernommen. Gleichzeitig entstehen neue Berufe, die es vor wenigen Jahren noch nicht gab. Wie bereitet man Jugendliche auf diese sich ständig wandelnde Arbeitswelt vor?

Eine wichtige Rolle spielt die schulische Berufsorientierung. In vielen Bundesländern ist Berufsorientierung fester Bestandteil des Lehrplans. Schüler besuchen Betriebe, absolvieren Praktika und nehmen an Berufsmessen teil. Doch reicht das aus? Experten fordern eine frühere und intensivere Berufsorientierung. "Schon in der Grundschule sollten Kinder verschiedene Berufe kennenlernen", sagt die Bildungsforscherin Professorin Dr. Anja Schmidt. "Je früher sich Jugendliche mit ihrer beruflichen Zukunft beschäftigen, desto besser können sie ihre Stärken und Interessen entwickeln."

Ein Problem ist die mangelnde Aktualität der Berufsinformationen. "Viele Lehrkräfte haben selbst nur begrenzte Kenntnisse über die aktuellen Entwicklungen auf dem Arbeitsmarkt", kritisiert Schmidt. Sie plädiert für eine stärkere Einbindung externer Experten in den Unterricht. Unternehmen sollten enger mit Schulen zusammenarbeiten und praxisnahe Einblicke in die Berufswelt bieten.

Besonders wichtig ist die Berufsorientierung für Mädchen. Noch immer entscheiden sich viele Mädchen für traditionell weibliche Berufe wie Erzieherin oder medizinische Fachangestellte. Dabei gibt es in technischen Berufen gute Karrierechancen. "Wir müssen Mädchen frühzeitig für Technik begeistern und ihnen weibliche Vorbilder in MINT-Berufen zeigen", fordert Schmidt. Erfolgreiche Ingenieurinnen oder Programmiererinnen sollten in Schulen über ihren Berufsalltag berichten.

Auch die Eltern spielen eine cruciale Rolle bei der Berufswahl. Viele Eltern haben jedoch veraltete Vorstellungen von bestimmten Berufen. "Eltern denken oft an die Berufe, die sie aus ihrer Jugend kennen", erklärt Schmidt. Dabei habe sich die Arbeitswelt in den letzten Jahren rasant verändert. Digitale Kompetenzen seien in fast allen Berufen wichtig geworden. Eltern sollten sich daher gemeinsam mit ihren Kindern über neue Berufsfelder informieren.

Ein weiteres Problem ist die soziale Ungleichheit bei der Berufswahl. Jugendliche aus bildungsfernen Familien haben oft weniger Zugang zu Informationen über verschiedene Berufe. "Wir brauchen mehr niedrigschwellige Angebote, die alle Jugendlichen erreichen", sagt Schmidt. Berufsorientierung sollte unabhängig vom sozialen Hintergrund der Eltern stattfinden.

Die Bundesagentur für Arbeit bietet zwar Berufsberatung an, doch viele Jugendliche nutzen diese Angebote nicht. "Die Hemmschwelle, zur Berufsberatung zu gehen, ist für manche Jugendliche zu hoch", meint Schmidt. Sie schlägt vor, die Berufsberatung stärker in den Schulalltag zu integrieren. Berufsberater sollten regelmäßig in die Schulen kommen und nicht nur auf Anfrage tätig werden.

Zukunftsfähige Berufsorientierung muss auch digitale Kompetenzen vermitteln. "Jugendliche sollten nicht nur Nutzer digitaler Technologien sein, sondern auch verstehen, wie diese funktionieren", betont Schmidt. Grundkenntnisse im Programmieren sollten ebenso selbstverständlich werden wie Lesen und Schreiben. Einige Bundesländer haben Programmierunterricht bereits in ihren Lehrplänen verankert.

Trotz aller Herausforderungen sieht Schmidt die Zukunft positiv: "Die heutigen Jugendlichen sind digital natives. Sie wachsen mit Smartphones und Internet auf. Diese Kompetenzen können sie in der Arbeitswelt nutzen." Wichtig sei, dass die Berufsorientierung mit der technologischen Entwicklung Schritt halte.

Abschließend betont Schmidt: "Berufsorientierung ist keine einmalige Veranstaltung, sondern ein kontinuierlicher Prozess. Sie sollte in der Schule beginnen und bis zum Eintritt ins Berufsleben andauern. Nur so können wir Jugendliche optimal auf die Arbeitswelt von morgen vorbereiten."`,
                questions: [
                    {
                        question: "Laut Professorin Schmidt sollte Berufsorientierung",
                        options: [
                            "erst in der weiterführenden Schule beginnen.",
                            "schon in der Grundschule starten.", 
                            "hauptsächlich von den Eltern durchgeführt werden."
                        ],
                        correctAnswer: "schon in der Grundschule starten."
                    },
                    {
                        question: "Ein Problem bei der Berufsorientierung ist",
                        options: [
                            "dass zu viele externe Experten in den Unterricht einbezogen werden.",
                            "die mangelnde Aktualität der Berufsinformationen.",
                            "dass Unternehmen nicht mit Schulen zusammenarbeiten wollen."
                        ],
                        correctAnswer: "die mangelnde Aktualität der Berufsinformationen."
                    },
                    {
                        question: "Für Mädchen ist Berufsorientierung besonders wichtig, weil", 
                        options: [
                            "sie sich oft für traditionell weibliche Berufe entscheiden.",
                            "sie bessere schulische Leistungen haben als Jungen.",
                            "technische Berufe für Mädchen unattraktiv sind."
                        ],
                        correctAnswer: "sie sich oft für traditionell weibliche Berufe entscheiden."
                    },
                    {
                        question: "Eltern haben bei der Berufswahl ihrer Kinder oft",
                        options: [
                            "kein Interesse an der Berufswahl ihrer Kinder.",
                            "veraltete Vorstellungen von Berufen.",
                            "ausreichend Wissen über neue Berufsfelder."
                        ],
                        correctAnswer: "veraltete Vorstellungen von Berufen."
                    },
                    {
                        question: "Die Berufsberatung der Bundesagentur für Arbeit",
                        options: [
                            "wird von allen Jugendlichen intensiv genutzt.",
                            "sollte stärker in den Schulalltag integriert werden.",
                            "kommt bereits regelmäßig in alle Schulen."
                        ],
                        correctAnswer: "sollte stärker in den Schulalltag integriert werden."
                    }
                ]
            },

            // Lesen Teil 3
            situations: [
                "Sie möchten sich über Studienmöglichkeiten im Ausland informieren.",
                "Ein Freund interessiert sich für nachhaltige Landwirtschaft.",
                "Sie suchen ein Praktikum in einem Medienunternehmen.",
                "Sie wollen Ihre Bewerbungsunterlagen optimieren lassen.",
                "Ein Bekannter möchte sich über duale Studiengänge informieren.",
                "Sie interessieren sich für Berufe im Gesundheitswesen.", 
                "Sie möchten an einem Workshop zur Persönlichkeitsentwicklung teilnehmen.",
                "Ein Freund sucht Informationen über Ausbildungsberufe im Handwerk.",
                "Sie wollen wissen, welche Berufe gute Zukunftsaussichten bieten.",
                "Sie möchten Kontakt zu anderen Studierenden in Ihrem Fachbereich knüpfen."
            ],

            ads: [
                {
                    id: "a",
                    title: "Studieren weltweit",
                    content: "Informieren Sie sich über Studienmöglichkeiten im Ausland! Unser Service bietet umfassende Beratung zu Partneruniversitäten, Stipendien und Finanzierungsmöglichkeiten. Wir helfen bei der Bewerbung und unterstützen Sie bei allen formalen Fragen. Ob Semester im Ausland oder komplettes Studium - wir finden die passende Lösung für Sie. Kostenlose Beratungstermine nach Vereinbarung."
                },
                {
                    id: "b", 
                    title: "Grüne Berufe",
                    content: "Nachhaltigkeit und Umweltschutz werden immer wichtiger. In unserer Broschüre 'Grüne Berufe' stellen wir über 50 Ausbildungsberufe und Studiengänge vor, die sich mit Umwelt- und Klimaschutz beschäftigen. Von der ökologischen Landwirtschaft über erneuerbare Energien bis hin zur Umwelttechnik - entdecken Sie zukunftssichere Berufsperspektiven. Die Broschüre steht kostenlos zum Download bereit."
                },
                {
                    id: "c",
                    title: "Mediencampus", 
                    content: "Du interessierst dich für Journalismus, Film oder Social Media? Unser Mediencampus bietet Praktika in verschiedenen Medienunternehmen. Wir vermitteln Studierende und Absolventen an Radio- und Fernsehsender, Verlage und Online-Medien. Bewirb dich jetzt für ein Praktikum und sammle praktische Erfahrungen in der Medienbranche. Dauer: 3-6 Monate, Vergütung nach Vereinbarung."
                },
                {
                    id: "d",
                    title: "Bewerbungscoaching",
                    content: "Perfektionieren Sie Ihre Bewerbungsunterlagen! Unsere erfahrenen Coaches helfen Ihnen bei der Erstellung eines überzeugenden Lebenslaufs und Anschreibens. Wir bieten auch Vorbereitung auf Vorstellungsgespräche und Assessment-Center. Individuelle Termine nach Vereinbarung, auch online möglich. Kosten: 50 Euro pro Stunde, ermäßigte Pakete verfügbar."
                },
                {
                    id: "e",
                    title: "Duales Studium",
                    content: "Theorie und Praxis optimal verbinden - das bietet ein duales Studium. In unserer Datenbank finden Sie über 1.000 duale Studiengänge in verschiedenen Bereichen. Wir informieren über Voraussetzungen, Bewerbungsfristen und Partnerunternehmen. Regelmäßige Infoveranstaltungen und Messen. Kostenloser Newsletter mit aktuellen Angeboten."
                },
                {
                    id: "f",
                    title: "Gesundheitsberufe im Fokus",
                    content: "Von der Pflegefachkraft über den Medizintechniker bis hin zum Gesundheitsmanager - die Welt der Gesundheitsberufe ist vielfältig. Unser Karriereguide stellt über 100 Berufe im Gesundheitswesen vor. Mit Informationen zu Ausbildungswegen, Gehaltsaussichten und Zukunftsperspektiven. Jetzt bestellen oder digital herunterladen."
                },
                {
                    id: "g",
                    title: "Persönlichkeitstraining",
                    content: "Stärken Sie Ihre Soft Skills! In unseren Workshops lernen Sie, selbstbewusst aufzutreten, Teamfähigkeit zu entwickeln und Konflikte zu lösen. Unsere Trainer arbeiten mit modernen Methoden wie Rollenspielen und Videoanalysen. Nächster Workshop: 'Kommunikation und Rhetorik' am 15. November. Anmeldung bis 10. November."
                },
                {
                    id: "h", 
                    title: "Handwerk hat Zukunft",
                    content: "Über 130 Ausbildungsberufe im Handwerk warten auf dich! Von A wie Anlagenmechaniker bis Z wie Zweiradmechatroniker. Unser Service bietet kostenlose Berufsberatung, Hilfe bei der Suche nach Ausbildungsplätzen und Informationen zu Aufstiegsmöglichkeiten. Regelmäßige Schnuppertage in Handwerksbetrieben. Jetzt informieren!"
                },
                {
                    id: "i",
                    title: "Zukunftsberufe 2030",
                    content: "Welche Berufe werden in Zukunft gefragt sein? Unsere Studie analysiert Megatrends und ihre Auswirkungen auf den Arbeitsmarkt. Wir stellen 20 Zukunftsberufe vor, von Data Scientists bis zu Nachhaltigkeitsmanagern. Mit Informationen zu benötigten Qualifikationen und Einstiegsmöglichkeiten. Studie kostenlos als PDF erhältlich."
                },
                {
                    id: "j",
                    title: "Fachschaftsnetzwerk", 
                    content: "Tausche dich mit anderen Studierenden aus! Unser Netzwerk verbindet Fachschaften verschiedener Hochschulen. Regelmäßige Treffen, Workshops und gemeinsame Projekte. Perfekt zum Erfahrungsaustausch, Lerngruppen bilden und Kontakte knüpfen. Kostenlose Mitgliedschaft für alle immatrikulierten Studierenden. Jetzt anmelden!"
                },
                {
                    id: "k",
                    title: "Karriereguide Digitalisierung",
                    content: "Die Digitalisierung verändert alle Berufsfelder. Unser Karriereguide zeigt, welche digitalen Kompetenzen in verschiedenen Branchen gefragt sind. Mit Praxistipps zur Weiterbildung und Porträts von Berufseinsteigern in digitalen Jobs. Kostenloser Download oder Printversion für 5 Euro."
                },
                {
                    id: "l",
                    title: "Studienfinanzierung",
                    content: "Wie finanziere ich mein Studium? Unser Ratgeber bietet einen Überblick über alle Finanzierungsmöglichkeiten: BAföG, Stipendien, Studienkredite und Nebenjobs. Mit Tipps zur Antragstellung und Erfahrungsberichten von Studierenden. Kostenlose Beratungstermine jeden Donnerstag von 14-18 Uhr."
                }
            ],

            // الإجابات الصحيحة لـ Lesen Teil 3
            teil3Answers: {
                11: "Studieren weltweit",
                12: "Grüne Berufe", 
                13: "Mediencampus",
                14: "Bewerbungscoaching",
                15: "Duales Studium",
                16: "Gesundheitsberufe im Fokus",
                17: "Persönlichkeitstraining",
                18: "Handwerk hat Zukunft",
                19: "Zukunftsberufe 2030", 
                20: "Fachschaftsnetzwerk"
            },

            // Sprachbausteine Teil 1
            blankText1: {
                content: `Liebe Maria,
vielen Dank für deinen Brief __(21)__ Hamburg! Es freut mich sehr, dass du dich in deiner neuen Stadt schon so gut eingelebt hast.
Ich muss mich bei dir entschuldigen, __(22)__ ich so lange nicht geantwortet habe. Die letzte Zeit war sehr stressig, __(23)__ ich viele Prüfungen hatte. Jetzt sind die Prüfungen endlich vorbei und ich kann dir endlich ausführlich schreiben.
Letzte Woche war ich mit meiner Familie im Urlaub. Wir sind an die Ostsee gefahren, __(24)__ das Wetter dort meistens besser ist als hier. Leider hatten wir nicht so viel Glück mit dem Wetter. Es hat fast die ganze Zeit geregnet, __(25)__ wir trotzdem viel unternommen haben. Wir sind oft spazieren gegangen und haben Museen besucht.
Nächste Woche fange ich mit meinem Praktikum bei einer Zeitung an. Ich bin schon sehr aufgeregt, __(26)__ ich noch nie in einem Verlag gearbeitet habe. Meine Chefin scheint sehr nett zu sein. Sie hat mir gestern eine E-Mail geschrieben und mir alle wichtigen Informationen mitgeteilt. Ich hoffe, __(27)__ alles gut klappt.
Am Wochenende treffe ich mich mit einigen Freunden. Wir wollen zusammen kochen und dann einen Film anschauen. Ich freue mich schon darauf, __(28)__ ich meine Freunde lange nicht gesehen habe.
So, das war's erstmal von mir. Ich würde mich sehr freuen, __(29)__ bald wieder von dir zu hören. Vielleicht können wir uns ja in den Ferien treffen? __(30)__ wärst du damit einverstanden?
Alles Liebe
Deine Anna`,
                answers: ["aus", "dass", "weil", "weil", "aber", "da", "dass", "weil", "wenn", "Wie"]
            },

            // Sprachbausteine Teil 2
            blankText2: {
                content: `Die Digitalisierung __(31)__ die Arbeitswelt in den letzten Jahren stark verändert. Viele Berufe, die es früher gab, __(32)__ heute nicht mehr existieren. Gleichzeitig sind neue Berufe entstanden, die vor zehn Jahren noch unbekannt waren.
Um in dieser sich wandelnden Arbeitswelt erfolgreich zu sein, __(33)__ man bestimmte Kompetenzen entwickeln. Dazu gehören nicht nur fachliche Kenntnisse, __(34)__ auch soziale und digitale Fähigkeiten. Lifelong Learning, also das lebenslange Lernen, __(35)__ heute wichtiger denn je.
Viele Unternehmen bieten ihren Mitarbeitern Weiterbildungsmöglichkeiten an. __(36)__ man sich weiterbilden möchte, hat man verschiedene Optionen: Man kann an Seminaren teilnehmen, Online-Kurse belegen __(37)__ ein berufsbegleitendes Studium absolvieren.
Die Wahl der richtigen Weiterbildung __(38)__ von verschiedenen Faktoren ab. Zunächst sollte man sich überlegen, welche Kompetenzen für den eigenen Beruf wichtig sind. __(39)__ man unsicher ist, kann man eine Berufsberatung in Anspruch nehmen.
__(40)__ man sich entschieden hat, sollte man einen konkreten Plan erstellen. Dabei kann es helfen, mit Kollegen oder Vorgesetzten zu sprechen. Wichtig ist, realistische Ziele zu setzen und sich nicht zu übernehmen.`,
                answers: ["hat", "würden", "muss", "sondern", "ist", "Wenn", "oder", "hängt", "Falls", "Bevor"]
            }
        };

        // تهيئة الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
            setupEventListeners();
        });

        let currentLang = 'ar';
        let isDarkMode = false;

        function initializePage() {
            // تحميل الإعدادات المحفوظة
            const savedLang = localStorage.getItem('language') || 'ar';
            const savedDarkMode = localStorage.getItem('darkMode') === 'true';
            const username = localStorage.getItem('username') || 'زائر';
            const access = localStorage.getItem('access');
            
            changeLanguage(savedLang);
            if (savedDarkMode) {
                toggleDarkMode();
            }
            
            // التحقق من حالة المستخدم
            if (access === 'paid' && username) {
                document.getElementById('premiumBadge').style.display = 'flex';
            }
            
            // تهيئة الأجزاء
            initializeTeil1();
            initializeTeil2();  
            initializeTeil3();
            initializeSprachbausteine();
        }

        function initializeTeil1() {
            const headingsList = document.getElementById('headingsList');
            const textsList = document.getElementById('textsList');

            headingsList.innerHTML = '';
            textsList.innerHTML = '';

            // إضافة العناوين
            examData.headings.forEach((heading, index) => {
                const headingItem = document.createElement('div');
                headingItem.className = 'heading-item';
                headingItem.innerHTML = `
                    <strong>${String.fromCharCode(97 + index)})</strong> ${heading}
                `;
                headingItem.dataset.letter = String.fromCharCode(97 + index);
                headingsList.appendChild(headingItem);
            });

            // إضافة النصوص
            examData.texts.forEach((text, index) => {
                const textItem = document.createElement('div');
                textItem.className = 'question';
                textItem.innerHTML = `
                    <h3>Text ${index + 1}</h3>
                    <div class="text-content">${text.content}</div>
                    <div class="answer hidden correct-answer">
                        ${currentLang === 'ar' ? 'الإجابة الصحيحة:' : currentLang === 'de' ? 'Richtige Antwort:' : 'Correct answer:'} ${text.correctAnswer}
                    </div>
                `;
                textsList.appendChild(textItem);
            });
        }

        function initializeTeil2() {
            const longText = document.getElementById('longText');
            const questionsList = document.getElementById('questionsList');

            longText.innerHTML = `<div class="text-content">${examData.longText.content}</div>`;

            questionsList.innerHTML = '';
            examData.longText.questions.forEach((question, index) => {
                const questionItem = document.createElement('div');
                questionItem.className = 'question';
                questionItem.innerHTML = `
                    <h3>Frage ${index + 6}</h3>
                    <p><strong>${question.question}</strong></p>
                    <div class="options">
                        ${question.options.map((option, optIndex) => `
                            <div class="option" data-index="${optIndex}">
                                ${String.fromCharCode(97 + optIndex)}) ${option}
                            </div>
                        `).join('')}
                    </div>
                    <div class="answer hidden correct-answer">
                        ${currentLang === 'ar' ? 'الإجابة الصحيحة:' : currentLang === 'de' ? 'Richtige Antwort:' : 'Correct answer:'} ${question.correctAnswer}
                    </div>
                `;
                questionsList.appendChild(questionItem);
            });
        }

        function initializeTeil3() {
            const situationsList = document.getElementById('situationsList');
            const adsList = document.getElementById('adsList');

            situationsList.innerHTML = '';
            examData.situations.forEach((situation, index) => {
                const situationItem = document.createElement('div');
                situationItem.className = 'situation-item';
                situationItem.innerHTML = `
                    <strong>${index + 11})</strong> ${situation}
                    <div class="answer hidden correct-answer">
                        ${currentLang === 'ar' ? 'الإجابة الصحيحة:' : currentLang === 'de' ? 'Richtige Antwort:' : 'Correct answer:'} ${examData.teil3Answers[index + 11]}
                    </div>
                `;
                situationsList.appendChild(situationItem);
            });

            adsList.innerHTML = '';
            examData.ads.forEach(ad => {
                const adItem = document.createElement('div');
                adItem.className = 'ad-item';
                adItem.innerHTML = `
                    <strong>${ad.id.toUpperCase()}) ${ad.title}</strong>
                    <p>${ad.content}</p>
                `;
                adsList.appendChild(adItem);
            });
        }

        function initializeSprachbausteine() {
            // Teil 1
            const blankText1 = document.getElementById('blankText1');
            const textWithBlanks1 = examData.blankText1.content.replace(/__\(\d+\)__/g, match => {
                const blankNumber = parseInt(match.match(/\d+/)[0]);
                return `<span class="blank">______<span class="blank-answer hidden">${examData.blankText1.answers[blankNumber - 21]}</span></span>`;
            });
            blankText1.innerHTML = textWithBlanks1;

            // Teil 2
            const blankText2 = document.getElementById('blankText2');
            const textWithBlanks2 = examData.blankText2.content.replace(/__\(\d+\)__/g, match => {
                const blankNumber = parseInt(match.match(/\d+/)[0]);
                return `<span class="blank">______<span class="blank-answer hidden">${examData.blankText2.answers[blankNumber - 31]}</span></span>`;
            });
            blankText2.innerHTML = textWithBlanks2;
        }

        function setupEventListeners() {
            // أزرار التحكم
            document.getElementById('showAnswers').addEventListener('click', showAllAnswers);
            document.getElementById('hideAnswers').addEventListener('click', hideAllAnswers);
            
            // زر الرئيسية
            document.getElementById('homeBtn').addEventListener('click', () => {
                window.location.href = 'tahada.html';
            });
            
            // زر الوضع الليلي
            document.getElementById('themeToggle').addEventListener('click', toggleDarkMode);
            
            // زر المستخدم
            document.getElementById('userBtn').addEventListener('click', () => {
                window.location.href = 'tahada.html#profile';
            });
            
            // زر اللغة
            document.getElementById('langBtn').addEventListener('click', toggleLangDropdown);
            document.querySelectorAll('.lang-option').forEach(option => {
                option.addEventListener('click', () => {
                    const lang = option.getAttribute('data-lang');
                    changeLanguage(lang);
                    document.getElementById('langDropdown').classList.remove('show');
                });
            });
            
            // إغلاق القوائم المنسدلة بالنقر خارجها
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.language-selector')) {
                    document.getElementById('langDropdown').classList.remove('show');
                }
            });
        }

        function showAllAnswers() {
            document.querySelectorAll('.answer').forEach(answer => {
                answer.classList.remove('hidden');
            });
            document.querySelectorAll('.blank-answer').forEach(answer => {
                answer.classList.remove('hidden');
            });
            document.querySelectorAll('.heading-item').forEach((heading, index) => {
                const letter = heading.dataset.letter;
                examData.texts.forEach(text => {
                    if (text.correctAnswer === examData.headings[letter.charCodeAt(0) - 97]) {
                        heading.classList.add('matched');
                    }
                });
            });
        }

        function hideAllAnswers() {
            document.querySelectorAll('.answer').forEach(answer => {
                answer.classList.add('hidden');
            });
            document.querySelectorAll('.blank-answer').forEach(answer => {
                answer.classList.add('hidden');
            });
            document.querySelectorAll('.heading-item').forEach(heading => {
                heading.classList.remove('matched');
            });
        }

        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark-mode', isDarkMode);
            localStorage.setItem('darkMode', isDarkMode);
            
            const themeIcon = document.querySelector('#themeToggle i');
            if (isDarkMode) {
                themeIcon.className = 'fas fa-sun';
            } else {
                themeIcon.className = 'fas fa-moon';
            }
        }

        function toggleLangDropdown() {
            document.getElementById('langDropdown').classList.toggle('show');
        }

        function changeLanguage(lang) {
            currentLang = lang;
            const t = translations[lang];
            
            // تحديث جميع النصوص
            Object.keys(t).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    element.textContent = t[key];
                }
            });
            
            localStorage.setItem('language', lang);
            
            // إعادة تهيئة المحتوى لترجمة الإجابات
            initializeTeil1();
            initializeTeil2();
        }
    </script>
</body>
</html>