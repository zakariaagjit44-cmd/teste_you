<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KELLNER - TELC B2 Training</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2196F3;
            --primary-dark: #1976D2;
            --secondary: #42A5F5;
            --secondary-dark: #1E88E5;
            --success: #4CAF50;
            --danger: #f44336;
            --warning: #FFC107;
            --light: #E3F2FD;
            --dark: #0D47A1;
            --text: #333;
            --text-light: #546E7A;
            --white: #ffffff;
            --shadow: 0 10px 30px rgba(33, 150, 243, 0.2);
            --shadow-hover: 0 20px 40px rgba(33, 150, 243, 0.3);
            --radius: 25px;
            --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, var(--light) 0%, #BBDEFB 100%);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            transition: var(--transition);
        }

        body.dark-mode {
            background: linear-gradient(135deg, var(--dark) 0%, var(--primary-dark) 100%);
            color: var(--light);
        }

        /* Header Controls - تم تعديل المواقع */
        .header-controls {
            position: fixed;
            top: 20px;
            left: 20px;
            right: 20px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            z-index: 1000;
            gap: 15px;
        }

        .left-controls {
            display: flex;
            gap: 15px;
            align-items: flex-start;
        }

        .right-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: flex-end;
        }

        .control-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            cursor: pointer;
            box-shadow: var(--shadow);
            border: none;
            background: var(--primary);
            color: var(--white);
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }

        .control-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .control-btn:hover::before {
            width: 100%;
            height: 100%;
        }

        .control-btn:hover {
            transform: scale(1.15) rotate(5deg);
            box-shadow: 0 8px 25px rgba(33, 150, 243, 0.4);
        }

        /* شارة المشترك الذهبية - تم التعديل */
        .premium-badge-header {
            position: fixed;
            top: 20px;
            left: 90px; /* تم التعديل ليكون على اليسار */
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #000;
            padding: 0.5rem;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.3rem;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3); }
            to { box-shadow: 0 4px 20px rgba(255, 215, 0, 0.6); }
        }

        .home-btn {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid var(--primary);
            border-radius: 50px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-weight: 600;
            color: var(--primary-dark);
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
            font-size: 0.9rem;
            border: none;
            width: auto;
            height: auto;
        }

        .dark-mode .home-btn {
            background: rgba(13, 71, 161, 0.95);
            color: var(--light);
            border: 2px solid var(--secondary);
        }

        .home-btn:hover {
            background: var(--primary);
            color: var(--white);
            transform: translateY(-3px);
        }

        /* Language Selector */
        .language-selector {
            display: flex;
            position: relative;
        }

        .lang-btn {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid var(--primary);
            border-radius: var(--radius);
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-weight: 600;
            color: var(--primary-dark);
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
            border: none;
            width: auto;
            height: auto;
        }

        .dark-mode .lang-btn {
            background: rgba(13, 71, 161, 0.95);
            color: var(--light);
            border: 2px solid var(--secondary);
        }

        .lang-btn:hover {
            background: var(--primary);
            color: var(--white);
            transform: translateY(-3px);
        }

        .lang-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            margin-top: 0.5rem;
            background: var(--white);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            display: none;
            overflow: hidden;
            min-width: 120px;
            animation: dropdownSlide 0.3s ease;
            z-index: 1001;
        }

        .dark-mode .lang-dropdown {
            background: #1a237e;
            color: var(--light);
        }

        @keyframes dropdownSlide {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .lang-dropdown.show {
            display: block;
        }

        .lang-option {
            padding: 0.8rem 1rem;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
            color: var(--text);
        }

        .dark-mode .lang-option {
            color: var(--light);
            border-bottom: 1px solid #37474F;
        }

        .lang-option:hover {
            background: #f5f5f5;
            transform: translateX(5px);
        }

        .dark-mode .lang-option:hover {
            background: #283593;
        }

        .lang-option:last-child {
            border-bottom: none;
        }

        /* المحتوى الرئيسي */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--radius);
            padding: 3rem;
            box-shadow: var(--shadow);
            border: 1px solid rgba(33, 150, 243, 0.2);
            backdrop-filter: blur(15px);
            margin-top: 6rem;
            transition: var(--transition);
        }

        .dark-mode .container {
            background: rgba(13, 71, 161, 0.95);
            border: 1px solid rgba(227, 242, 253, 0.2);
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            animation: contentSlideUp 0.8s ease;
        }

        @keyframes contentSlideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header h1 {
            font-size: 2.8rem;
            color: var(--primary-dark);
            margin-bottom: 1rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .dark-mode .header h1 {
            color: #90CAF9;
        }

        .page-subtitle {
            font-size: 1.2rem;
            color: var(--text-light);
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .dark-mode .page-subtitle {
            color: #B0BEC5;
        }

        /* أزرار التحكم */
        .answer-controls {
            position: sticky;
            top: 80px;
            background: rgba(255, 255, 255, 0.95);
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            z-index: 100;
            display: flex;
            gap: 1rem;
            justify-content: center;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(33, 150, 243, 0.2);
        }

        .dark-mode .answer-controls {
            background: rgba(13, 71, 161, 0.95);
            border: 1px solid rgba(227, 242, 253, 0.2);
        }

        .answer-btn {
            padding: 1rem 2rem;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            position: relative;
            overflow: hidden;
            border: none;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            transition: var(--transition);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .answer-btn::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: right 0.6s;
        }

        .answer-btn:hover::before {
            right: 100%;
        }

        .answer-btn:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }

        .show-answers {
            background: linear-gradient(135deg, var(--success) 0%, #45a049 100%);
            color: var(--white);
        }

        .hide-answers {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--secondary-dark) 100%);
            color: var(--white);
        }

        /* التصميم الخاص بالأسئلة */
        .section {
            margin: 2rem 0;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(33, 150, 243, 0.2);
            backdrop-filter: blur(10px);
            transition: var(--transition);
        }

        .dark-mode .section {
            background: rgba(13, 71, 161, 0.9);
            border: 1px solid rgba(227, 242, 253, 0.2);
        }

        .section-title {
            color: var(--primary-dark);
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.8rem;
            border-bottom: 2px solid var(--primary);
            font-weight: 600;
        }

        .dark-mode .section-title {
            color: #90CAF9;
        }

        .question {
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: rgba(33, 150, 243, 0.05);
            border-radius: 15px;
            border-right: 4px solid var(--primary);
            transition: var(--transition);
        }

        .dark-mode .question {
            background: rgba(33, 150, 243, 0.1);
        }

        .options {
            margin: 1rem 0;
        }

        .option {
            margin: 0.8rem 0;
            padding: 1rem;
            background: var(--white);
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .dark-mode .option {
            background: #1a237e;
            border-color: #37474F;
        }

        .option:hover {
            border-color: var(--primary);
            background: rgba(33, 150, 243, 0.05);
            transform: translateX(-5px);
        }

        .correct {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.1);
        }

        .incorrect {
            border-color: #f44336;
            background: rgba(244, 67, 54, 0.1);
        }

        .answer {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 10px;
            font-weight: 600;
            animation: slideInUp 0.5s ease;
        }

        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* التصحيح - تم التعديل للوضع الليلي */
        .correct-answer {
            background: rgba(76, 175, 80, 0.2);
            color: #2E7D32;
            border: 2px solid #4CAF50;
            font-weight: bold;
        }

        .dark-mode .correct-answer {
            background: rgba(76, 175, 80, 0.3);
            color: #A5D6A7;
            border: 2px solid #81C784;
        }

        /* النصوص والعناوين */
        .text-content {
            line-height: 1.7;
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: var(--white);
            border-radius: 15px;
            border: 1px solid #e0e0e0;
            font-size: 1.1rem;
            transition: var(--transition);
        }

        .dark-mode .text-content {
            background: #1a237e;
            border-color: #37474F;
        }

        .headings-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .heading-item {
            padding: 1.2rem;
            background: var(--white);
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            text-align: center;
            font-weight: 500;
            transition: var(--transition);
        }

        .dark-mode .heading-item {
            background: #1a237e;
            border-color: #37474F;
        }

        .matched {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.1);
            transform: scale(1.02);
        }

        /* الإعلانات والوضعيات */
        .ads-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .ad-item {
            padding: 1.5rem;
            background: var(--white);
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            min-height: 150px;
            transition: var(--transition);
        }

        .dark-mode .ad-item {
            background: #1a237e;
            border-color: #37474F;
        }

        .ad-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }

        .situations-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.2rem;
        }

        .situation-item {
            padding: 1.2rem;
            background: var(--white);
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            transition: var(--transition);
        }

        .dark-mode .situation-item {
            background: #1a237e;
            border-color: #37474F;
        }

        .situation-item:hover {
            border-color: var(--primary);
            background: rgba(33, 150, 243, 0.05);
        }

        /* Sprachbausteine */
        .fill-blanks {
            margin: 1.5rem 0;
        }

        .blank-text {
            line-height: 2;
            margin: 1.5rem 0;
            font-size: 1.2rem;
            padding: 1.5rem;
            background: var(--white);
            border-radius: 15px;
            border: 1px solid #e0e0e0;
        }

        .dark-mode .blank-text {
            background: #1a237e;
            border-color: #37474F;
        }

        .blank {
            display: inline-block;
            min-width: 120px;
            margin: 0 8px;
            padding: 0.5rem 1rem;
            border-bottom: 3px solid var(--primary);
            text-align: center;
            font-weight: 600;
            background: var(--white);
            border-radius: 8px;
            transition: var(--transition);
        }

        .dark-mode .blank {
            background: #1a237e;
        }

        .blank-answer {
            background: rgba(76, 175, 80, 0.2);
            color: #2E7D32;
            border-color: #4CAF50;
            font-weight: bold;
        }

        .dark-mode .blank-answer {
            background: rgba(76, 175, 80, 0.3);
            color: #A5D6A7;
            border-color: #81C784;
        }

        .word-bank {
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: rgba(33, 150, 243, 0.1);
            border-radius: 15px;
            border: 2px dashed var(--primary);
        }

        .word-bank h3 {
            color: var(--primary-dark);
            margin-bottom: 1rem;
            font-size: 1.4rem;
        }

        .dark-mode .word-bank h3 {
            color: #90CAF9;
        }

        .word-list {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .word-item {
            padding: 0.8rem 1.2rem;
            background: var(--white);
            border: 2px solid var(--primary);
            border-radius: 10px;
            font-weight: 600;
            color: var(--primary-dark);
        }

        .dark-mode .word-item {
            background: #1a237e;
            color: #90CAF9;
        }

        .hidden {
            display: none;
        }

        /* Floating Elements مثل الصفحة الرئيسية */
        .floating-elements {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .floating-element {
            position: absolute;
            font-size: 3.5rem;
            opacity: 0.15;
            animation: float 8s ease-in-out infinite;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
        }

        .floating-book { top: 15%; left: 8%; animation-delay: 0s; }
        .floating-pen { top: 75%; right: 12%; animation-delay: 1s; }
        .floating-globe { bottom: 20%; left: 15%; font-size: 4.5rem; animation-delay: 2s; }
        .floating-clock { top: 25%; right: 8%; animation-delay: 3s; }
        .floating-graduate { top: 65%; left: 5%; animation-delay: 4s; }
        .floating-notebook { bottom: 15%; right: 10%; animation-delay: 5s; }
        .floating-pencil { top: 45%; left: 12%; font-size: 2.8rem; animation-delay: 6s; }
        .floating-calculator { top: 35%; right: 15%; animation-delay: 7s; }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg) scale(1); }
            33% { transform: translateY(-30px) rotate(5deg) scale(1.1); }
            66% { transform: translateY(-15px) rotate(-3deg) scale(0.95); }
        }

        @media (max-width: 768px) {
            .header-controls {
                top: 15px;
                left: 15px;
                right: 15px;
                gap: 10px;
            }

            .premium-badge-header {
                top: 15px;
                left: 70px;
                width: 45px;
                height: 45px;
                font-size: 1.1rem;
            }

            .home-btn {
                font-size: 0.8rem;
                padding: 0.4rem 0.8rem;
            }

            .container {
                padding: 2rem;
                margin: 1rem;
                margin-top: 5rem;
            }

            .header h1 {
                font-size: 2rem;
            }

            .headings-grid {
                grid-template-columns: 1fr;
            }

            .ads-grid {
                grid-template-columns: 1fr;
            }

            .right-controls {
                gap: 10px;
            }

            .answer-controls {
                top: 70px;
            }
        }

        @media (max-width: 480px) {
            .header-controls {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }

            .left-controls, .right-controls {
                flex-direction: row;
                justify-content: center;
            }

            .premium-badge-header {
                position: relative;
                top: auto;
                left: auto;
                transform: none;
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Floating Elements مثل الصفحة الرئيسية -->
    <div class="floating-elements">
        <div class="floating-element floating-book">📚</div>
        <div class="floating-element floating-pen">✏️</div>
        <div class="floating-element floating-globe">🌍</div>
        <div class="floating-element floating-clock">⏰</div>
        <div class="floating-element floating-graduate">🎓</div>
        <div class="floating-element floating-notebook">📓</div>
        <div class="floating-element floating-pencil">✏️</div>
        <div class="floating-element floating-calculator">🧮</div>
    </div>

    <!-- شارة المشترك الذهبية - تم التعديل للموقع الجديد -->
    <div class="premium-badge-header" id="premiumBadge">
        <i class="fas fa-crown"></i>
    </div>

    <!-- Header Controls -->
    <div class="header-controls">
        <div class="left-controls">
            <button class="home-btn" id="homeBtn">
                <i class="fas fa-home"></i>
                <span id="homeText">الرئيسية</span>
            </button>
            <div class="language-selector">
                <button class="lang-btn" id="langBtn">
                    <span id="langBtnText">العربية</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="lang-dropdown" id="langDropdown">
                    <div class="lang-option" data-lang="ar">
                        <span>🇸🇦</span>
                        <span>العربية</span>
                    </div>
                    <div class="lang-option" data-lang="de">
                        <span>🇩🇪</span>
                        <span>Deutsch</span>
                    </div>
                    <div class="lang-option" data-lang="en">
                        <span>🇬🇧</span>
                        <span>English</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="right-controls">
            <button class="control-btn" id="themeToggle">
                <i class="fas fa-moon"></i>
            </button>
            <button class="control-btn" id="userBtn">
                <i class="fas fa-user"></i>
            </button>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1 id="pageTitle">KELLNER - TELC B2 Training</h1>
            <p class="page-subtitle" id="pageSubtitle">تمرين القراءة والفهم - الجزء الأول والثاني والثالث</p>
        </div>

        <!-- أزرار التحكم -->
        <div class="answer-controls">
            <button class="answer-btn show-answers" id="showAnswers">
                <i class="fas fa-check-circle"></i>
                <span id="showAnswersText">إظهار التصحيح</span>
            </button>
            <button class="answer-btn hide-answers" id="hideAnswers">
                <i class="fas fa-eye-slash"></i>
                <span id="hideAnswersText">إخفاء التصحيح</span>
            </button>
        </div>

        <!-- Lesen Teil 1 -->
        <div class="section">
            <h2 class="section-title" id="teil1Title">Lesen Teil 1</h2>
            <p id="teil1Description">Lesen Sie zuerst die zehn Überschriften. Lesen Sie dann die fünf Texte und entscheiden Sie, welche Überschrift (a-j) am besten zu welchem Text (1–5) passt.</p>
            
            <div class="headings-grid" id="headingsList">
                <!-- العناوين سيتم إضافتها بالجافاسكريبت -->
            </div>

            <div id="textsList">
                <!-- النصوص سيتم إضافتها بالجافاسكريبت -->
            </div>
        </div>

        <!-- Lesen Teil 2 -->
        <div class="section">
            <h2 class="section-title" id="teil2Title">Lesen Teil 2</h2>
            <div class="text-content" id="longText">
                <!-- النص الطويل سيتم إضافته بالجافاسكريبت -->
            </div>

            <div id="questionsList">
                <!-- الأسئلة سيتم إضافتها بالجافاسكريبت -->
            </div>
        </div>

        <!-- Lesen Teil 3 -->
        <div class="section">
            <h2 class="section-title" id="teil3Title">Lesen Teil 3</h2>
            <p id="teil3Description">Lesen Sie zuerst die zehn Situationen (11–20) und dann die zwölف Info-Texte (a–l). Welcher Info-Text passt zu welcher Situation?</p>
            
            <div class="situations-grid" id="situationsList">
                <!-- الوضعيات سيتم إضافتها بالجافاسكريبت -->
            </div>

            <div class="ads-grid" id="adsList">
                <!-- الإعلانات سيتم إضافتها بالجافاسكريبت -->
            </div>
        </div>

        <!-- Sprachbausteine Teil 1 -->
        <div class="section">
            <h2 class="section-title" id="sprach1Title">Sprachbausteine Teil 1</h2>
            <div class="word-bank" id="wordBank1">
                <h3>الكلمات المتاحة:</h3>
                <div class="word-list" id="wordList1">
                    <!-- الكلمات سيتم إضافتها بالجافاسكريبت -->
                </div>
            </div>
            <div class="fill-blanks">
                <div class="blank-text" id="blankText1">
                    <!-- النص بالفراغات سيتم إضافته بالجافاسكريبت -->
                </div>
            </div>
        </div>

        <!-- Sprachbausteine Teil 2 -->
        <div class="section">
            <h2 class="section-title" id="sprach2Title">Sprachbausteine Teil 2</h2>
            <div class="word-bank" id="wordBank2">
                <h3>الكلمات المتاحة:</h3>
                <div class="word-list" id="wordList2">
                    <!-- الكلمات سيتم إضافتها بالجافاسكريبت -->
                </div>
            </div>
            <div class="fill-blanks">
                <div class="blank-text" id="blankText2">
                    <!-- النص بالفراغات سيتم إضافته بالجافاسكريبت -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // الترجمات
        const translations = {
            ar: {
                homeText: "الرئيسية",
                themeText: "الوضع الليلي",
                langText: "العربية", 
                userText: "زائر",
                pageTitle: "KELLNER - TELC B2 Training",
                pageSubtitle: "تمرين القراءة والفهم - الجزء الأول والثاني والثالث",
                showAnswersText: "إظهار التصحيح",
                hideAnswersText: "إخفاء التصحيح",
                teil1Title: "Lesen Teil 1",
                teil1Description: "Lesen Sie zuerst die zehn Überschriften. Lesen Sie dann die fünf Texte und entscheiden Sie, welche Überschrift (a-j) am besten zu welchem Text (1–5) passt.",
                teil2Title: "Lesen Teil 2", 
                teil3Title: "Lesen Teil 3",
                teil3Description: "Lesen Sie zuerst die zehn Situationen (11–20) und dann die zwölف Info-Texte (a–l). Welcher Info-Text passt zu welcher Situation?",
                sprach1Title: "Sprachbausteine Teil 1",
                sprach2Title: "Sprachbausteine Teil 2"
            },
            de: {
                homeText: "Startseite",
                themeText: "Nachtmodus", 
                langText: "Deutsch",
                userText: "Besucher",
                pageTitle: "KELLNER - TELC B2 Training",
                pageSubtitle: "Leseverstehen - Teil 1, 2 und 3",
                showAnswersText: "Korrektur anzeigen",
                hideAnswersText: "Korrektur ausblenden",
                teil1Title: "Lesen Teil 1",
                teil1Description: "Lesen Sie zuerst die zehn Überschriften. Lesen Sie dann die fünf Texte und entscheiden Sie, welche Überschrift (a-j) am besten zu welchem Text (1–5) passt.",
                teil2Title: "Lesen Teil 2",
                teil3Title: "Lesen Teil 3", 
                teil3Description: "Lesen Sie zuerst die zehn Situationen (11–20) und dann die zwölf Info-Texte (a–l). Welcher Info-Text passt zu welcher Situation?",
                sprach1Title: "Sprachbausteine Teil 1",
                sprach2Title: "Sprachbausteine Teil 2"
            },
            en: {
                homeText: "Home",
                themeText: "Dark Mode",
                langText: "English",
                userText: "Visitor", 
                pageTitle: "KELLNER - TELC B2 Training",
                pageSubtitle: "Reading Comprehension - Part 1, 2 and 3",
                showAnswersText: "Show Correction",
                hideAnswersText: "Hide Correction",
                teil1Title: "Reading Part 1",
                teil1Description: "First read the ten headings. Then read the five texts and decide which heading (a-j) best matches which text (1-5).",
                teil2Title: "Reading Part 2",
                teil3Title: "Reading Part 3",
                teil3Description: "First read the ten situations (11-20) and then the twelve info texts (a-l). Which info text matches which situation?",
                sprach1Title: "Language Elements Part 1", 
                sprach2Title: "Language Elements Part 2"
            }
        };

        // بيانات الأسئلة والإجابات من ملف PDF
        const examData = {
            // Lesen Teil 1
            headings: [
                "Jugend forscht - auch auf dem Wasser",
                "Ein neues Zuhause für die Stadtbücherei", 
                "Hilfe für die Kleinsten",
                "Kunst im öffentlichen Raum",
                "Mehr Sicherheit für Radfahrer",
                "Neue Heimat für Tiere und Pflanzen",
                "Schüler helfen Schülern",
                "Stadtgeschichte zum Anfassen",
                "Unterstützung für pflegende Angehörige",
                "Wohnen in der Gemeinschaft"
            ],
            
            texts: [
                {
                    content: `Seit vielen Jahren gibt es an unserer Schule eine Gruppe von Schülerinnen und Schülern, die sich für Physik und Technik interessieren. In ihrer Freizeit bauen sie verschiedene Geräte und führen Experimente durch. Jetzt haben sie ein Boot entwickelt, das mit Solarenergie angetrieben wird. Das Besondere daran: Es kann nicht nur fahren, sondern auch Wasserproben nehmen und diese analysieren. Damit wollen sie an einem Wettbewerb teilnehmen.`,
                    correctAnswer: "Jugend forscht - auch auf dem Wasser"
                },
                {
                    content: `Das alte Gebäude in der Innenstadt war zu klein geworden. Deshalb wurde ein Neubau am Stadtrand geplant. Dort gibt es jetzt nicht nur mehr Platz für Bücher, sondern auch moderne Arbeitsplätze mit Internetzugang, einen Veranstaltungssaal und eine Cafeteria. Die Öffnungszeiten wurden erweitert, sodass die Bücherei jetzt auch am Sonntag geöffnet hat.`,
                    correctAnswer: "Ein neues Zuhause für die Stadtbücherei"
                },
                {
                    content: `Viele Familien sind auf Unterstützung angewiesen, besonders wenn beide Eltern arbeiten müssen. Deshalb wurde vor einem Jahr ein neues Angebot geschaffen: Studierende der Pädagogik betreuen Kinder im Alter von einem bis drei Jahren. Sie spielen mit ihnen, lesen vor und fördern ihre Entwicklung. Das Angebot wird gut angenommen und soll ausgeweitet werden.`,
                    correctAnswer: "Hilfe für die Kleinsten"
                },
                {
                    content: `Im Rahmen eines Projekts wurden Künstler eingeladen, Skulpturen für den öffentlichen Raum zu entwerfen. Diese werden nun an verschiedenen Orten in der Stadt aufgestellt. Die Werke sollen zum Nachdenken anregen und das Stadtbild bereichern. Interessierte können an Führungen teilnehmen, bei denen die Künstler ihre Werke erklären.`,
                    correctAnswer: "Kunst im öffentlichen Raum"
                },
                {
                    content: `Um die Sicherheit für Radfahrer zu erhöhen, wurden in den letzten Monaten mehrere Maßnahmen umgesetzt. So wurden neue Radwege angelegt und bestehende verbreitert. An Kreuzungen wurden spezielle Ampeln für Radfahrer installiert. Außerdem gibt es jetzt mehr Abstellmöglichkeiten für Fahrräder in der Innenstadt.`,
                    correctAnswer: "Mehr Sicherheit für Radfahrer"
                }
            ],

            // Lesen Teil 2 - النص الكامل
            longText: {
                content: `Die Digitalisierung verändert unsere Arbeitswelt grundlegend. Immer mehr Tätigkeiten werden von Computern und Robotern übernommen. Doch was bedeutet das für die Beschäftigten? Werden in Zukunft überhaupt noch Menschen gebraucht?
Experten sind sich einig: Ja, aber die Anforderungen werden sich verändern. Routinetätigkeiten, die sich leicht automatisieren lassen, werden seltener. Dafür gewinnen kreative und soziale Kompetenzen an Bedeutung. Die Fähigkeit, komplexe Probleme zu lösen und im Team zu arbeiten, wird immer wichtiger.
Unternehmen stehen vor der Herausforderung, ihre Mitarbeiter auf diese Veränderungen vorzubereiten. Fort- und Weiterbildung werden zu entscheidenden Erfolgsfaktoren. Dabei geht es nicht nur um technisches Wissen, sondern auch um die Entwicklung neuer Denk- und Arbeitsweisen.
Die Arbeitswelt der Zukunft wird flexibler und vernetzter sein. Homeoffice und mobile Arbeit nehmen zu. Teams arbeiten oft über Ländergrenzen hinweg zusammen. Das erfordert ein hohes Maß an Selbstorganisation und interkultureller Kompetenz.
Trotz aller Veränderungen bleibt der Mensch im Mittelpunkt. Maschinen können viele Aufgaben übernehmen, aber sie können nicht die Kreativität, Empathie und Intuition des Menschen ersetzen. Die Zukunft der Arbeit liegt in der Zusammenarbeit von Mensch und Maschine.`,
                questions: [
                    {
                        question: "Was wird nach Meinung der Experten in der Arbeitswelt seltener?",
                        options: [
                            "Kreative Tätigkeiten",
                            "Routinetätigkeiten", 
                            "Soziale Kompetenzen"
                        ],
                        correctAnswer: "Routinetätigkeiten"
                    },
                    {
                        question: "Was wird für Unternehmen zu einem entscheidenden Erfolgsfaktor?",
                        options: [
                            "Die Automatisierung aller Tätigkeiten",
                            "Fort- und Weiterbildung der Mitarbeiter",
                            "Die Reduzierung der Mitarbeiterzahl"
                        ],
                        correctAnswer: "Fort- und Weiterbildung der Mitarbeiter"
                    },
                    {
                        question: "Welche Entwicklung wird in der Arbeitswelt erwartet?", 
                        options: [
                            "Mehr Homeoffice und mobile Arbeit",
                            "Weniger internationale Zusammenarbeit",
                            "Stärkere Hierarchien in Unternehmen"
                        ],
                        correctAnswer: "Mehr Homeoffice und mobile Arbeit"
                    },
                    {
                        question: "Was können Maschinen nach dem Text nicht ersetzen?",
                        options: [
                            "Technisches Wissen",
                            "Routinetätigkeiten",
                            "Kreativität und Empathie des Menschen"
                        ],
                        correctAnswer: "Kreativität und Empathie des Menschen"
                    },
                    {
                        question: "Wie sieht die Zukunft der Arbeit nach dem Text aus?",
                        options: [
                            "Menschen werden überflüssig",
                            "Mensch und Maschine arbeiten zusammen",
                            "Maschinen übernehmen alle Tätigkeiten"
                        ],
                        correctAnswer: "Mensch und Maschine arbeiten zusammen"
                    }
                ]
            },

            // Lesen Teil 3
            situations: [
                "Sie möchten sich über die Geschichte Ihrer Stadt informieren.",
                "Sie suchen eine Möglichkeit, gemeinsam mit anderen zu wohnen.",
                "Sie interessieren sich für moderne Kunst im Stadtraum.",
                "Sie möchten Ihr Fahrrad sicher in der Stadt abstellen können.",
                "Sie brauchen Betreuung für Ihr kleines Kind.",
                "Sie wollen ein Boot mit Solarenergie ausprobieren.", 
                "Sie möchten anderen Schülern beim Lernen helfen.",
                "Sie suchen einen ruhigen Ort zum Lesen und Arbeiten.",
                "Sie pflegen einen Angehörigen und brauchen Unterstützung.",
                "Sie möchten mehr über Tiere und Pflanzen in der Stadt erfahren."
            ],

            ads: [
                {
                    id: "a",
                    title: "Stadtmuseum",
                    content: "Besuchen Sie unsere Dauerausstellung zur Stadtgeschichte. Von der ersten Siedlung bis zur modernen Großstadt zeigen wir, wie sich unsere Stadt entwickelt hat. Besondere Highlights sind das mittelalterliche Stadtmodell und die Sammlung historischer Fotografien. Öffnungszeiten: Di-So 10-18 Uhr."
                },
                {
                    id: "b", 
                    title: "Wohnprojekt Gemeinschaft",
                    content: "Sie suchen nicht nur eine Wohnung, sondern eine Gemeinschaft? In unserem neu errichteten Wohnprojekt leben Menschen unterschiedlichen Alters zusammen. Es gibt gemeinsame Räume, einen Garten und regelmäßige Aktivitäten. Interessierte können sich für eine Besichtigung anmelden."
                },
                {
                    id: "c",
                    title: "Kunstpfad Stadt", 
                    content: "Entdecken Sie die Kunst im öffentlichen Raum! Unser kostenloser Kunstpfad führt Sie zu 15 Skulpturen und Installationen im gesamten Stadtgebiet. Begleithefte mit Erläuterungen zu den Werken und Künstlern sind in der Tourist-Information erhältlich."
                },
                {
                    id: "d",
                    title: "Fahrradparkhaus",
                    content: "Sichere Abstellmöglichkeiten für Ihr Fahrrad! Unser neues Fahrradparkhaus in der Innenstadt bietet Platz für 500 Fahrräder. Überdacht und videoüberwacht. Monats- und Jahrestickets erhältlich. Eröffnung am 1. Juni."
                },
                {
                    id: "e",
                    title: "Kinderbetreuung Campus",
                    content: "Studierende betreuen Ihre Kinder! Unser Betreuungsangebot für Kinder von 1-3 Jahren: Mo-Fr 8-16 Uhr. Spielen, Singen, Basteln in kleinen Gruppen. Anmeldung und Information unter www.kinder-campus.de"
                },
                {
                    id: "f",
                    title: "Solarboot-Verleih",
                    content: "Erleben Sie umweltfreundliches Bootfahren! Unser Verleih bietet Solarboote für bis zu 6 Personen. Keine Vorkenntnisse nötig. Führerscheinfrei. Standort: Stadthafen. Öffnungszeiten: April-Oktober täglich 10-18 Uhr."
                },
                {
                    id: "g",
                    title: "Lernpatenschaften",
                    content: "Schüler helfen Schülern! Ältere Schüler unterstützen jüngere beim Lernen. Kostenlose Nachhilfe in allen Fächern. Treffen zweimal wöchentlich in der Schulbibliothek. Anmeldung im Sekretariat."
                },
                {
                    id: "h", 
                    title: "Stadtbücherei Neustadt",
                    content: "Willkommen in unserer neuen Bücherei! Über 50.000 Medien, moderne Arbeitsplätze, freies WLAN. Lesebereiche, Gruppenräume, Cafeteria. Öffnungszeiten: Mo-Fr 10-19 Uhr, Sa-So 10-16 Uhr."
                },
                {
                    id: "i",
                    title: "Pflegestützpunkt",
                    content: "Unterstützung für pflegende Angehörige! Wir beraten Sie zu allen Fragen der Pflege. Kostenlose Kurse zur Pflegekompetenz. Vermittlung von Entlastungsangeboten. Offene Sprechstunde: Di und Do 14-17 Uhr."
                },
                {
                    id: "j",
                    title: "Naturlehrpfad", 
                    content: "Entdecken Sie die Natur in der Stadt! Unser neuer Lehrpfad führt durch das städtische Biotop. Informationstafeln zu Tieren und Pflanzen. Führungen für Schulklassen und Gruppen nach Anmeldung. Eintritt frei."
                },
                {
                    id: "k",
                    title: "Reparatur-Café",
                    content: "Gemeinsam reparieren statt wegwerfen! In unserem Reparatur-Café helfen Ihnen Ehrenamtliche bei der Reparatur von Elektrogeräten, Fahrrädern und mehr. Jeden Samstag 14-17 Uhr im Gemeindezentrum."
                },
                {
                    id: "l",
                    title: "Stadteilarchiv",
                    content: "Geschichte lebendig halten! Unser Archiv sammelt Dokumente, Fotos und Erinnerungen zur Geschichte des Stadtteils. Für Forschungsarbeiten zugänglich. Öffnungszeiten: Mi 15-18 Uhr und nach Vereinbarung."
                }
            ],

            // الإجابات الصحيحة لـ Lesen Teil 3
            teil3Answers: {
                11: "Stadtmuseum",
                12: "Wohnprojekt Gemeinschaft", 
                13: "Kunstpfad Stadt",
                14: "Fahrradparkhaus",
                15: "Kinderbetreuung Campus",
                16: "Solarboot-Verleih",
                17: "Lernpatenschaften",
                18: "Stadtbücherei Neustadt",
                19: "Pflegestützpunkt", 
                20: "Naturlehrpfad"
            },

            // Sprachbausteine Teil 1
            blankText1: {
                content: `Sehr geehrte Damen und Herren,

hiermit bewerbe ich mich __(21)__ die ausgeschriebene Stelle als Bürokauffrau in Ihrem Unternehmen. Ich habe vor einem Monat meine Ausbildung __(22)__ Bürokauffrau erfolgreich abgeschlossen und suche nun __(23)__ eine neue Herausforderung.

Während meiner Ausbildung konnte ich umfassende Erfahrungen __(24)__ den Bereichen Buchhaltung, Personalwesen und Kundenbetreuung sammeln. Besonders interessiert hat mich __(25)__ die Arbeit mit moderner Bürosoftware. Ich bin sicher, dass ich __(26)__ meinen Fähigkeiten einen wertvollen Beitrag zu Ihrem Team leisten kann.

__(27)__ meinen ehemaligen Arbeitgeber wurde ich als zuverlässige und engagierte Mitarbeiterin geschätzt. Gerne __(28)__ ich Ihnen in einem persönlichen Gespräch nähere Einzelheiten mitteilen.

Über eine Einladung __(29)__ ein Vorstellungsgespräch freue ich mich. Für Rückfragen stehe ich Ihnen selbstverständlich __(30)__ Verfügung.

Mit freundlichen Grüßen
Anna Müller`,
                answers: ["um", "zur", "nach", "in", "dabei", "mit", "Bei", "würde", "zu", "zur"]
            },

            // Sprachbausteine Teil 2
            blankText2: {
                content: `Die Digitalisierung __(31)__ unser Leben in vielerlei Hinsicht. Immer mehr Menschen nutzen Online-Banking, __(32)__ zur Bank zu gehen. Auch beim Einkaufen hat sich vieles geändert: Viele kaufen lieber online ein, __(33)__ in Geschäften. Das hat natürlich Auswirkungen __(34)__ den Einzelhandel.

Ein weiterer Bereich, __(35)__ sich stark verändert hat, ist die Kommunikation. Früher hat man Briefe geschrieben, heute schickt man E-Mails oder Nachrichten __(36)__ das Smartphone. Das ist schneller und bequemer, __(37)__ es hat auch Nachteile. Viele Menschen fühlen sich __(38)__ der ständigen Erreichbarkeit gestresst.

Trotz aller Vorteile sollte man nicht vergessen, __(39)__ auch persönliche Kontakte wichtig sind. Ein Gespräch von Angesicht __(40)__ Angesicht kann durch keine Technologie ersetzt werden.`,
                answers: ["verändert", "anstatt", "anstatt", "auf", "der", "über", "aber", "durch", "dass", "zu"]
            }
        };

        // تهيئة الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
            setupEventListeners();
        });

        let currentLang = 'ar';
        let isDarkMode = false;

        function initializePage() {
            // تحميل الإعدادات المحفوظة
            const savedLang = localStorage.getItem('language') || 'ar';
            const savedDarkMode = localStorage.getItem('darkMode') === 'true';
            const username = localStorage.getItem('username') || 'زائر';
            const access = localStorage.getItem('access');
            
            changeLanguage(savedLang);
            if (savedDarkMode) {
                toggleDarkMode();
            }
            
            // التحقق من حالة المستخدم
            if (access === 'paid' && username) {
                document.getElementById('premiumBadge').style.display = 'flex';
            }
            
            // تهيئة الأجزاء
            initializeTeil1();
            initializeTeil2();  
            initializeTeil3();
            initializeSprachbausteine();
        }

        function initializeTeil1() {
            const headingsList = document.getElementById('headingsList');
            const textsList = document.getElementById('textsList');

            headingsList.innerHTML = '';
            textsList.innerHTML = '';

            // إضافة العناوين
            examData.headings.forEach((heading, index) => {
                const headingItem = document.createElement('div');
                headingItem.className = 'heading-item';
                headingItem.innerHTML = `
                    <strong>${String.fromCharCode(97 + index)})</strong> ${heading}
                `;
                headingItem.dataset.letter = String.fromCharCode(97 + index);
                headingsList.appendChild(headingItem);
            });

            // إضافة النصوص
            examData.texts.forEach((text, index) => {
                const textItem = document.createElement('div');
                textItem.className = 'question';
                textItem.innerHTML = `
                    <h3>Text ${index + 1}</h3>
                    <div class="text-content">${text.content}</div>
                    <div class="answer hidden correct-answer">
                        ${currentLang === 'ar' ? 'الإجابة الصحيحة:' : currentLang === 'de' ? 'Richtige Antwort:' : 'Correct answer:'} ${text.correctAnswer}
                    </div>
                `;
                textsList.appendChild(textItem);
            });
        }

        function initializeTeil2() {
            const longText = document.getElementById('longText');
            const questionsList = document.getElementById('questionsList');

            longText.innerHTML = `<div class="text-content">${examData.longText.content}</div>`;

            questionsList.innerHTML = '';
            examData.longText.questions.forEach((question, index) => {
                const questionItem = document.createElement('div');
                questionItem.className = 'question';
                questionItem.innerHTML = `
                    <h3>Frage ${index + 6}</h3>
                    <p><strong>${question.question}</strong></p>
                    <div class="options">
                        ${question.options.map((option, optIndex) => `
                            <div class="option" data-index="${optIndex}">
                                ${String.fromCharCode(97 + optIndex)}) ${option}
                            </div>
                        `).join('')}
                    </div>
                    <div class="answer hidden correct-answer">
                        ${currentLang === 'ar' ? 'الإجابة الصحيحة:' : currentLang === 'de' ? 'Richtige Antwort:' : 'Correct answer:'} ${question.correctAnswer}
                    </div>
                `;
                questionsList.appendChild(questionItem);
            });
        }

        function initializeTeil3() {
            const situationsList = document.getElementById('situationsList');
            const adsList = document.getElementById('adsList');

            situationsList.innerHTML = '';
            examData.situations.forEach((situation, index) => {
                const situationItem = document.createElement('div');
                situationItem.className = 'situation-item';
                situationItem.innerHTML = `
                    <strong>${index + 11})</strong> ${situation}
                    <div class="answer hidden correct-answer">
                        ${currentLang === 'ar' ? 'الإجابة الصحيحة:' : currentLang === 'de' ? 'Richtige Antwort:' : 'Correct answer:'} ${examData.teil3Answers[index + 11]}
                    </div>
                `;
                situationsList.appendChild(situationItem);
            });

            adsList.innerHTML = '';
            examData.ads.forEach(ad => {
                const adItem = document.createElement('div');
                adItem.className = 'ad-item';
                adItem.innerHTML = `
                    <strong>${ad.id.toUpperCase()}) ${ad.title}</strong>
                    <p>${ad.content}</p>
                `;
                adsList.appendChild(adItem);
            });
        }

        function initializeSprachbausteine() {
            // Teil 1
            const blankText1 = document.getElementById('blankText1');
            const wordList1 = document.getElementById('wordList1');
            
            // إضافة الكلمات إلى البنك
            wordList1.innerHTML = '';
            examData.blankText1.answers.forEach((word, index) => {
                const wordItem = document.createElement('div');
                wordItem.className = 'word-item';
                wordItem.textContent = word;
                wordList1.appendChild(wordItem);
            });
            
            // إضافة النص مع الفراغات
            const textWithBlanks1 = examData.blankText1.content.replace(/__\(\d+\)__/g, match => {
                const blankNumber = parseInt(match.match(/\d+/)[0]);
                return `<span class="blank">______<span class="blank-answer hidden">${examData.blankText1.answers[blankNumber - 21]}</span></span>`;
            });
            blankText1.innerHTML = textWithBlanks1;

            // Teil 2
            const blankText2 = document.getElementById('blankText2');
            const wordList2 = document.getElementById('wordList2');
            
            // إضافة الكلمات إلى البنك
            wordList2.innerHTML = '';
            examData.blankText2.answers.forEach((word, index) => {
                const wordItem = document.createElement('div');
                wordItem.className = 'word-item';
                wordItem.textContent = word;
                wordList2.appendChild(wordItem);
            });
            
            // إضافة النص مع الفراغات
            const textWithBlanks2 = examData.blankText2.content.replace(/__\(\d+\)__/g, match => {
                const blankNumber = parseInt(match.match(/\d+/)[0]);
                return `<span class="blank">______<span class="blank-answer hidden">${examData.blankText2.answers[blankNumber - 31]}</span></span>`;
            });
            blankText2.innerHTML = textWithBlanks2;
        }

        function setupEventListeners() {
            // أزرار التحكم
            document.getElementById('showAnswers').addEventListener('click', showAllAnswers);
            document.getElementById('hideAnswers').addEventListener('click', hideAllAnswers);
            
            // زر الرئيسية
            document.getElementById('homeBtn').addEventListener('click', () => {
                window.location.href = 'tahada.html';
            });
            
            // زر الوضع الليلي
            document.getElementById('themeToggle').addEventListener('click', toggleDarkMode);
            
            // زر المستخدم
            document.getElementById('userBtn').addEventListener('click', () => {
                window.location.href = 'tahada.html#profile';
            });
            
            // زر اللغة
            document.getElementById('langBtn').addEventListener('click', toggleLangDropdown);
            document.querySelectorAll('.lang-option').forEach(option => {
                option.addEventListener('click', () => {
                    const lang = option.getAttribute('data-lang');
                    changeLanguage(lang);
                    document.getElementById('langDropdown').classList.remove('show');
                });
            });
            
            // إغلاق القوائم المنسدلة بالنقر خارجها
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.language-selector')) {
                    document.getElementById('langDropdown').classList.remove('show');
                }
            });
        }

        function showAllAnswers() {
            document.querySelectorAll('.answer').forEach(answer => {
                answer.classList.remove('hidden');
            });
            document.querySelectorAll('.blank-answer').forEach(answer => {
                answer.classList.remove('hidden');
            });
            document.querySelectorAll('.heading-item').forEach((heading, index) => {
                const letter = heading.dataset.letter;
                examData.texts.forEach(text => {
                    if (text.correctAnswer === examData.headings[letter.charCodeAt(0) - 97]) {
                        heading.classList.add('matched');
                    }
                });
            });
        }

        function hideAllAnswers() {
            document.querySelectorAll('.answer').forEach(answer => {
                answer.classList.add('hidden');
            });
            document.querySelectorAll('.blank-answer').forEach(answer => {
                answer.classList.add('hidden');
            });
            document.querySelectorAll('.heading-item').forEach(heading => {
                heading.classList.remove('matched');
            });
        }

        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark-mode', isDarkMode);
            localStorage.setItem('darkMode', isDarkMode);
            
            const themeIcon = document.querySelector('#themeToggle i');
            if (isDarkMode) {
                themeIcon.className = 'fas fa-sun';
            } else {
                themeIcon.className = 'fas fa-moon';
            }
        }

        function toggleLangDropdown() {
            document.getElementById('langDropdown').classList.toggle('show');
        }

        function changeLanguage(lang) {
            currentLang = lang;
            const t = translations[lang];
            
            // تحديث جميع النصوص
            Object.keys(t).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    element.textContent = t[key];
                }
            });
            
            localStorage.setItem('language', lang);
            
            // إعادة تهيئة المحتوى لترجمة الإجابات
            initializeTeil1();
            initializeTeil2();
        }
    </script>
</body>
</html>