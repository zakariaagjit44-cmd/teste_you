<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BILDER - TELC B2 Training</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2196F3;
            --primary-dark: #1976D2;
            --secondary: #42A5F5;
            --secondary-dark: #1E88E5;
            --success: #4CAF50;
            --danger: #f44336;
            --warning: #FFC107;
            --light: #E3F2FD;
            --dark: #0D47A1;
            --text: #333;
            --text-light: #546E7A;
            --white: #ffffff;
            --shadow: 0 10px 30px rgba(33, 150, 243, 0.2);
            --shadow-hover: 0 20px 40px rgba(33, 150, 243, 0.3);
            --radius: 25px;
            --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, var(--light) 0%, #BBDEFB 100%);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            transition: var(--transition);
        }

        body.dark-mode {
            background: linear-gradient(135deg, var(--dark) 0%, var(--primary-dark) 100%);
            color: var(--light);
        }

        /* Header Controls - التعديل هنا */
        .header-controls {
            position: fixed;
            top: 20px;
            left: 20px;
            right: 20px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            z-index: 1000;
            gap: 15px;
        }

        .left-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: flex-start;
        }

        .right-controls {
            display: flex;
            gap: 15px;
            align-items: flex-start;
        }

        .control-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            cursor: pointer;
            box-shadow: var(--shadow);
            border: none;
            background: var(--primary);
            color: var(--white);
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }

        .control-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .control-btn:hover::before {
            width: 100%;
            height: 100%;
        }

        .control-btn:hover {
            transform: scale(1.15) rotate(5deg);
            box-shadow: 0 8px 25px rgba(33, 150, 243, 0.4);
        }

        /* شارة المشترك الذهبية - تم التعديل */
        .premium-badge-header {
            position: fixed;
            top: 20px;
            left: 90px; /* نقلت إلى الجهة اليسرى */
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #000;
            padding: 0.5rem;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.3rem;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            animation: glow 2s ease-in-out infinite alternate;
            cursor: pointer;
            transition: var(--transition);
        }

        .premium-badge-header:hover {
            transform: scale(1.1) rotate(10deg);
        }

        @keyframes glow {
            from { box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3); }
            to { box-shadow: 0 4px 20px rgba(255, 215, 0, 0.6); }
        }

        .home-btn {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid var(--primary);
            border-radius: 50px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-weight: 600;
            color: var(--primary-dark);
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
            font-size: 0.9rem;
            border: none;
            width: auto;
            height: auto;
        }

        .dark-mode .home-btn {
            background: rgba(13, 71, 161, 0.95);
            color: var(--light);
            border: 2px solid var(--secondary);
        }

        .home-btn:hover {
            background: var(--primary);
            color: var(--white);
            transform: translateY(-3px);
        }

        /* Language Selector */
        .language-selector {
            display: flex;
            position: relative;
        }

        .lang-btn {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid var(--primary);
            border-radius: var(--radius);
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-weight: 600;
            color: var(--primary-dark);
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
            border: none;
            width: auto;
            height: auto;
        }

        .dark-mode .lang-btn {
            background: rgba(13, 71, 161, 0.95);
            color: var(--light);
            border: 2px solid var(--secondary);
        }

        .lang-btn:hover {
            background: var(--primary);
            color: var(--white);
            transform: translateY(-3px);
        }

        .lang-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            margin-top: 0.5rem;
            background: var(--white);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            display: none;
            overflow: hidden;
            min-width: 120px;
            animation: dropdownSlide 0.3s ease;
            z-index: 1001;
        }

        .dark-mode .lang-dropdown {
            background: #1a237e;
            color: var(--light);
        }

        @keyframes dropdownSlide {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .lang-dropdown.show {
            display: block;
        }

        .lang-option {
            padding: 0.8rem 1rem;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
            color: var(--text);
        }

        .dark-mode .lang-option {
            color: var(--light);
            border-bottom: 1px solid #37474F;
        }

        .lang-option:hover {
            background: #f5f5f5;
            transform: translateX(5px);
        }

        .dark-mode .lang-option:hover {
            background: #283593;
        }

        .lang-option:last-child {
            border-bottom: none;
        }

        /* النوافذ المنبثقة */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: var(--white);
            margin: 10% auto;
            padding: 2rem;
            border-radius: var(--radius);
            width: 90%;
            max-width: 500px;
            box-shadow: var(--shadow-hover);
            position: relative;
            animation: modalSlideIn 0.3s ease;
        }

        .dark-mode .modal-content {
            background-color: #1a237e;
            color: var(--light);
        }

        @keyframes modalSlideIn {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .close {
            position: absolute;
            top: 1rem;
            left: 1rem;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-light);
        }

        .close:hover {
            color: var(--primary);
        }

        .support-info, .activation-info {
            margin: 1.5rem 0;
        }

        .support-info p, .activation-info p {
            margin: 1rem 0;
            padding: 0.8rem;
            background: rgba(33, 150, 243, 0.1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        /* المحتوى الرئيسي */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--radius);
            padding: 3rem;
            box-shadow: var(--shadow);
            border: 1px solid rgba(33, 150, 243, 0.2);
            backdrop-filter: blur(15px);
            margin-top: 6rem;
            transition: var(--transition);
        }

        .dark-mode .container {
            background: rgba(13, 71, 161, 0.95);
            border: 1px solid rgba(227, 242, 253, 0.2);
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            animation: contentSlideUp 0.8s ease;
        }

        @keyframes contentSlideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header h1 {
            font-size: 2.8rem;
            color: var(--primary-dark);
            margin-bottom: 1rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .dark-mode .header h1 {
            color: #90CAF9;
        }

        .page-subtitle {
            font-size: 1.2rem;
            color: var(--text-light);
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .dark-mode .page-subtitle {
            color: #B0BEC5;
        }

        /* أزرار التحكم */
        .answer-controls {
            position: sticky;
            top: 80px; /* أعلى قليلاً لتجنب التداخل مع الشارة */
            background: rgba(255, 255, 255, 0.95);
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            z-index: 100;
            display: flex;
            gap: 1rem;
            justify-content: center;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(33, 150, 243, 0.2);
        }

        .dark-mode .answer-controls {
            background: rgba(13, 71, 161, 0.95);
            border: 1px solid rgba(227, 242, 253, 0.2);
        }

        .answer-btn {
            padding: 1rem 2rem;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            position: relative;
            overflow: hidden;
            border: none;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            transition: var(--transition);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .answer-btn::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: right 0.6s;
        }

        .answer-btn:hover::before {
            right: 100%;
        }

        .answer-btn:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }

        .show-answers {
            background: linear-gradient(135deg, var(--success) 0%, #45a049 100%);
            color: var(--white);
        }

        .hide-answers {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--secondary-dark) 100%);
            color: var(--white);
        }

        /* التصميم الخاص بالأسئلة */
        .section {
            margin: 2rem 0;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(33, 150, 243, 0.2);
            backdrop-filter: blur(10px);
            transition: var(--transition);
        }

        .dark-mode .section {
            background: rgba(13, 71, 161, 0.9);
            border: 1px solid rgba(227, 242, 253, 0.2);
        }

        .section-title {
            color: var(--primary-dark);
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.8rem;
            border-bottom: 2px solid var(--primary);
            font-weight: 600;
        }

        .dark-mode .section-title {
            color: #90CAF9;
        }

        .question {
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: rgba(33, 150, 243, 0.05);
            border-radius: 15px;
            border-right: 4px solid var(--primary);
            transition: var(--transition);
        }

        .dark-mode .question {
            background: rgba(33, 150, 243, 0.1);
        }

        .options {
            margin: 1rem 0;
        }

        .option {
            margin: 0.8rem 0;
            padding: 1rem;
            background: var(--white);
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .dark-mode .option {
            background: #1a237e;
            border-color: #37474F;
        }

        .option:hover {
            border-color: var(--primary);
            background: rgba(33, 150, 243, 0.05);
            transform: translateX(-5px);
        }

        .correct {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.1);
        }

        .incorrect {
            border-color: #f44336;
            background: rgba(244, 67, 54, 0.1);
        }

        .answer {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 10px;
            font-weight: 600;
            animation: slideInUp 0.5s ease;
        }

        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* التصحيح - تم التعديل للوضع الليلي */
        .correct-answer {
            background: rgba(76, 175, 80, 0.2);
            color: #2E7D32;
            border: 2px solid #4CAF50;
            font-weight: bold;
        }

        .dark-mode .correct-answer {
            background: rgba(76, 175, 80, 0.3);
            color: #A5D6A7;
            border: 2px solid #81C784;
        }

        /* النصوص والعناوين */
        .text-content {
            line-height: 1.7;
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: var(--white);
            border-radius: 15px;
            border: 1px solid #e0e0e0;
            font-size: 1.1rem;
            transition: var(--transition);
        }

        .dark-mode .text-content {
            background: #1a237e;
            border-color: #37474F;
        }

        .headings-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .heading-item {
            padding: 1.2rem;
            background: var(--white);
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            text-align: center;
            font-weight: 500;
            transition: var(--transition);
        }

        .dark-mode .heading-item {
            background: #1a237e;
            border-color: #37474F;
        }

        .matched {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.1);
            transform: scale(1.02);
        }

        /* الإعلانات والوضعيات */
        .ads-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .ad-item {
            padding: 1.5rem;
            background: var(--white);
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            min-height: 150px;
            transition: var(--transition);
        }

        .dark-mode .ad-item {
            background: #1a237e;
            border-color: #37474F;
        }

        .ad-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }

        .situations-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.2rem;
        }

        .situation-item {
            padding: 1.2rem;
            background: var(--white);
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            transition: var(--transition);
        }

        .dark-mode .situation-item {
            background: #1a237e;
            border-color: #37474F;
        }

        .situation-item:hover {
            border-color: var(--primary);
            background: rgba(33, 150, 243, 0.05);
        }

        /* Sprachbausteine */
        .fill-blanks {
            margin: 1.5rem 0;
        }

        .blank-text {
            line-height: 2;
            margin: 1.5rem 0;
            font-size: 1.2rem;
            padding: 1.5rem;
            background: var(--white);
            border-radius: 15px;
            border: 1px solid #e0e0e0;
        }

        .dark-mode .blank-text {
            background: #1a237e;
            border-color: #37474F;
        }

        .blank {
            display: inline-block;
            min-width: 120px;
            margin: 0 8px;
            padding: 0.5rem 1rem;
            border-bottom: 3px solid var(--primary);
            text-align: center;
            font-weight: 600;
            background: var(--white);
            border-radius: 8px;
            transition: var(--transition);
        }

        .dark-mode .blank {
            background: #1a237e;
        }

        .blank-answer {
            background: rgba(76, 175, 80, 0.2);
            color: #2E7D32;
            border-color: #4CAF50;
            font-weight: bold;
        }

        .dark-mode .blank-answer {
            background: rgba(76, 175, 80, 0.3);
            color: #A5D6A7;
            border-color: #81C784;
        }

        .hidden {
            display: none;
        }

        /* Floating Elements مثل الصفحة الرئيسية */
        .floating-elements {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .floating-element {
            position: absolute;
            font-size: 3.5rem;
            opacity: 0.15;
            animation: float 8s ease-in-out infinite;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
        }

        .floating-book { top: 15%; left: 8%; animation-delay: 0s; }
        .floating-pen { top: 75%; right: 12%; animation-delay: 1s; }
        .floating-globe { bottom: 20%; left: 15%; font-size: 4.5rem; animation-delay: 2s; }
        .floating-clock { top: 25%; right: 8%; animation-delay: 3s; }
        .floating-graduate { top: 65%; left: 5%; animation-delay: 4s; }
        .floating-notebook { bottom: 15%; right: 10%; animation-delay: 5s; }
        .floating-pencil { top: 45%; left: 12%; font-size: 2.8rem; animation-delay: 6s; }
        .floating-calculator { top: 35%; right: 15%; animation-delay: 7s; }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg) scale(1); }
            33% { transform: translateY(-30px) rotate(5deg) scale(1.1); }
            66% { transform: translateY(-15px) rotate(-3deg) scale(0.95); }
        }

        @media (max-width: 768px) {
            .header-controls {
                top: 15px;
                left: 15px;
                right: 15px;
                gap: 10px;
            }

            .premium-badge-header {
                top: 15px;
                left: 70px; /* تعديل الموقع في الشاشات الصغيرة */
                width: 45px;
                height: 45px;
                font-size: 1.1rem;
            }

            .home-btn {
                font-size: 0.8rem;
                padding: 0.4rem 0.8rem;
            }

            .container {
                padding: 2rem;
                margin: 1rem;
                margin-top: 5rem;
            }

            .header h1 {
                font-size: 2rem;
            }

            .headings-grid {
                grid-template-columns: 1fr;
            }

            .ads-grid {
                grid-template-columns: 1fr;
            }

            .right-controls {
                gap: 10px;
            }

            .answer-controls {
                top: 70px;
            }
        }

        @media (max-width: 480px) {
            .header-controls {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }

            .left-controls, .right-controls {
                flex-direction: row;
                justify-content: center;
            }

            .premium-badge-header {
                position: relative;
                top: auto;
                left: auto;
                transform: none;
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Floating Elements مثل الصفحة الرئيسية -->
    <div class="floating-elements">
        <div class="floating-element floating-book">📚</div>
        <div class="floating-element floating-pen">✏️</div>
        <div class="floating-element floating-globe">🌍</div>
        <div class="floating-element floating-clock">⏰</div>
        <div class="floating-element floating-graduate">🎓</div>
        <div class="floating-element floating-notebook">📓</div>
        <div class="floating-element floating-pencil">✏️</div>
        <div class="floating-element floating-calculator">🧮</div>
    </div>

    <!-- شارة المشترك الذهبية - تم التعديل -->
    <div class="premium-badge-header" id="premiumBadge">
        <i class="fas fa-crown"></i>
    </div>

    <!-- Header Controls -->
    <div class="header-controls">
        <div class="left-controls">
            <button class="home-btn" id="homeBtn">
                <i class="fas fa-home"></i>
                <span id="homeText">الرئيسية</span>
            </button>
            <div class="language-selector">
                <button class="lang-btn" id="langBtn">
                    <span id="langBtnText">العربية</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="lang-dropdown" id="langDropdown">
                    <div class="lang-option" data-lang="ar">
                        <span>🇸🇦</span>
                        <span>العربية</span>
                    </div>
                    <div class="lang-option" data-lang="de">
                        <span>🇩🇪</span>
                        <span>Deutsch</span>
                    </div>
                    <div class="lang-option" data-lang="en">
                        <span>🇬🇧</span>
                        <span>English</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="right-controls">
            <button class="control-btn" id="themeToggle">
                <i class="fas fa-moon"></i>
            </button>
            <!-- إضافة زر الدعم -->
            <button class="control-btn" id="supportBtn">
                <i class="fas fa-comments"></i>
            </button>
            <!-- إضافة زر الملاحظات -->
            <button class="control-btn" id="notesBtn">
                <i class="fas fa-sticky-note"></i>
            </button>
            <button class="control-btn" id="userBtn">
                <i class="fas fa-user"></i>
            </button>
        </div>
    </div>

    <!-- نافذة الدعم المنبثقة -->
    <div class="modal" id="supportModal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3 id="supportTitle">الدعم الفني والمساعدة</h3>
            <div class="support-info">
                <p><i class="fas fa-phone"></i> <span id="supportPhone">+49 123 456 789</span></p>
                <p><i class="fas fa-envelope"></i> <span id="supportEmail">support@bilder.de</span></p>
                <p><i class="fas fa-clock"></i> <span id="supportHours">24/7</span></p>
            </div>
        </div>
    </div>

    <!-- نافذة تفعيل الاشتراك -->
    <div class="modal" id="phoneModal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3 id="activationTitle">تفعيل الاشتراك المميز</h3>
            <p id="activationText">لتفعيل الاشتراك المميز، يرجى الاتصال بنا على:</p>
            <div class="activation-info">
                <p><i class="fas fa-phone"></i> +49 123 456 789</p>
                <p><i class="fas fa-whatsapp"></i> +49 987 654 321</p>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1 id="pageTitle">BILDER - TELC B2 Training</h1>
            <p class="page-subtitle" id="pageSubtitle">تمرين القراءة والفهم - الجزء الأول والثاني والثالث</p>
        </div>

        <!-- أزرار التحكم -->
        <div class="answer-controls">
            <button class="answer-btn show-answers" id="showAnswers">
                <i class="fas fa-check-circle"></i>
                <span id="showAnswersText">إظهار التصحيح</span>
            </button>
            <button class="answer-btn hide-answers" id="hideAnswers">
                <i class="fas fa-eye-slash"></i>
                <span id="hideAnswersText">إخفاء التصحيح</span>
            </button>
        </div>

        <!-- Lesen Teil 1 -->
        <div class="section">
            <h2 class="section-title" id="teil1Title">Lesen Teil 1</h2>
            <p id="teil1Description">Lesen Sie zuerst die zehn Überschriften. Lesen Sie dann die fünf Texte und entscheiden Sie, welche Überschrift (a-j) am besten zu welchem Text (1–5) passt.</p>
            
            <div class="headings-grid" id="headingsList">
                <!-- العناوين سيتم إضافتها بالجافاسكريبت -->
            </div>

            <div id="textsList">
                <!-- النصوص سيتم إضافتها بالجافاسكريبت -->
            </div>
        </div>

        <!-- Lesen Teil 2 -->
        <div class="section">
            <h2 class="section-title" id="teil2Title">Lesen Teil 2</h2>
            <div class="text-content" id="longText">
                <!-- النص الطويل سيتم إضافته بالجافاسكريبت -->
            </div>

            <div id="questionsList">
                <!-- الأسئلة سيتم إضافتها بالجافاسكريبت -->
            </div>
        </div>

        <!-- Lesen Teil 3 -->
        <div class="section">
            <h2 class="section-title" id="teil3Title">Lesen Teil 3</h2>
            <p id="teil3Description">Lesen Sie zuerst die zehn Situationen (11–20) und dann die zwölف Info-Texte (a–l). Welcher Info-Text passt zu welcher Situation?</p>
            
            <div class="situations-grid" id="situationsList">
                <!-- الوضعيات سيتم إضافتها بالجافاسكريبت -->
            </div>

            <div class="ads-grid" id="adsList">
                <!-- الإعلانات سيتم إضافتها بالجافاسكريبت -->
            </div>
        </div>

        <!-- Sprachbausteine Teil 1 -->
        <div class="section">
            <h2 class="section-title" id="sprach1Title">Sprachbausteine Teil 1</h2>
            <div class="fill-blanks">
                <div class="blank-text" id="blankText1">
                    <!-- النص بالفراغات سيتم إضافته بالجافاسكريبت -->
                </div>
            </div>
        </div>

        <!-- Sprachbausteine Teil 2 -->
        <div class="section">
            <h2 class="section-title" id="sprach2Title">Sprachbausteine Teil 2</h2>
            <div class="fill-blanks">
                <div class="blank-text" id="blankText2">
                    <!-- النص بالفراغات سيتم إضافته بالجافاسكريبت -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // الترجمات
        const translations = {
            ar: {
                homeText: "الرئيسية",
                themeText: "الوضع الليلي",
                langText: "العربية", 
                userText: "زائر",
                pageTitle: "BILDER - TELC B2 Training",
                pageSubtitle: "تمرين القراءة والفهم - الجزء الأول والثاني والثالث",
                showAnswersText: "إظهار التصحيح",
                hideAnswersText: "إخفاء التصحيح",
                teil1Title: "Lesen Teil 1",
                teil1Description: "Lesen Sie zuerst die zehn Überschriften. Lesen Sie dann die fünf Texte und entscheiden Sie, welche Überschrift (a-j) am besten zu welchem Text (1–5) passt.",
                teil2Title: "Lesen Teil 2", 
                teil3Title: "Lesen Teil 3",
                teil3Description: "Lesen Sie zuerst die zehn Situationen (11–20) und dann die zwölف Info-Texte (a–l). Welcher Info-Text passt zu welcher Situation?",
                sprach1Title: "Sprachbausteine Teil 1",
                sprach2Title: "Sprachbausteine Teil 2",
                supportTitle: "الدعم الفني والمساعدة",
                supportPhone: "+49 123 456 789",
                supportEmail: "support@bilder.de",
                supportHours: "24/7",
                activationTitle: "تفعيل الاشتراك المميز",
                activationText: "لتفعيل الاشتراك المميز، يرجى الاتصال بنا على:"
            },
            de: {
                homeText: "Startseite",
                themeText: "Nachtmodus", 
                langText: "Deutsch",
                userText: "Besucher",
                pageTitle: "BILDER - TELC B2 Training",
                pageSubtitle: "Leseverstehen - Teil 1, 2 und 3",
                showAnswersText: "Korrektur anzeigen",
                hideAnswersText: "Korrektur ausblenden",
                teil1Title: "Lesen Teil 1",
                teil1Description: "Lesen Sie zuerst die zehn Überschriften. Lesen Sie dann die fünf Texte und entscheiden Sie, welche Überschrift (a-j) am besten zu welchem Text (1–5) passt.",
                teil2Title: "Lesen Teil 2",
                teil3Title: "Lesen Teil 3", 
                teil3Description: "Lesen Sie zuerst die zehn Situationen (11–20) und dann die zwölf Info-Texte (a–l). Welcher Info-Text passt zu welcher Situation?",
                sprach1Title: "Sprachbausteine Teil 1",
                sprach2Title: "Sprachbausteine Teil 2",
                supportTitle: "Technischer Support und Hilfe",
                supportPhone: "+49 123 456 789",
                supportEmail: "support@bilder.de",
                supportHours: "24/7",
                activationTitle: "Premium-Abo aktivieren",
                activationText: "Um Ihr Premium-Abo zu aktivieren, kontaktieren Sie uns bitte unter:"
            },
            en: {
                homeText: "Home",
                themeText: "Dark Mode",
                langText: "English",
                userText: "Visitor", 
                pageTitle: "BILDER - TELC B2 Training",
                pageSubtitle: "Reading Comprehension - Part 1, 2 and 3",
                showAnswersText: "Show Correction",
                hideAnswersText: "Hide Correction",
                teil1Title: "Reading Part 1",
                teil1Description: "First read the ten headings. Then read the five texts and decide which heading (a-j) best matches which text (1-5).",
                teil2Title: "Reading Part 2",
                teil3Title: "Reading Part 3",
                teil3Description: "First read the ten situations (11-20) and then the twelve info texts (a-l). Which info text matches which situation?",
                sprach1Title: "Language Elements Part 1", 
                sprach2Title: "Language Elements Part 2",
                supportTitle: "Technical Support and Help",
                supportPhone: "+49 123 456 789",
                supportEmail: "support@bilder.de",
                supportHours: "24/7",
                activationTitle: "Activate Premium Subscription",
                activationText: "To activate your premium subscription, please contact us at:"
            }
        };

        // بيانات الأسئلة والإجابات من ملف PDF
        const examData = {
            // Lesen Teil 1 - البيانات من ملف PDF
            headings: [
                "Alte spiele stärken das Miteinander",
                "Dinge zum Anfassen bleiben beliebt",
                "Je mehr Spielsachen, desto größer die Kreativität",
                "Kleine Züge mit langer Geschichte",
                "Massenfertigung von Kuscheltieren",
                "Naturgetreue Handarbeit für das Kinderzimmer",
                "Technik Spielzeug von früher wieder im Handel",
                "Überfluss im Kinderzimmer",
                "Viele Computerspiele kommen schnell aus der Modernen",
                "Warum sich leser von Buchern abwenden"
            ],
            
            texts: [
                {
                    content: `Die erste Kosener Puppenfabrik wurde 1912 von Kathe Kruse gegründet. 80 Jahre später übernahm der Unternehmer Helmut Schache die traditionsreiche Spielzeugmanufaktur in Sachsen-Anhalt, seit dem wird sie von seiner Familie geführt. Dort werden noch wie früher Plüschtiere einzeln angefertigt, rund 80.000 jährlich, von der kleinen Maus bis zum 1,65 Meter großen Bären, Wir machen keine niedlichen Plüschtiere. Wir versuchen, die Natur zu imitieren, sagt der Geschäftsführer. Die Tiere wirken dadurch besonders echt und sind bei Kindern und Sammlern sehr beliebt.`,
                    correctAnswer: "Naturgetreue Handarbeit für das Kinderzimmer"
                },
                {
                    content: `Der Siegeszug des Computerspiels ist nicht aufzuhalten. Doch die Spiele werden immer schneller von neuen abgelöst. Das ist das Ergebnis einer Studie des Marktforschungsinstituts GfK. Die Hälfte der 100 meistverkauften PC-Spiele im vergangenen Jahr war bereits im Vorjahr nicht unter den Top 100. Noch schneller ist der Wechsel bei Konsolenspielen. Hier waren es sogar 70 Prozent. Das liegt daran, dass die Hersteller immer neue Versionen auf den Markt bringen, die die alten ersetzen.`,
                    correctAnswer: "Viele Computerspiele kommen schnell aus der Modernen"
                },
                {
                    content: `Die Firma Märklin aus Göppingen ist weltbekannt für ihre Modelleisenbahnen. Sie wurde 1859 von Theodor Friedrich Wilhelm Märklin gegründet. Zunächst stellte der Betrieb Puppenküchen und -herde her. Die erste Spielzeugeisenbahn kam 1891 auf den Markt. Heute ist Märklin der größte europäische Hersteller von Modelleisenbahnen. Die Firma hat eine wechselvolle Geschichte hinter sich. 2006 musste sie Insolvenz anmelden, wurde aber 2007 von einem Investor übernommen. Seitdem geht es wieder aufwärts.`,
                    correctAnswer: "Kleine Züge mit langer Geschichte"
                },
                {
                    content: `In vielen Kinderzimmern gibt es zu viele Spielsachen. Das ist nicht nur teuer, sondern kann auch negative Folgen für die Entwicklung der Kinder haben. Zu diesem Ergebnis kommt eine Studie der Universität Witten/Herdecke. Wenn Kinder zu viele Spielsachen haben, können sie sich nicht mehr richtig konzentrieren und werden unruhiger. Die Forscher empfehlen, die Anzahl der Spielsachen zu reduzieren und stattdessen mehr Zeit mit den Kindern zu verbringen.`,
                    correctAnswer: "Überfluss im Kinderzimmer"
                },
                {
                    content: `Brettspiele erleben derzeit eine Renaissance. Immer mehr Familien entdecken die Freude am gemeinsamen Spielen. Klassiker wie „Mensch ärgere Dich nicht" oder „Monopoly" sind nach wie vor beliebt. Aber auch neue Spiele kommen gut an. „Brettspiele fördern das Miteinander und die sozialen Fähigkeiten der Kinder", sagt eine Erziehungswissenschaftlerin. „Sie lernen, Regeln einzuhalten, zu gewinnen und zu verlieren." Das ist wichtig für die Entwicklung.`,
                    correctAnswer: "Alte spiele stärken das Miteinander"
                }
            ],

            // Lesen Teil 2 - النص الكامل من ملف PDF
            longText: {
                content: `Die Digitalisierung verändert die Art, wie wir lesen, grundlegend. Während früher das gedruckte Buch dominiert hat, lesen heute viele Menschen lieber auf Tablets, E-Readern oder Smartphones. Das hat Vor- und Nachteile.
E-Books sind praktisch: Man kann Tausende von Büchern auf einem Gerät speichern und hat sie immer dabei. Auch die Suche nach bestimmten Begriffen ist einfacher. Zudem sind E-Books oft günstiger als gedruckte Bücher.
Allerdings gibt es auch Kritik. Viele Menschen vermissen das haptische Erlebnis eines gedruckten Buches. Das Blättern in den Seiten, der Geruch von Papier - das fehlt bei E-Books. Zudem kann die ständige Nutzung von Bildschirmen zu Augenbelastung führen.
Eine Studie der Universität Hamburg hat gezeigt, dass das Leseverständnis bei gedruckten Texten besser ist als bei digitalen. Die Probanden konnten sich an mehr Details erinnern, wenn sie auf Papier lasen. Das liegt vermutlich daran, dass das Gehirn beim Lesen auf Papier mehr Sinne anspricht.
Trotzdem wird die Digitalisierung weiter voranschreiten. Verlage und Buchhändler müssen sich darauf einstellen. Viele bieten bereits beide Formate an - gedruckt und digital. So kann jeder Leser selbst entscheiden, welche Form er bevorzugt.
Die Zukunft des Lesens wird wahrscheinlich eine Mischung aus beiden Welten sein. Das gedruckte Buch wird not verschwinden, aber es wird sich verändern. Vielleicht werden wir in Zukunft mehr interaktive Bücher sehen, die digitale und analoge Elemente verbinden.`,
                questions: [
                    {
                        question: "Was ist ein Vorteil von E-Books?",
                        options: [
                            "Sie sind besser für die Augen.",
                            "Man kann viele Bücher auf einem Gerät speichern.",
                            "Das Leseverständnis ist besser."
                        ],
                        correctAnswer: "Man kann viele Bücher auf einem Gerät speichern."
                    },
                    {
                        question: "Warum ist das Leseverständnis bei gedruckten Texten besser?",
                        options: [
                            "Weil das Gehirn mehr Sinne anspricht.",
                            "Weil die Schrift größer ist.",
                            "Weil man sich besser konzentrieren kann."
                        ],
                        correctAnswer: "Weil das Gehirn mehr Sinne anspricht."
                    },
                    {
                        question: "Was vermissen viele Menschen bei E-Books?", 
                        options: [
                            "Die günstigen Preise.",
                            "Das haptische Erlebnis.",
                            "Die einfache Suche."
                        ],
                        correctAnswer: "Das haptische Erlebnis."
                    },
                    {
                        question: "Wie reagieren Verlage auf die Digitalisierung?",
                        options: [
                            "Sie stellen nur noch E-Books her.",
                            "Sie bieten beide Formate an.",
                            "Sie verkleinern ihre Produktion."
                        ],
                        correctAnswer: "Sie bieten beide Formate an."
                    },
                    {
                        question: "Wie wird die Zukunft des Lesens aussehen?",
                        options: [
                            "Nur noch digitale Bücher.",
                            "Nur noch gedruckte Bücher.",
                            "Eine Mischung aus beiden Welten."
                        ],
                        correctAnswer: "Eine Mischung aus beiden Welten."
                    }
                ]
            },

            // Lesen Teil 3 - البيانات من ملف PDF
            situations: [
                "Sie möchten ein Konzert besuchen und suchen noch Karten.",
                "Ihre Firma sucht eine neue Büroeinrichtung.",
                "Sie wollen Ihren Garten umgestalten und brauchen Pflanzen.",
                "Sie planen eine Reise nach Italien und suchen ein Hotel.",
                "Ihr Computer ist kaputt und Sie brauchen Hilfe.",
                "Sie möchten einen Sprachkurs besuchen.", 
                "Sie suchen ein Restaurant für ein besonderes Essen.",
                "Sie wollen ins Kino gehen und suchen einen Film.",
                "Sie brauchen einen Handwerker für Reparaturen in der Wohnung.",
                "Sie möchten ein Auto kaufen und suchen Angebote."
            ],

            ads: [
                {
                    id: "a",
                    title: "Konzertkarten",
                    content: "Wir haben noch Karten für das Konzert von Helene Fischer am Samstag. Bestellen Sie jetzt online oder kommen Sie in unseren Vorverkaufsstellen. Sichern Sie sich die besten Plätze!"
                },
                {
                    id: "b", 
                    title: "Büromöbel",
                    content: "Wir bieten komplette Büroeinrichtungen zu günstigen Preisen. Von Schreibtischen über Stühle bis zu Schränken - bei uns finden Sie alles für Ihr Büro. Kostenlose Beratung und Montage."
                },
                {
                    id: "c",
                    title: "Gartencenter", 
                    content: "Besuchen Sie unser Gartencenter mit großer Auswahl an Pflanzen, Blumen und Gartenaccessoires. Wir beraten Sie gerne bei der Gestaltung Ihres Gartens. Aktionswoche: 20% Rabatt auf alle Rosen."
                },
                {
                    id: "d",
                    title: "Italienische Hotels",
                    content: "Buchen Sie jetzt Ihr Traumhotel in Italien! Wir bieten Unterkünfte in allen Preisklassen - vom einfachen B&B bis zum Luxushotel. Frühbucherrabatt bis 30%."
                },
                {
                    id: "e",
                    title: "Computer Service",
                    content: "Ihr Computer macht Probleme? Wir helfen schnell und kompetent. Reparatur, Wartung und Beratung. Kostenlose Diagnose. Schneller Service - meist innerhalb von 24 Stunden."
                },
                {
                    id: "f",
                    title: "Sprachschule",
                    content: "Lernen Sie Sprachen mit uns! Kurse in Englisch, Französisch, Spanisch und vielen anderen Sprachen. Kleine Gruppen, qualifizierte Lehrer. Kostenlose Probestunde."
                },
                {
                    id: "g",
                    title: "Restaurant Empfehlung",
                    content: "Das 'Rote Haus' bietet feine deutsche Küche in gemütlicher Atmosphäre. Frische Zutaten, täglich wechselnde Menüs. Reservierung empfohlen. Sonntags Brunch von 10-14 Uhr."
                },
                {
                    id: "h", 
                    title: "Kino Programm",
                    content: "Aktuelle Filme in bester Qualität. Dolby Surround Sound, bequeme Sitze. Familienvorstellungen am Wochenende. Online-Ticketbuchung möglich. Kommen Sie vorbei!"
                },
                {
                    id: "i",
                    title: "Handwerker Service",
                    content: "Wir erledigen alle Reparaturen in Haus und Wohnung. Malerarbeiten, Elektrik, Installationen. Zuverlässig und preiswert. Kostenloses Angebot. 24h Notdienst."
                },
                {
                    id: "j",
                    title: "Autohaus", 
                    content: "Große Auswahl an Neuwagen und Gebrauchtwagen. Finanzierung und Leasing möglich. Probefahrt jederzeit. Service und Reparatur aller Marken. Kommen Sie vorbei!"
                },
                {
                    id: "k",
                    title: "Buchhandlung",
                    content: "Wir haben eine große Auswahl an Büchern aller Genres. Beratung durch erfahrene Buchhändler. Lesungen und Signierstunden mit Autoren. Online-Bestellung ممكن."
                },
                {
                    id: "l",
                    title: "Sportgeschäft",
                    content: "Alles für Sport und Freizeit. Von Laufschuhen über Fitnessgeräte bis zu Campingausrüstung. Fachberatung, Anprobe. Sonderaktionen im November."
                }
            ],

            // الإجابات الصحيحة لـ Lesen Teil 3
            teil3Answers: {
                11: "Konzertkarten",
                12: "Büromöbel", 
                13: "Gartencenter",
                14: "Italienische Hotels",
                15: "Computer Service",
                16: "Sprachschule",
                17: "Restaurant Empfehlung",
                18: "Kino Programm",
                19: "Handwerker Service", 
                20: "Autohaus"
            },

            // Sprachbausteine Teil 1
            blankText1: {
                content: `Hallo Leon,
vielen Dank für deine letzte Mail __(21)__ Peking! Du arbeitest ja jetzt schon seit einem halben Jahr in China – unglaublich, wie schnell die Zeit vergeht.
Leider hatte ich in den letzten drei Wochen keine Zeit, dir zu antworten, __(22)__ ich viel zu tun hatte. Aber jetzt berichte ich dir, __(23)__ alles los war.
Also, im Büro haben wir derzeit viel Stress, __(24)__ drei Kollegen im Urlaub sind und eine weitere Kollegin seit zwei Wochen krank ist. Jetzt müssen wir mit fünf Leuten die Arbeit erledigen, die sonst neun Leute machen. Ich weiß wirklich nicht, wer diese Urlaubsplanung gemacht hat. Hoffentlich __(25)__ das in Zukunft besser organisiert.
Abends waren Carmen und ich dann ein paarmal aus. Wir waren zum Beispiel bei einem Konzert von "Belasco". Kennst du die Band? Eigentlich war ich an dem Abend ganz schön kaputt und __(26)__ am liebsten zuhause geblieben, aber ich hatte Carmen die Karten zum Geburtstag geschenkt. Da __(27)__ ich ja schlecht auf dem Sofa sitzen bleiben! Im Nachhinein muss ich sagen: Ein Glück, dass wir zu dem Konzert gegangen sind, __(28)__ es war einfach nur super!
An den letzten beiden Wochenenden hatten wir dann auch noch Familienfeiern: Erst hatte meine ältere Schwester Geburtstag und hat groß gefeiert, dann hat ein Cousin geheiratet und uns eingeladen, __(29)__ war zwar schön, aber auch anstrengend. Ich bin froh, dass wir für die kommenden Wochenenden __(30)__ keine Pläne haben.
Das war's erst mal von mir. Melde dich doch wieder, ich freue mich __(31)__ deine nächste E-Mail!

Viele Grüße sendet dir
Fabian`,
                answers: ["aus", "weil", "was", "da", "wird", "wäre", "konnte", "denn", "Beides", "noch", "auf"]
            },

            // Sprachbausteine Teil 2
            blankText2: {
                content: `Es gibt inzwischen zahlreiche Online-Sprachkurse und __(31)__ mit Smartphones kann man Sprachen lernen. Eine weitere Lernmöglichkeit ist zum Beispiel eine Tandem-Partnerschaft __(32)__ einem Muttersprachler. Welche Vorteile und Nachteile haben die unterschiedlichen Methoden?
Es gibt inzwischen zahlreiche Online-Lernportale, die leicht zu überblicken und zu bedienen sind. Der Vorteil: Man kann die Wörter nicht nur lesen, __(33)__ gleichzeitig auch hören. Außerdem kann man Wörter nachsprechen, __(34)__ dass ein ganzer Kurs zuhört.
Auch Lerntipps bekommt man bei Online-Portalen, bespielsweise diesen: Vokabeln sollte man lieber mehrmals täglich in Fünf-Minuten-Blöcken wiederholen, __(35)__ sie in einer Stunde alle auf einmal zu lernen.
Wer auch unterwegs lernen möchte, kann es mit einer Smartphone-App versuchen, einem kleinen Programm, das auf dem Handy läuft. Viele Programme gibt es kostenlos, andere kosten zwischen einem und mehreren Euro. Die kleinen Helfer sind __(36)__ gut zum Vokabellernen geeignet – mehr aber meist nicht. Das spielerische Vokabeltraining macht zwar Spaß, __(37)__ Satzbau oder andere Grammatikthemen werden allenfalls kurz angesprochen. Ein richtiges Gespräch kann man mit dieser Methode erst recht nicht üben. Dafür __(38)__ man besser in einen Kurs gehen oder einen Tandem-Partner suchen.
Ein Tandem-Partner ist ein Muttersprachler, der die Grammatik erklärt, die Aussprache verbessert und seinerseits die Muttersprache des anderen lernen möchte.
Der schnellste Weg, __(39)__ einen passenden Tandem-Partner zu finden, ist die Online-Suche: Muttersprache, Zielsprache und Wohnort eingeben, __(40)__ werden alle Treffer angezeigt. Man trifft sich beispielsweise in einem Restaurant, schickt sich Nachrichten oder E-Mails und erklärt sich gegenseitig die eigene Sprache.`,
                answers: ["sogar", "mit", "sondern", "ohne", "anstatt", "besonders", "aber", "sollte", "um", "schon"]
            }
        };

        // تهيئة الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
            setupEventListeners();
        });

        let currentLang = 'ar';
        let isDarkMode = false;

        function initializePage() {
            // تحميل الإعدادات المحفوظة
            const savedLang = localStorage.getItem('language') || 'ar';
            const savedDarkMode = localStorage.getItem('darkMode') === 'true';
            const username = localStorage.getItem('username') || 'زائر';
            const access = localStorage.getItem('access');
            
            changeLanguage(savedLang);
            if (savedDarkMode) {
                toggleDarkMode();
            }
            
            // التحقق من حالة المستخدم
            if (access === 'paid' && username) {
                document.getElementById('premiumBadge').style.display = 'flex';
            }
            
            // تهيئة الأجزاء
            initializeTeil1();
            initializeTeil2();  
            initializeTeil3();
            initializeSprachbausteine();
        }

        function initializeTeil1() {
            const headingsList = document.getElementById('headingsList');
            const textsList = document.getElementById('textsList');

            headingsList.innerHTML = '';
            textsList.innerHTML = '';

            // إضافة العناوين
            examData.headings.forEach((heading, index) => {
                const headingItem = document.createElement('div');
                headingItem.className = 'heading-item';
                headingItem.innerHTML = `
                    <strong>${String.fromCharCode(97 + index)})</strong> ${heading}
                `;
                headingItem.dataset.letter = String.fromCharCode(97 + index);
                headingsList.appendChild(headingItem);
            });

            // إضافة النصوص
            examData.texts.forEach((text, index) => {
                const textItem = document.createElement('div');
                textItem.className = 'question';
                textItem.innerHTML = `
                    <h3>Text ${index + 1}</h3>
                    <div class="text-content">${text.content}</div>
                    <div class="answer hidden correct-answer">
                        ${currentLang === 'ar' ? 'الإجابة الصحيحة:' : currentLang === 'de' ? 'Richtige Antwort:' : 'Correct answer:'} ${text.correctAnswer}
                    </div>
                `;
                textsList.appendChild(textItem);
            });
        }

        function initializeTeil2() {
            const longText = document.getElementById('longText');
            const questionsList = document.getElementById('questionsList');

            longText.innerHTML = `<div class="text-content">${examData.longText.content}</div>`;

            questionsList.innerHTML = '';
            examData.longText.questions.forEach((question, index) => {
                const questionItem = document.createElement('div');
                questionItem.className = 'question';
                questionItem.innerHTML = `
                    <h3>Frage ${index + 6}</h3>
                    <p><strong>${question.question}</strong></p>
                    <div class="options">
                        ${question.options.map((option, optIndex) => `
                            <div class="option" data-index="${optIndex}">
                                ${String.fromCharCode(97 + optIndex)}) ${option}
                            </div>
                        `).join('')}
                    </div>
                    <div class="answer hidden correct-answer">
                        ${currentLang === 'ar' ? 'الإجابة الصحيحة:' : currentLang === 'de' ? 'Richtige Antwort:' : 'Correct answer:'} ${question.correctAnswer}
                    </div>
                `;
                questionsList.appendChild(questionItem);
            });
        }

        function initializeTeil3() {
            const situationsList = document.getElementById('situationsList');
            const adsList = document.getElementById('adsList');

            situationsList.innerHTML = '';
            examData.situations.forEach((situation, index) => {
                const situationItem = document.createElement('div');
                situationItem.className = 'situation-item';
                situationItem.innerHTML = `
                    <strong>${index + 11})</strong> ${situation}
                    <div class="answer hidden correct-answer">
                        ${currentLang === 'ar' ? 'الإجابة الصحيحة:' : currentLang === 'de' ? 'Richtige Antwort:' : 'Correct answer:'} ${examData.teil3Answers[index + 11]}
                    </div>
                `;
                situationsList.appendChild(situationItem);
            });

            adsList.innerHTML = '';
            examData.ads.forEach(ad => {
                const adItem = document.createElement('div');
                adItem.className = 'ad-item';
                adItem.innerHTML = `
                    <strong>${ad.id.toUpperCase()}) ${ad.title}</strong>
                    <p>${ad.content}</p>
                `;
                adsList.appendChild(adItem);
            });
        }

        function initializeSprachbausteine() {
            // Teil 1
            const blankText1 = document.getElementById('blankText1');
            const textWithBlanks1 = examData.blankText1.content.replace(/__\(\d+\)__/g, match => {
                const blankNumber = parseInt(match.match(/\d+/)[0]);
                return `<span class="blank">______<span class="blank-answer hidden">${examData.blankText1.answers[blankNumber - 21]}</span></span>`;
            });
            blankText1.innerHTML = textWithBlanks1;

            // Teil 2
            const blankText2 = document.getElementById('blankText2');
            const textWithBlanks2 = examData.blankText2.content.replace(/__\(\d+\)__/g, match => {
                const blankNumber = parseInt(match.match(/\d+/)[0]);
                return `<span class="blank">______<span class="blank-answer hidden">${examData.blankText2.answers[blankNumber - 31]}</span></span>`;
            });
            blankText2.innerHTML = textWithBlanks2;
        }

        function setupEventListeners() {
            // أزرار التحكم
            document.getElementById('showAnswers').addEventListener('click', showAllAnswers);
            document.getElementById('hideAnswers').addEventListener('click', hideAllAnswers);
            
            // زر الرئيسية
            document.getElementById('homeBtn').addEventListener('click', () => {
                window.location.href = 'tahada.html';
            });
            
            // زر الوضع الليلي
            document.getElementById('themeToggle').addEventListener('click', toggleDarkMode);
            
            // زر المستخدم
            document.getElementById('userBtn').addEventListener('click', () => {
                window.location.href = 'tahada.html#profile';
            });
            
            // الأزرار الجديدة
            document.getElementById('supportBtn').addEventListener('click', openSupportModal);
            document.getElementById('notesBtn').addEventListener('click', () => {
                window.location.href = 'tahada.html#notes';
            });
            document.getElementById('premiumBadge').addEventListener('click', openPhoneModal);
            
            // محدد اللغة
            document.getElementById('langBtn').addEventListener('click', toggleLangDropdown);
            document.querySelectorAll('.lang-option').forEach(option => {
                option.addEventListener('click', () => {
                    const lang = option.getAttribute('data-lang');
                    changeLanguage(lang);
                    document.getElementById('langDropdown').classList.remove('show');
                });
            });
            
            // إغلاق النوافذ
            setupModalClosures();
            
            // إغلاق القوائم المنسدلة بالنقر خارجها
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.language-selector')) {
                    document.getElementById('langDropdown').classList.remove('show');
                }
            });
        }

        // دالة فتح نافذة الدعم
        function openSupportModal() {
            document.getElementById('supportModal').style.display = 'block';
        }

        // دالة فتح نافذة التفعيل
        function openPhoneModal() {
            document.getElementById('phoneModal').style.display = 'block';
        }

        // دالة إغلاق النوافذ
        function setupModalClosures() {
            document.querySelectorAll('.close').forEach(closeBtn => {
                closeBtn.addEventListener('click', function() {
                    this.closest('.modal').style.display = 'none';
                });
            });
            
            // إغلاق بالنقر خارج المحتوى
            window.addEventListener('click', function(event) {
                if (event.target.classList.contains('modal')) {
                    event.target.style.display = 'none';
                }
            });
        }

        function showAllAnswers() {
            document.querySelectorAll('.answer').forEach(answer => {
                answer.classList.remove('hidden');
            });
            document.querySelectorAll('.blank-answer').forEach(answer => {
                answer.classList.remove('hidden');
            });
            document.querySelectorAll('.heading-item').forEach((heading, index) => {
                const letter = heading.dataset.letter;
                examData.texts.forEach(text => {
                    if (text.correctAnswer === examData.headings[letter.charCodeAt(0) - 97]) {
                        heading.classList.add('matched');
                    }
                });
            });
        }

        function hideAllAnswers() {
            document.querySelectorAll('.answer').forEach(answer => {
                answer.classList.add('hidden');
            });
            document.querySelectorAll('.blank-answer').forEach(answer => {
                answer.classList.add('hidden');
            });
            document.querySelectorAll('.heading-item').forEach(heading => {
                heading.classList.remove('matched');
            });
        }

        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark-mode', isDarkMode);
            localStorage.setItem('darkMode', isDarkMode);
            
            const themeIcon = document.querySelector('#themeToggle i');
            if (isDarkMode) {
                themeIcon.className = 'fas fa-sun';
            } else {
                themeIcon.className = 'fas fa-moon';
            }
        }

        function toggleLangDropdown() {
            document.getElementById('langDropdown').classList.toggle('show');
        }

        function changeLanguage(lang) {
            currentLang = lang;
            const t = translations[lang];
            
            // تحديث جميع النصوص
            Object.keys(t).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    element.textContent = t[key];
                }
            });
            
            localStorage.setItem('language', lang);
            
            // إعادة تهيئة المحتوى لترجمة الإجابات
            initializeTeil1();
            initializeTeil2();
        }
    </script>
</body>
</html>